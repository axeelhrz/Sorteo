"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/page",{

/***/ "(app-pages-browser)/./src/services/firebase-auth-service.ts":
/*!***********************************************!*\
  !*** ./src/services/firebase-auth-service.ts ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   firebaseAuthService: function() { return /* binding */ firebaseAuthService; }\n/* harmony export */ });\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/../node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/../node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var _types_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/types/auth */ \"(app-pages-browser)/./src/types/auth.ts\");\n\n\n\n\n/**\n * Convierte un FirebaseUser a nuestro tipo User\n */ const convertFirebaseUserToUser = async (firebaseUser)=>{\n    try {\n        var _firebaseUser_email;\n        // Obtener datos adicionales del usuario desde Firestore\n        const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"users\", firebaseUser.uid));\n        if (!userDoc.exists()) {\n            var _firebaseUser_email1;\n            // Si no existe el documento, crear uno básico\n            const basicUser = {\n                id: firebaseUser.uid,\n                name: firebaseUser.displayName || ((_firebaseUser_email1 = firebaseUser.email) === null || _firebaseUser_email1 === void 0 ? void 0 : _firebaseUser_email1.split(\"@\")[0]) || \"Usuario\",\n                email: firebaseUser.email || \"\",\n                role: _types_auth__WEBPACK_IMPORTED_MODULE_3__.UserRole.USER\n            };\n            return basicUser;\n        }\n        const userData = userDoc.data();\n        return {\n            id: firebaseUser.uid,\n            name: userData.name || firebaseUser.displayName || ((_firebaseUser_email = firebaseUser.email) === null || _firebaseUser_email === void 0 ? void 0 : _firebaseUser_email.split(\"@\")[0]) || \"Usuario\",\n            email: firebaseUser.email || \"\",\n            role: userData.role || _types_auth__WEBPACK_IMPORTED_MODULE_3__.UserRole.USER\n        };\n    } catch (error) {\n        var _firebaseUser_email2;\n        console.error(\"Error converting Firebase user:\", error);\n        // Retornar usuario básico si hay error\n        return {\n            id: firebaseUser.uid,\n            name: firebaseUser.displayName || ((_firebaseUser_email2 = firebaseUser.email) === null || _firebaseUser_email2 === void 0 ? void 0 : _firebaseUser_email2.split(\"@\")[0]) || \"Usuario\",\n            email: firebaseUser.email || \"\",\n            role: _types_auth__WEBPACK_IMPORTED_MODULE_3__.UserRole.USER\n        };\n    }\n};\nconst firebaseAuthService = {\n    /**\n   * Registra un nuevo usuario\n   */ async register (data) {\n        try {\n            // Crear usuario en Firebase Auth\n            const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.createUserWithEmailAndPassword)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth, data.email, data.password);\n            const firebaseUser = userCredential.user;\n            // Actualizar el perfil con el nombre\n            if (data.name) {\n                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.updateProfile)(firebaseUser, {\n                    displayName: data.name\n                });\n            }\n            // Obtener token de ID\n            const token = await firebaseUser.getIdToken();\n            // Crear documento de usuario en Firestore\n            const userData = {\n                name: data.name,\n                email: data.email,\n                role: data.role,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)(),\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n            };\n            // Si es una tienda, crear también el documento de la tienda\n            if (data.role === _types_auth__WEBPACK_IMPORTED_MODULE_3__.UserRole.SHOP && data.shopName) {\n                // Crear documento de tienda primero para obtener su ID\n                const shopData = {\n                    userId: firebaseUser.uid,\n                    name: data.shopName,\n                    description: \"\",\n                    status: \"pending\",\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                };\n                // Crear tienda y obtener su ID\n                const shopRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"shops\"), shopData);\n                userData.shopId = shopRef.id;\n                // Crear el usuario con referencia a la tienda\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"users\", firebaseUser.uid), userData);\n            } else {\n                // Solo crear el usuario\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"users\", firebaseUser.uid), userData);\n            }\n            // Convertir a nuestro tipo User\n            const user = await convertFirebaseUserToUser(firebaseUser);\n            return {\n                user: user,\n                token\n            };\n        } catch (error) {\n            console.error(\"Error registering user:\", error);\n            let errorMessage = \"Error al registrar usuario\";\n            if (error.code === \"auth/email-already-in-use\") {\n                errorMessage = \"Este email ya est\\xe1 registrado\";\n            } else if (error.code === \"auth/invalid-email\") {\n                errorMessage = \"Email inv\\xe1lido\";\n            } else if (error.code === \"auth/weak-password\") {\n                errorMessage = \"La contrase\\xf1a debe tener al menos 6 caracteres\";\n            } else if (error.code === \"auth/operation-not-allowed\") {\n                errorMessage = \"El m\\xe9todo de autenticaci\\xf3n por email/password no est\\xe1 habilitado. Por favor, contacta al administrador.\";\n            } else if (error.code === \"auth/network-request-failed\") {\n                errorMessage = \"Error de conexi\\xf3n. Verifica tu conexi\\xf3n a internet.\";\n            } else if (error.message) {\n                errorMessage = error.message;\n            }\n            throw new Error(errorMessage);\n        }\n    },\n    /**\n   * Inicia sesión con email y contraseña\n   */ async login (data) {\n        try {\n            const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithEmailAndPassword)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth, data.email, data.password);\n            const firebaseUser = userCredential.user;\n            // Obtener token de ID\n            const token = await firebaseUser.getIdToken();\n            // Convertir a nuestro tipo User\n            const user = await convertFirebaseUserToUser(firebaseUser);\n            return {\n                user: user,\n                token\n            };\n        } catch (error) {\n            console.error(\"Error logging in:\", error);\n            let errorMessage = \"Error al iniciar sesi\\xf3n\";\n            if (error.code === \"auth/user-not-found\") {\n                errorMessage = \"Usuario no encontrado\";\n            } else if (error.code === \"auth/wrong-password\") {\n                errorMessage = \"Contrase\\xf1a incorrecta\";\n            } else if (error.code === \"auth/invalid-email\") {\n                errorMessage = \"Email inv\\xe1lido\";\n            } else if (error.code === \"auth/user-disabled\") {\n                errorMessage = \"Usuario deshabilitado\";\n            } else if (error.code === \"auth/too-many-requests\") {\n                errorMessage = \"Demasiados intentos. Intenta m\\xe1s tarde\";\n            } else if (error.code === \"auth/operation-not-allowed\") {\n                errorMessage = \"El m\\xe9todo de autenticaci\\xf3n por email/password no est\\xe1 habilitado. Por favor, contacta al administrador.\";\n            } else if (error.code === \"auth/network-request-failed\") {\n                errorMessage = \"Error de conexi\\xf3n. Verifica tu conexi\\xf3n a internet.\";\n            } else if (error.message) {\n                errorMessage = error.message;\n            }\n            throw new Error(errorMessage);\n        }\n    },\n    /**\n   * Cierra sesión\n   */ async logout () {\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signOut)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth);\n        } catch (error) {\n            console.error(\"Error logging out:\", error);\n            throw error;\n        }\n    },\n    /**\n   * Obtiene el usuario actual\n   */ async getCurrentUser () {\n        try {\n            const firebaseUser = _lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n            if (!firebaseUser) {\n                return null;\n            }\n            return await convertFirebaseUserToUser(firebaseUser);\n        } catch (error) {\n            console.error(\"Error getting current user:\", error);\n            return null;\n        }\n    },\n    /**\n   * Obtiene el token del usuario actual\n   */ async getCurrentUserToken () {\n        try {\n            const firebaseUser = _lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n            if (!firebaseUser) {\n                return null;\n            }\n            return await firebaseUser.getIdToken();\n        } catch (error) {\n            console.error(\"Error getting token:\", error);\n            return null;\n        }\n    },\n    /**\n   * Escucha cambios en el estado de autenticación\n   */ onAuthStateChanged (callback) {\n        return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.onAuthStateChanged)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.auth, async (firebaseUser)=>{\n            if (firebaseUser) {\n                const user = await convertFirebaseUserToUser(firebaseUser);\n                callback(user);\n            } else {\n                callback(null);\n            }\n        });\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9maXJlYmFzZS1hdXRoLXNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTdUI7QUFDdUU7QUFDcEQ7QUFDSTtBQWdCOUM7O0NBRUMsR0FDRCxNQUFNYyw0QkFBNEIsT0FBT0M7SUFDdkMsSUFBSTtZQWtCbURBO1FBakJyRCx3REFBd0Q7UUFDeEQsTUFBTUMsVUFBVSxNQUFNVCwwREFBTUEsQ0FBQ0YsdURBQUdBLENBQUNPLDZDQUFFQSxFQUFFLFNBQVNHLGFBQWFFLEdBQUc7UUFFOUQsSUFBSSxDQUFDRCxRQUFRRSxNQUFNLElBQUk7Z0JBSWVIO1lBSHBDLDhDQUE4QztZQUM5QyxNQUFNSSxZQUFrQjtnQkFDdEJDLElBQUlMLGFBQWFFLEdBQUc7Z0JBQ3BCSSxNQUFNTixhQUFhTyxXQUFXLE1BQUlQLHVCQUFBQSxhQUFhUSxLQUFLLGNBQWxCUiwyQ0FBQUEscUJBQW9CUyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSTtnQkFDdkVELE9BQU9SLGFBQWFRLEtBQUssSUFBSTtnQkFDN0JFLE1BQU1aLGlEQUFRQSxDQUFDYSxJQUFJO1lBQ3JCO1lBQ0EsT0FBT1A7UUFDVDtRQUVBLE1BQU1RLFdBQVdYLFFBQVFZLElBQUk7UUFDN0IsT0FBTztZQUNMUixJQUFJTCxhQUFhRSxHQUFHO1lBQ3BCSSxNQUFNTSxTQUFTTixJQUFJLElBQUlOLGFBQWFPLFdBQVcsTUFBSVAsc0JBQUFBLGFBQWFRLEtBQUssY0FBbEJSLDBDQUFBQSxvQkFBb0JTLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFJO1lBQ3hGRCxPQUFPUixhQUFhUSxLQUFLLElBQUk7WUFDN0JFLE1BQU0sU0FBVUEsSUFBSSxJQUFpQlosaURBQVFBLENBQUNhLElBQUk7UUFDcEQ7SUFDRixFQUFFLE9BQU9HLE9BQU87WUFLc0JkO1FBSnBDZSxRQUFRRCxLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCx1Q0FBdUM7UUFDdkMsT0FBTztZ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TztZQUNkQyxRQUFRRCxLQUFLLENBQUMsc0JBQXNCQTtZQUNwQyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQU15QjtRQUNKLElBQUk7WUFDRixNQUFNdkMsZUFBZUosK0NBQUlBLENBQUM0QyxXQUFXO1lBQ3JDLElBQUksQ0FBQ3hDLGNBQWM7Z0JBQ2pCLE9BQU87WUFDVDtZQUNBLE9BQU8sTUFBTUQsMEJBQTBCQztRQUN6QyxFQUFFLE9BQU9jLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsT0FBTztRQUNUO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQU0yQjtRQUNKLElBQUk7WUFDRixNQUFNekMsZUFBZUosK0NBQUlBLENBQUM0QyxXQUFXO1lBQ3JDLElBQUksQ0FBQ3hDLGNBQWM7Z0JBQ2pCLE9BQU87WUFDVDtZQUNBLE9BQU8sTUFBTUEsYUFBYXNCLFVBQVU7UUFDdEMsRUFBRSxPQUFPUixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1lBQ3RDLE9BQU87UUFDVDtJQUNGO0lBRUE7O0dBRUMsR0FDRDFCLG9CQUFtQnNELFFBQXFDO1FBQ3RELE9BQU90RCxpRUFBa0JBLENBQUNRLCtDQUFJQSxFQUFFLE9BQU9JO1lBQ3JDLElBQUlBLGNBQWM7Z0JBQ2hCLE1BQU1vQixPQUFPLE1BQU1yQiwwQkFBMEJDO2dCQUM3QzBDLFNBQVN0QjtZQUNYLE9BQU87Z0JBQ0xzQixTQUFTO1lBQ1g7UUFDRjtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvc2VydmljZXMvZmlyZWJhc2UtYXV0aC1zZXJ2aWNlLnRzPzMxYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLFxuICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCxcbiAgc2lnbk91dCxcbiAgb25BdXRoU3RhdGVDaGFuZ2VkLFxuICBVc2VyIGFzIEZpcmViYXNlVXNlcixcbiAgdXBkYXRlUHJvZmlsZSxcbiAgdXBkYXRlUGFzc3dvcmQsXG4gIHNlbmRQYXNzd29yZFJlc2V0RW1haWwgYXMgZmlyZWJhc2VTZW5kUGFzc3dvcmRSZXNldEVtYWlsLFxufSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IGRvYywgc2V0RG9jLCBnZXREb2MsIHNlcnZlclRpbWVzdGFtcCwgY29sbGVjdGlvbiwgYWRkRG9jIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGF1dGgsIGRiIH0gZnJvbSAnQC9saWIvZmlyZWJhc2UnO1xuaW1wb3J0IHsgVXNlciwgVXNlclJvbGUgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xuaW1wb3J0IHsgZW1haWxTZXJ2aWNlIH0gZnJvbSAnLi9lbWFpbC1zZXJ2aWNlJztcblxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RlckRhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIHJvbGU6IFVzZXJSb2xlO1xuICBzaG9wTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dpbkRhdGEge1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIENvbnZpZXJ0ZSB1biBGaXJlYmFzZVVzZXIgYSBudWVzdHJvIHRpcG8gVXNlclxuICovXG5jb25zdCBjb252ZXJ0RmlyZWJhc2VVc2VyVG9Vc2VyID0gYXN5bmMgKGZpcmViYXNlVXNlcjogRmlyZWJhc2VVc2VyKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4gPT4ge1xuICB0cnkge1xuICAgIC8vIE9idGVuZXIgZGF0b3MgYWRpY2lvbmFsZXMgZGVsIHVzdWFyaW8gZGVzZGUgRmlyZXN0b3JlXG4gICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGdldERvYyhkb2MoZGIsICd1c2VycycsIGZpcmViYXNlVXNlci51aWQpKTtcbiAgICBcbiAgICBpZiAoIXVzZXJEb2MuZXhpc3RzKCkpIHtcbiAgICAgIC8vIFNpIG5vIGV4aXN0ZSBlbCBkb2N1bWVudG8sIGNyZWFyIHVubyBiw6FzaWNvXG4gICAgICBjb25zdCBiYXNpY1VzZXI6IFVzZXIgPSB7XG4gICAgICAgIGlkOiBmaXJlYmFzZVVzZXIudWlkLFxuICAgICAgICBuYW1lOiBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdVc3VhcmlvJyxcbiAgICAgICAgZW1haWw6IGZpcmViYXNlVXNlci5lbWFpbCB8fCAnJyxcbiAgICAgICAgcm9sZTogVXNlclJvbGUuVVNFUixcbiAgICAgIH07XG4gICAgICByZXR1cm4gYmFzaWNVc2VyO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBmaXJlYmFzZVVzZXIudWlkLFxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSB8fCBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdVc3VhcmlvJyxcbiAgICAgIGVtYWlsOiBmaXJlYmFzZVVzZXIuZW1haWwgfHwgJycsXG4gICAgICByb2xlOiAodXNlckRhdGEucm9sZSBhcyBVc2VyUm9sZSkgfHwgVXNlclJvbGUuVVNFUixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbnZlcnRpbmcgRmlyZWJhc2UgdXNlcjonLCBlcnJvcik7XG4gICAgLy8gUmV0b3JuYXIgdXN1YXJpbyBiw6FzaWNvIHNpIGhheSBlcnJvclxuICAgIHJldHVybiB7XG4gICAgICBpZDogZmlyZWJhc2VVc2VyLnVpZCxcbiAgICAgIG5hbWU6IGZpcmViYXNlVXNlci5kaXNwbGF5TmFtZSB8fCBmaXJlYmFzZVVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ1VzdWFyaW8nLFxuICAgICAgZW1haWw6IGZpcmViYXNlVXNlci5lbWFpbCB8fCAnJyxcbiAgICAgIHJvbGU6IFVzZXJSb2xlLlVTRVIsXG4gICAgfTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZpcmViYXNlQXV0aFNlcnZpY2UgPSB7XG4gIC8qKlxuICAgKiBSZWdpc3RyYSB1biBudWV2byB1c3VhcmlvXG4gICAqL1xuICBhc3luYyByZWdpc3RlcihkYXRhOiBSZWdpc3RlckRhdGEpOiBQcm9taXNlPHsgdXNlcjogVXNlcjsgdG9rZW46IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWFyIHVzdWFyaW8gZW4gRmlyZWJhc2UgQXV0aFxuICAgICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZGF0YS5lbWFpbCwgZGF0YS5wYXNzd29yZCk7XG4gICAgICBjb25zdCBmaXJlYmFzZVVzZXIgPSB1c2VyQ3JlZGVudGlhbC51c2VyO1xuXG4gICAgICAvLyBBY3R1YWxpemFyIGVsIHBlcmZpbCBjb24gZWwgbm9tYnJlXG4gICAgICBpZiAoZGF0YS5uYW1lKSB7XG4gICAgICAgIGF3YWl0IHVwZGF0ZVByb2ZpbGUoZmlyZWJhc2VVc2VyLCB7IGRpc3BsYXlOYW1lOiBkYXRhLm5hbWUgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE9idGVuZXIgdG9rZW4gZGUgSURcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZmlyZWJhc2VVc2VyLmdldElkVG9rZW4oKTtcblxuICAgICAgLy8gQ3JlYXIgZG9jdW1lbnRvIGRlIHVzdWFyaW8gZW4gRmlyZXN0b3JlXG4gICAgICBjb25zdCB1c2VyRGF0YTogYW55ID0ge1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICByb2xlOiBkYXRhLnJvbGUsXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICB9O1xuXG4gICAgICAvLyBTaSBlcyB1bmEgdGllbmRhLCBjcmVhciB0YW1iacOpbiBlbCBkb2N1bWVudG8gZGUgbGEgdGllbmRhXG4gICAgICBpZiAoZGF0YS5yb2xlID09PSBVc2VyUm9sZS5TSE9QICYmIGRhdGEuc2hvcE5hbWUpIHtcbiAgICAgICAgLy8gQ3JlYXIgZG9jdW1lbnRvIGRlIHRpZW5kYSBwcmltZXJvIHBhcmEgb2J0ZW5lciBzdSBJRFxuICAgICAgICBjb25zdCBzaG9wRGF0YSA9IHtcbiAgICAgICAgICB1c2VySWQ6IGZpcmViYXNlVXNlci51aWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5zaG9wTmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgdGllbmRhIHkgb2J0ZW5lciBzdSBJRFxuICAgICAgICBjb25zdCBzaG9wUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdzaG9wcycpLCBzaG9wRGF0YSk7XG4gICAgICAgIHVzZXJEYXRhLnNob3BJZCA9IHNob3BSZWYuaWQ7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCB1c3VhcmlvIGNvbiByZWZlcmVuY2lhIGEgbGEgdGllbmRhXG4gICAgICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICd1c2VycycsIGZpcmViYXNlVXNlci51aWQpLCB1c2VyRGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTb2xvIGNyZWFyIGVsIHVzdWFyaW9cbiAgICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgZmlyZWJhc2VVc2VyLnVpZCksIHVzZXJEYXRhKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29udmVydGlyIGEgbnVlc3RybyB0aXBvIFVzZXJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjb252ZXJ0RmlyZWJhc2VVc2VyVG9Vc2VyKGZpcmViYXNlVXNlcik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHVzZXIhLFxuICAgICAgICB0b2tlbixcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVnaXN0ZXJpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ0Vycm9yIGFsIHJlZ2lzdHJhciB1c3VhcmlvJztcbiAgICAgIFxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAnRXN0ZSBlbWFpbCB5YSBlc3TDoSByZWdpc3RyYWRvJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvaW52YWxpZC1lbWFpbCcpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0VtYWlsIGludsOhbGlkbyc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL3dlYWstcGFzc3dvcmQnKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdMYSBjb250cmFzZcOxYSBkZWJlIHRlbmVyIGFsIG1lbm9zIDYgY2FyYWN0ZXJlcyc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL29wZXJhdGlvbi1ub3QtYWxsb3dlZCcpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0VsIG3DqXRvZG8gZGUgYXV0ZW50aWNhY2nDs24gcG9yIGVtYWlsL3Bhc3N3b3JkIG5vIGVzdMOhIGhhYmlsaXRhZG8uIFBvciBmYXZvciwgY29udGFjdGEgYWwgYWRtaW5pc3RyYWRvci4nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnYXV0aC9uZXR3b3JrLXJlcXVlc3QtZmFpbGVkJykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAnRXJyb3IgZGUgY29uZXhpw7NuLiBWZXJpZmljYSB0dSBjb25leGnDs24gYSBpbnRlcm5ldC4nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5pY2lhIHNlc2nDs24gY29uIGVtYWlsIHkgY29udHJhc2XDsWFcbiAgICovXG4gIGFzeW5jIGxvZ2luKGRhdGE6IExvZ2luRGF0YSk6IFByb21pc2U8eyB1c2VyOiBVc2VyOyB0b2tlbjogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBkYXRhLmVtYWlsLCBkYXRhLnBhc3N3b3JkKTtcbiAgICAgIGNvbnN0IGZpcmViYXNlVXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XG5cbiAgICAgIC8vIE9idGVuZXIgdG9rZW4gZGUgSURcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZmlyZWJhc2VVc2VyLmdldElkVG9rZW4oKTtcblxuICAgICAgLy8gQ29udmVydGlyIGEgbnVlc3RybyB0aXBvIFVzZXJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjb252ZXJ0RmlyZWJhc2VVc2VyVG9Vc2VyKGZpcmViYXNlVXNlcik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHVzZXIhLFxuICAgICAgICB0b2tlbixcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBpbjonLCBlcnJvcik7XG4gICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ0Vycm9yIGFsIGluaWNpYXIgc2VzacOzbic7XG4gICAgICBcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnYXV0aC91c2VyLW5vdC1mb3VuZCcpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1VzdWFyaW8gbm8gZW5jb250cmFkbyc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL3dyb25nLXBhc3N3b3JkJykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAnQ29udHJhc2XDsWEgaW5jb3JyZWN0YSc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL2ludmFsaWQtZW1haWwnKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdFbWFpbCBpbnbDoWxpZG8nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnYXV0aC91c2VyLWRpc2FibGVkJykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAnVXN1YXJpbyBkZXNoYWJpbGl0YWRvJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdEZW1hc2lhZG9zIGludGVudG9zLiBJbnRlbnRhIG3DoXMgdGFyZGUnO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdFbCBtw6l0b2RvIGRlIGF1dGVudGljYWNpw7NuIHBvciBlbWFpbC9wYXNzd29yZCBubyBlc3TDoSBoYWJpbGl0YWRvLiBQb3IgZmF2b3IsIGNvbnRhY3RhIGFsIGFkbWluaXN0cmFkb3IuJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0Vycm9yIGRlIGNvbmV4acOzbi4gVmVyaWZpY2EgdHUgY29uZXhpw7NuIGEgaW50ZXJuZXQuJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENpZXJyYSBzZXNpw7NuXG4gICAqL1xuICBhc3luYyBsb2dvdXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNpZ25PdXQoYXV0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvZ2dpbmcgb3V0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogT2J0aWVuZSBlbCB1c3VhcmlvIGFjdHVhbFxuICAgKi9cbiAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaXJlYmFzZVVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCFmaXJlYmFzZVVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgY29udmVydEZpcmViYXNlVXNlclRvVXNlcihmaXJlYmFzZVVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIE9idGllbmUgZWwgdG9rZW4gZGVsIHVzdWFyaW8gYWN0dWFsXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50VXNlclRva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaXJlYmFzZVVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCFmaXJlYmFzZVVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgZmlyZWJhc2VVc2VyLmdldElkVG9rZW4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB0b2tlbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVzY3VjaGEgY2FtYmlvcyBlbiBlbCBlc3RhZG8gZGUgYXV0ZW50aWNhY2nDs25cbiAgICovXG4gIG9uQXV0aFN0YXRlQ2hhbmdlZChjYWxsYmFjazogKHVzZXI6IFVzZXIgfCBudWxsKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgcmV0dXJuIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAoZmlyZWJhc2VVc2VyKSA9PiB7XG4gICAgICBpZiAoZmlyZWJhc2VVc2VyKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjb252ZXJ0RmlyZWJhc2VVc2VyVG9Vc2VyKGZpcmViYXNlVXNlcik7XG4gICAgICAgIGNhbGxiYWNrKHVzZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG59OyJdLCJuYW1lcyI6WyJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25PdXQiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJ1cGRhdGVQcm9maWxlIiwiZG9jIiwic2V0RG9jIiwiZ2V0RG9jIiwic2VydmVyVGltZXN0YW1wIiwiY29sbGVjdGlvbiIsImFkZERvYyIsImF1dGgiLCJkYiIsIlVzZXJSb2xlIiwiY29udmVydEZpcmViYXNlVXNlclRvVXNlciIsImZpcmViYXNlVXNlciIsInVzZXJEb2MiLCJ1aWQiLCJleGlzdHMiLCJiYXNpY1VzZXIiLCJpZCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwic3BsaXQiLCJyb2xlIiwiVVNFUiIsInVzZXJEYXRhIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImZpcmViYXNlQXV0aFNlcnZpY2UiLCJyZWdpc3RlciIsInVzZXJDcmVkZW50aWFsIiwicGFzc3dvcmQiLCJ1c2VyIiwidG9rZW4iLCJnZXRJZFRva2VuIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiU0hPUCIsInNob3BOYW1lIiwic2hvcERhdGEiLCJ1c2VySWQiLCJkZXNjcmlwdGlvbiIsInN0YXR1cyIsInNob3BSZWYiLCJzaG9wSWQiLCJlcnJvck1lc3NhZ2UiLCJjb2RlIiwibWVzc2FnZSIsIkVycm9yIiwibG9naW4iLCJsb2dvdXQiLCJnZXRDdXJyZW50VXNlciIsImN1cnJlbnRVc2VyIiwiZ2V0Q3VycmVudFVzZXJUb2tlbiIsImNhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/firebase-auth-service.ts\n"));

/***/ })

});