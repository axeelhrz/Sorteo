(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{3392:function(e,t,o){Promise.resolve().then(o.bind(o,9057))},9057:function(e,t,o){"use strict";o.d(t,{default:function(){return g}});var n=o(7821),s=o(8078),r=o(4542),a=o(8504),i=o(7851),l=o(3404),c=o(7197),u=o(9730),m=o(6552),d=o.n(m);function g(){let e=(0,a.useRouter)(),{setUser:t,setToken:o}=(0,c.t)(),[m,g]=(0,s.useState)({email:"",password:""}),[_,h]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),A=e=>{let{name:t,value:o}=e.target;g(e=>({...e,[t]:o}))},N=async n=>{n.preventDefault(),h(""),p(!0);try{let{token:n,id:s,name:r,email:a,role:i}=(await l.x.login(m)).data;o(n),t({id:s,name:r,email:a,role:i}),setTimeout(()=>{e.push("/dashboard")},100)}catch(e){var s,r;h((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Credenciales inv\xe1lidas")}finally{p(!1)}};return(0,n.jsx)("div",{className:d().container,children:(0,n.jsxs)("div",{className:d().formCard,children:[(0,n.jsx)(u.Z,{size:"medium",className:d().logo}),(0,n.jsx)("h2",{className:d().title,children:"Iniciar Sesi\xf3n"}),(0,n.jsx)("p",{className:d().subtitle,children:"Accede a tu cuenta para continuar"}),_&&(0,n.jsx)("div",{className:d().errorMessage,children:_}),(0,n.jsxs)("form",{onSubmit:N,className:d().form,children:[(0,n.jsxs)("div",{className:d().formGroup,children:[(0,n.jsxs)("label",{htmlFor:"email",className:d().label,children:[(0,n.jsx)(i.Imn,{className:d().labelIcon}),"Email"]}),(0,n.jsx)("input",{type:"email",id:"email",name:"email",value:m.email,onChange:A,required:!0,className:d().input,placeholder:"tu@email.com"})]}),(0,n.jsxs)("div",{className:d().formGroup,children:[(0,n.jsxs)("label",{htmlFor:"password",className:d().label,children:[(0,n.jsx)(i.UIZ,{className:d().labelIcon}),"Contrase\xf1a"]}),(0,n.jsx)("input",{type:"password",id:"password",name:"password",value:m.password,onChange:A,required:!0,className:d().input,placeholder:"••••••••"})]}),(0,n.jsx)("button",{type:"submit",disabled:f,className:d().submitButton,children:f?"Iniciando sesi\xf3n...":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i._fJ,{className:d().buttonIcon}),"Iniciar Sesi\xf3n"]})})]}),(0,n.jsx)("div",{className:d().footer,children:(0,n.jsxs)("p",{className:d().footerText,children:["\xbfNo tienes una cuenta?"," ",(0,n.jsx)(r.default,{href:"/register",className:d().footerLink,children:"Reg\xedstrate aqu\xed"})]})})]})})}},9730:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var n=o(7821),s=o(8149),r=o(4542),a={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},i=o(3616),l=o.n(i);function c(e){let{size:t="medium",showText:o=!0,className:i="",href:c="/"}=e,u=(0,n.jsxs)("div",{className:"".concat(l().logo," ").concat(l()[t]," ").concat(i),children:[(0,n.jsx)(s.default,{src:a,alt:"TIKETEA ONLINE",width:"small"===t?40:"medium"===t?60:80,height:"small"===t?40:"medium"===t?60:80,className:l().logoImage,priority:!0}),o&&(0,n.jsx)("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return c?(0,n.jsx)(r.default,{href:c,className:l().logoLink,children:u}):u}},3404:function(e,t,o){"use strict";o.d(t,{x:function(){return a}});var n=o(7147),s=o(9190);class r{async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,o){return this.client.post(e,t,o)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}constructor(){(0,n._)(this,"client",void 0),this.client=s.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization="Bearer ".concat(t),console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&localStorage.removeItem("token"),Promise.reject(e)})}}let a=new r},7197:function(e,t,o){"use strict";o.d(t,{t:function(){return r}});var n=o(3020),s=o(4302);let r=(0,n.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>{t?localStorage.setItem("token",t):localStorage.removeItem("token"),e({token:t})},setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},6552:function(e){e.exports={container:"LoginForm_container__AKO7c",logo:"LoginForm_logo__RVlkg",formCard:"LoginForm_formCard__hhe9G",title:"LoginForm_title__fcaaz",subtitle:"LoginForm_subtitle__hAWHa",form:"LoginForm_form__576t0",formGroup:"LoginForm_formGroup__ydMA6",label:"LoginForm_label__JxNP_",labelIcon:"LoginForm_labelIcon__AuVOK",input:"LoginForm_input__ZtjDD",submitButton:"LoginForm_submitButton__rUG7w",buttonIcon:"LoginForm_buttonIcon__QYcE8",errorMessage:"LoginForm_errorMessage__UL3qF",footer:"LoginForm_footer__aprEN",footerText:"LoginForm_footerText__IXxLw",footerLink:"LoginForm_footerLink__SqT2g"}},3616:function(e){e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}}},function(e){e.O(0,[9286,9134,2489,4755,4542,6153,7115,2364,1744],function(){return e(e.s=3392)}),_N_E=e.O()}]);