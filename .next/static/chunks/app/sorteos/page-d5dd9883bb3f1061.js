(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4372],{8844:function(e,t,s){Promise.resolve().then(s.bind(s,395))},395:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7821),r=s(8078),o=s(4542),n=s(8149),i=s(6030),l=s(4176),c=s.n(l);function d(e){var t,s,r;let{raffle:l}=e,d=l.soldTickets/l.totalTickets*100,u=l.totalTickets-l.soldTickets;return(0,a.jsx)(o.default,{href:"/sorteos/".concat(l.id),children:(0,a.jsxs)("div",{className:c().card,children:[(0,a.jsxs)("div",{className:c().imageContainer,children:[(null===(t=l.product)||void 0===t?void 0:t.mainImage)?(0,a.jsx)(n.default,{src:l.product.mainImage,alt:l.product.name,fill:!0,className:c().image,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,a.jsx)("div",{className:c().imagePlaceholder,children:(0,a.jsx)("span",{children:"Sin imagen"})}),(()=>{switch(l.status){case i.r.ACTIVE:return(0,a.jsx)("span",{className:"".concat(c().badge," ").concat(c().badgeActive),children:"Activo"});case i.r.SOLD_OUT:return(0,a.jsx)("span",{className:"".concat(c().badge," ").concat(c().badgeSoldOut),children:"Agotado"});case i.r.FINISHED:return(0,a.jsx)("span",{className:"".concat(c().badge," ").concat(c().badgeFinished),children:"Finalizado"});default:return null}})()]}),(0,a.jsxs)("div",{className:c().content,children:[(0,a.jsxs)("div",{className:c().productInfo,children:[(0,a.jsx)("h3",{className:c().productName,children:(null===(s=l.product)||void 0===s?void 0:s.name)||"Producto"}),(0,a.jsx)("p",{className:c().shopName,children:(null===(r=l.shop)||void 0===r?void 0:r.name)||"Tienda"})]}),(0,a.jsxs)("div",{className:c().value,children:[(0,a.jsx)("span",{className:c().valueLabel,children:"Valor del producto"}),(0,a.jsxs)("span",{className:c().valueAmount,children:["S/ ",Number(l.productValue).toFixed(2)]})]}),(0,a.jsxs)("div",{className:c().progressSection,children:[(0,a.jsxs)("div",{className:c().progressHeader,children:[(0,a.jsx)("span",{className:c().progressLabel,children:"Tickets vendidos"}),(0,a.jsxs)("span",{className:c().progressCount,children:[l.soldTickets," de ",l.totalTickets]})]}),(0,a.jsx)("div",{className:c().progressBar,children:(0,a.jsx)("div",{className:c().progressFill,style:{width:"".concat(Math.min(d,100),"%")}})}),(0,a.jsxs)("div",{className:c().progressFooter,children:[(0,a.jsx)("span",{className:c().remainingTickets,children:u>0?"".concat(u," tickets disponibles"):"Todos los tickets vendidos"}),(0,a.jsxs)("span",{className:c().progressPercent,children:[Math.round(d),"%"]})]})]}),(0,a.jsx)("button",{className:c().ctaButton,children:l.status===i.r.ACTIVE?"Ver sorteo":"Ver detalles"})]})]})})}var u=s(472),p=s.n(u);function h(e){let{onFiltersChange:t,categories:s=[],shops:o=[],isLoading:n=!1}=e,[i,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[_,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[v,x]=(0,r.useState)(""),[j,N]=(0,r.useState)("newest"),[b,C]=(0,r.useState)(!1),R=(0,r.useCallback)(()=>{t({search:i||void 0,category:c||void 0,shopId:u||void 0,status:_||void 0,minValue:f?parseFloat(f):void 0,maxValue:v?parseFloat(v):void 0,sortBy:j,page:1})},[i,c,u,_,f,v,j,t]);return(0,a.jsxs)("div",{className:p().container,children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),R()},className:p().searchForm,children:(0,a.jsxs)("div",{className:p().searchInputWrapper,children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar por nombre de producto, sorteo o tienda...",value:i,onChange:e=>l(e.target.value),className:p().searchInput,disabled:n}),(0,a.jsx)("button",{type:"submit",className:p().searchButton,disabled:n,children:(0,a.jsx)("span",{children:"\uD83D\uDD0D"})})]})}),(0,a.jsxs)("div",{className:p().controlsRow,children:[(0,a.jsxs)("div",{className:p().sortControl,children:[(0,a.jsx)("label",{htmlFor:"sortBy",className:p().label,children:"Ordenar por:"}),(0,a.jsxs)("select",{id:"sortBy",value:j,onChange:e=>{N(e.target.value),t({sortBy:e.target.value,page:1})},className:p().select,disabled:n,children:[(0,a.jsx)("option",{value:"newest",children:"M\xe1s recientes"}),(0,a.jsx)("option",{value:"closest",children:"M\xe1s cerca de completarse"}),(0,a.jsx)("option",{value:"price-asc",children:"Menor precio"}),(0,a.jsx)("option",{value:"price-desc",children:"Mayor precio"})]})]}),(0,a.jsx)("button",{type:"button",className:"".concat(p().toggleButton," ").concat(b?p().active:""),onClick:()=>C(!b),disabled:n,children:b?"✕ Cerrar filtros":"⚙️ M\xe1s filtros"})]}),b&&(0,a.jsxs)("div",{className:p().advancedFilters,children:[s.length>0&&(0,a.jsxs)("div",{className:p().filterGroup,children:[(0,a.jsx)("label",{htmlFor:"category",className:p().label,children:"Categor\xeda"}),(0,a.jsxs)("select",{id:"category",value:c,onChange:e=>d(e.target.value),className:p().select,disabled:n,children:[(0,a.jsx)("option",{value:"",children:"Todas las categor\xedas"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),o.length>0&&(0,a.jsxs)("div",{className:p().filterGroup,children:[(0,a.jsx)("label",{htmlFor:"shop",className:p().label,children:"Tienda"}),(0,a.jsxs)("select",{id:"shop",value:u,onChange:e=>h(e.target.value),className:p().select,disabled:n,children:[(0,a.jsx)("option",{value:"",children:"Todas las tiendas"}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:p().filterGroup,children:[(0,a.jsx)("label",{htmlFor:"status",className:p().label,children:"Estado"}),(0,a.jsxs)("select",{id:"status",value:_,onChange:e=>m(e.target.value),className:p().select,disabled:n,children:[(0,a.jsx)("option",{value:"",children:"Todos los estados"}),(0,a.jsx)("option",{value:"active",children:"Activo"}),(0,a.jsx)("option",{value:"paused",children:"Pausado"}),(0,a.jsx)("option",{value:"sold_out",children:"Agotado"}),(0,a.jsx)("option",{value:"finished",children:"Finalizado"})]})]}),(0,a.jsxs)("div",{className:p().priceRange,children:[(0,a.jsxs)("div",{className:p().filterGroup,children:[(0,a.jsx)("label",{htmlFor:"minValue",className:p().label,children:"Precio m\xednimo (S/)"}),(0,a.jsx)("input",{id:"minValue",type:"number",min:"0",step:"0.01",placeholder:"0",value:f,onChange:e=>g(e.target.value),className:p().input,disabled:n})]}),(0,a.jsxs)("div",{className:p().filterGroup,children:[(0,a.jsx)("label",{htmlFor:"maxValue",className:p().label,children:"Precio m\xe1ximo (S/)"}),(0,a.jsx)("input",{id:"maxValue",type:"number",min:"0",step:"0.01",placeholder:"Sin l\xedmite",value:v,onChange:e=>x(e.target.value),className:p().input,disabled:n})]})]}),(0,a.jsxs)("div",{className:p().filterActions,children:[(0,a.jsx)("button",{type:"button",onClick:R,className:p().applyButton,disabled:n,children:"Aplicar filtros"}),(0,a.jsx)("button",{type:"button",onClick:()=>{l(""),d(""),h(""),m(""),g(""),x(""),N("newest"),t({sortBy:"newest",page:1})},className:p().resetButton,disabled:n,children:"Limpiar"})]})]})]})}var _=s(1941),m=s.n(_);function f(e){let{type:t,onRetry:s}=e,r=(()=>{switch(t){case"no-raffles":return{icon:"\uD83C\uDFB2",title:"No hay sorteos activos",description:"No hay sorteos activos en este momento. Volv\xe9 pronto o segu\xed a nuestras tiendas para estar al tanto de los pr\xf3ximos lanzamientos.",showRetry:!1};case"no-results":return{icon:"\uD83D\uDD0D",title:"No encontramos sorteos",description:"No encontramos sorteos que coincidan con tu b\xfasqueda. Intenta con otros filtros o t\xe9rminos de b\xfasqueda.",showRetry:!1};case"error":return{icon:"⚠️",title:"Ocurri\xf3 un problema",description:"Ocurri\xf3 un problema al cargar los sorteos. Intenta nuevamente.",showRetry:!0};default:return{icon:"\uD83D\uDCE6",title:"Sin datos",description:"No hay datos disponibles.",showRetry:!1}}})();return(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:m().icon,children:r.icon}),(0,a.jsx)("h2",{className:m().title,children:r.title}),(0,a.jsx)("p",{className:m().description,children:r.description}),r.showRetry&&s&&(0,a.jsx)("button",{onClick:s,className:m().retryButton,children:"Reintentar"})]})}var g=s(507),v=s(5805),x=s(4340),j=s.n(x);function N(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[p,_]=(0,r.useState)([]),[m,x]=(0,r.useState)(1),[N,b]=(0,r.useState)(1),[C,R]=(0,r.useState)(0),[y,S]=(0,r.useState)({sortBy:"newest",page:1,limit:12});(0,r.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([v.Z.getCategories(),v.Z.getShopsWithActiveRaffles()]);u(e),_(t)}catch(e){console.error("Error loading metadata:",e)}})()},[]);let I=(0,r.useCallback)(async e=>{n(!0),l(null);try{let s=await v.Z.getActiveRaffles(e);t(s.data),b(s.totalPages),x(s.page),R(s.total)}catch(e){console.error("Error loading raffles:",e),l("No pudimos cargar los sorteos. Intenta nuevamente."),t([])}finally{n(!1)}},[]);(0,r.useEffect)(()=>{I(y)},[]);let w=e=>{let t={...y,page:e};S(t),I(t),window.scrollTo({top:0,behavior:"smooth"})};return(0,a.jsxs)("main",{className:j().container,children:[(0,a.jsxs)("div",{className:j().header,children:[(0,a.jsx)("h1",{className:j().title,children:"Sorteos Disponibles"}),(0,a.jsx)("p",{className:j().subtitle,children:"Descubre incre\xedbles premios y particip\xe1 en nuestros sorteos"})]}),(0,a.jsx)(h,{onFiltersChange:e=>{let t={...y,...e,page:e.page||1};S(t),I(t)},categories:c,shops:p,isLoading:s}),!s&&e.length>0&&(0,a.jsx)("div",{className:j().resultsInfo,children:(0,a.jsxs)("p",{children:["Mostrando ",(0,a.jsx)("strong",{children:e.length})," de ",(0,a.jsx)("strong",{children:C})," sorteos"]})}),s&&(0,a.jsxs)("div",{className:j().loadingContainer,children:[(0,a.jsx)("div",{className:j().spinner}),(0,a.jsx)("p",{children:"Cargando sorteos..."})]}),i&&!s&&(0,a.jsx)(f,{type:"error",onRetry:()=>{I(y)}}),!s&&!i&&0===e.length&&(0,a.jsx)(f,{type:y.search?"no-results":"no-raffles"}),!s&&!i&&e.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:j().grid,children:e.map(e=>(0,a.jsx)(d,{raffle:e},e.id))}),N>1&&(0,a.jsxs)("div",{className:j().pagination,children:[(0,a.jsx)("button",{onClick:()=>w(m-1),disabled:1===m,className:j().paginationButton,children:"← Anterior"}),(0,a.jsxs)("div",{className:j().pageInfo,children:["P\xe1gina ",(0,a.jsx)("strong",{children:m})," de ",(0,a.jsx)("strong",{children:N})]}),(0,a.jsx)("button",{onClick:()=>w(m+1),disabled:m===N,className:j().paginationButton,children:"Siguiente →"})]})]}),(0,a.jsx)(g.Z,{}),(0,a.jsxs)("div",{className:j().ctaSection,children:[(0,a.jsx)("h2",{children:"\xbfEres una tienda?"}),(0,a.jsx)("p",{children:"Crea sorteos y llega a miles de clientes potenciales"}),(0,a.jsx)(o.default,{href:"/register",children:(0,a.jsx)("button",{className:j().ctaButton,children:"Registra tu tienda"})})]})]})}},507:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7821),r=s(7851),o=s(4829),n=s.n(o);function i(){let e=[{number:1,title:"Eleg\xeds el sorteo",description:"Explora nuestro cat\xe1logo y elige el sorteo que te interesa.",icon:r.xUG},{number:2,title:"Compr\xe1s tickets",description:"Adquiere la cantidad de tickets que desees. Cada ticket es una participaci\xf3n.",icon:r.E25},{number:3,title:"Se realiza el sorteo",description:"Cuando se venden todos los tickets, se ejecuta el sorteo autom\xe1ticamente.",icon:r.KCr},{number:4,title:"Se publica el ganador",description:"El ticket ganador se elige de forma aleatoria y se publica en la plataforma.",icon:r.HR2}];return(0,a.jsxs)("section",{className:n().container,children:[(0,a.jsxs)("div",{className:n().header,children:[(0,a.jsx)("h2",{className:n().title,children:"\xbfC\xf3mo funciona este sorteo?"}),(0,a.jsx)("p",{className:n().subtitle,children:"Entend\xe9 el mecanismo en 4 pasos simples"})]}),(0,a.jsx)("div",{className:n().stepsContainer,children:e.map((t,s)=>{let r=t.icon;return(0,a.jsxs)("div",{className:n().step,children:[(0,a.jsx)("div",{className:n().stepIcon,children:(0,a.jsx)(r,{})}),(0,a.jsxs)("div",{className:n().stepContent,children:[(0,a.jsxs)("h3",{className:n().stepTitle,children:["Paso ",t.number,": ",t.title]}),(0,a.jsx)("p",{className:n().stepDescription,children:t.description})]}),s<e.length-1&&(0,a.jsx)("div",{className:n().connector})]},t.number)})}),(0,a.jsxs)("div",{className:n().infoBox,children:[(0,a.jsx)("h3",{className:n().infoTitle,children:"Informaci\xf3n importante"}),(0,a.jsxs)("ul",{className:n().infoList,children:[(0,a.jsx)("li",{children:"Cada ticket representa una participaci\xf3n en el sorteo."}),(0,a.jsx)("li",{children:"El ganador se elige de forma completamente aleatoria."}),(0,a.jsx)("li",{children:"El resultado es transparente y verificable."}),(0,a.jsx)("li",{children:"El ganador ser\xe1 notificado por email inmediatamente."}),(0,a.jsx)("li",{children:"Todos los sorteos cumplen con la normativa vigente."})]})]})]})}},3404:function(e,t,s){"use strict";s.d(t,{x:function(){return n}});var a=s(7147),r=s(9190);class o{async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,s){return this.client.post(e,t,s)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}constructor(){(0,a._)(this,"client",void 0),this.client=r.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization="Bearer ".concat(t),console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&localStorage.removeItem("token"),Promise.reject(e)})}}let n=new o},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(3404);let r={async getActiveRaffles(e){try{let t=new URLSearchParams;return(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.shopId)&&t.append("shopId",e.shopId),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.minValue)!==void 0&&t.append("minValue",e.minValue.toString()),(null==e?void 0:e.maxValue)!==void 0&&t.append("maxValue",e.maxValue.toString()),(null==e?void 0:e.sortBy)&&t.append("sortBy",e.sortBy),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(await a.x.get("/raffles/public/active?".concat(t.toString()))).data}catch(e){throw console.error("Error fetching active raffles:",e),e}},async getRaffleById(e){try{return(await a.x.get("/raffles/public/".concat(e))).data}catch(e){throw console.error("Error fetching raffle:",e),e}},async getRafflesByShop(e,t){try{let s=new URLSearchParams;return(null==t?void 0:t.search)&&s.append("search",t.search),(null==t?void 0:t.sortBy)&&s.append("sortBy",t.sortBy),(null==t?void 0:t.page)&&s.append("page",t.page.toString()),(null==t?void 0:t.limit)&&s.append("limit",t.limit.toString()),(await a.x.get("/raffles/public/shop/".concat(e,"?").concat(s.toString()))).data}catch(e){throw console.error("Error fetching shop raffles:",e),e}},async getCategories(){try{return(await a.x.get("/raffles/public/categories")).data}catch(e){return console.error("Error fetching categories:",e),[]}},async getShopsWithActiveRaffles(){try{return(await a.x.get("/raffles/public/shops")).data}catch(e){return console.error("Error fetching shops:",e),[]}}}},6030:function(e,t,s){"use strict";var a,r;s.d(t,{r:function(){return a}}),(r=a||(a={})).DRAFT="draft",r.PENDING_APPROVAL="pending_approval",r.ACTIVE="active",r.PAUSED="paused",r.SOLD_OUT="sold_out",r.FINISHED="finished",r.CANCELLED="cancelled",r.REJECTED="rejected"},4340:function(e){e.exports={container:"sorteos_container__Zk7Aa",header:"sorteos_header__PTomZ",title:"sorteos_title__MQ79T",subtitle:"sorteos_subtitle__QkmiF",resultsInfo:"sorteos_resultsInfo__Yrpxw",loadingContainer:"sorteos_loadingContainer__R1tkw",spinner:"sorteos_spinner__ZI0IQ",spin:"sorteos_spin__0JpLo",grid:"sorteos_grid__F5Wdi",pagination:"sorteos_pagination__3jkV_",paginationButton:"sorteos_paginationButton__JYbUW",pageInfo:"sorteos_pageInfo__hUa1X",ctaSection:"sorteos_ctaSection__h4E4v",ctaButton:"sorteos_ctaButton__4UQz6"}},1941:function(e){e.exports={container:"EmptyState_container__zMe2_",icon:"EmptyState_icon__EnNXL",bounce:"EmptyState_bounce__3_AL_",title:"EmptyState_title__iSbK4",description:"EmptyState_description__gMPX_",retryButton:"EmptyState_retryButton__R4sHp"}},4829:function(e){e.exports={container:"HowItWorks_container__mnq7x",header:"HowItWorks_header__TUNtf",title:"HowItWorks_title__R9mRH",subtitle:"HowItWorks_subtitle__p1VGO",stepsContainer:"HowItWorks_stepsContainer__z4SVF",step:"HowItWorks_step__xqJEj",stepIcon:"HowItWorks_stepIcon__daqZC",float:"HowItWorks_float__bIpD0",stepContent:"HowItWorks_stepContent__1KjE5",stepTitle:"HowItWorks_stepTitle__wWntG",stepDescription:"HowItWorks_stepDescription__Gjb4i",connector:"HowItWorks_connector__0xEXv",infoBox:"HowItWorks_infoBox__vaEP0",infoTitle:"HowItWorks_infoTitle__5IZQi",infoList:"HowItWorks_infoList__05_Ra"}},4176:function(e){e.exports={card:"RaffleCard_card__mM1X5",imageContainer:"RaffleCard_imageContainer__RYD9p",image:"RaffleCard_image__nztJ2",imagePlaceholder:"RaffleCard_imagePlaceholder__3y5e2",badge:"RaffleCard_badge__PsSvU",badgeActive:"RaffleCard_badgeActive__AE7YM",badgeSoldOut:"RaffleCard_badgeSoldOut__v1sD0",badgeFinished:"RaffleCard_badgeFinished__cJ3RJ",content:"RaffleCard_content__OD30v",productInfo:"RaffleCard_productInfo__f2P1l",productName:"RaffleCard_productName__3N56M",shopName:"RaffleCard_shopName__xTn5w",value:"RaffleCard_value__89KKu",valueLabel:"RaffleCard_valueLabel__hkGuj",valueAmount:"RaffleCard_valueAmount__1maen",progressSection:"RaffleCard_progressSection__nvpkY",progressHeader:"RaffleCard_progressHeader__U37Az",progressLabel:"RaffleCard_progressLabel__rzSO4",progressCount:"RaffleCard_progressCount__LYv1p",progressBar:"RaffleCard_progressBar__QdWZ6",progressFill:"RaffleCard_progressFill__vMDok",progressFooter:"RaffleCard_progressFooter__L_ynv",remainingTickets:"RaffleCard_remainingTickets__ob2rW",progressPercent:"RaffleCard_progressPercent__NGvIs",ctaButton:"RaffleCard_ctaButton__gJ2FM"}},472:function(e){e.exports={container:"RaffleFilters_container__4lZma",searchForm:"RaffleFilters_searchForm__np5lG",searchInputWrapper:"RaffleFilters_searchInputWrapper__cxPZc",searchInput:"RaffleFilters_searchInput__wpNOR",searchButton:"RaffleFilters_searchButton__pCBjk",controlsRow:"RaffleFilters_controlsRow__YFkSb",sortControl:"RaffleFilters_sortControl__cC9Aw",label:"RaffleFilters_label__oQ32V",select:"RaffleFilters_select__msgdj",toggleButton:"RaffleFilters_toggleButton__5POTX",active:"RaffleFilters_active__Rfg8z",advancedFilters:"RaffleFilters_advancedFilters__fF6ZR",slideDown:"RaffleFilters_slideDown__nLnVp",filterGroup:"RaffleFilters_filterGroup__ioUj8",input:"RaffleFilters_input__XcgaU",priceRange:"RaffleFilters_priceRange__RiI4W",filterActions:"RaffleFilters_filterActions__4Mltr",applyButton:"RaffleFilters_applyButton__m2J1k",resetButton:"RaffleFilters_resetButton__fbwWs"}}},function(e){e.O(0,[501,8433,9134,2489,4542,6153,7115,2364,1744],function(){return e(e.s=8844)}),_N_E=e.O()}]);