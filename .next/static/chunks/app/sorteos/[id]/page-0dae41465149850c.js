(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1617],{9627:function(e,t,a){Promise.resolve().then(a.bind(a,4222))},4222:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7821),i=a(8078),r=a(4542),n=a(8149),o=a(8504),l=a(7851),c=a(5805),d=a(6312),u=a(6030),m=a(6943),h=a(4504),_=a.n(h);let p=e=>{let{raffle:t,onPaymentCreated:a}=e,r=(0,o.useRouter)(),{isAuthenticated:n}=(0,d.a)(),[l,c]=(0,i.useState)(1),[h,p]=(0,i.useState)(!1),[g,x]=(0,i.useState)(null),v=t.totalTickets-t.soldTickets,N=Number(t.productValue),f=l*N,j=l>0&&l<=v,k=e=>{c(Math.max(1,Math.min(l+e,v)))},y=async()=>{if(!j){x("Cantidad de tickets inv\xe1lida");return}p(!0),x(null);try{let e=await m.Z.createPayment({raffleId:t.id,amount:f,ticketQuantity:l});a&&a(e.id),r.push("/checkout?paymentId=".concat(e.id))}catch(t){var e,s;x((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al procesar la compra. Intenta de nuevo."),p(!1)}};return n?t.status!==u.r.ACTIVE?(0,s.jsx)("div",{className:_().blockContainer,children:(0,s.jsx)("div",{className:_().messageBox,children:(0,s.jsx)("p",{children:"Este sorteo no est\xe1 disponible para compra"})})}):v<=0?(0,s.jsx)("div",{className:_().blockContainer,children:(0,s.jsx)("div",{className:_().messageBox,children:(0,s.jsx)("p",{children:"\xa1Todos los tickets se han vendido!"})})}):(0,s.jsxs)("div",{className:_().blockContainer,children:[(0,s.jsx)("h2",{className:_().title,children:"Compra tus tickets"}),(0,s.jsxs)("div",{className:_().infoSection,children:[(0,s.jsxs)("div",{className:_().infoItem,children:[(0,s.jsx)("span",{className:_().label,children:"Tickets disponibles:"}),(0,s.jsx)("span",{className:_().value,children:v})]}),(0,s.jsxs)("div",{className:_().infoItem,children:[(0,s.jsx)("span",{className:_().label,children:"Precio por ticket:"}),(0,s.jsxs)("span",{className:_().value,children:["S/. ",N.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:_().quantitySection,children:[(0,s.jsx)("label",{htmlFor:"quantity",className:_().label,children:"Cantidad de tickets:"}),(0,s.jsxs)("div",{className:_().quantityControls,children:[(0,s.jsx)("input",{id:"quantity",type:"number",min:"1",max:v,value:l,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)||c(Math.max(1,Math.min(t,v)))},className:_().quantityInput}),(0,s.jsxs)("div",{className:_().quickButtons,children:[(0,s.jsx)("button",{className:_().quickButton,onClick:()=>k(1),disabled:l>=v,children:"+1"}),(0,s.jsx)("button",{className:_().quickButton,onClick:()=>k(5),disabled:l>=v,children:"+5"}),(0,s.jsx)("button",{className:_().quickButton,onClick:()=>k(10),disabled:l>=v,children:"+10"})]})]})]}),(0,s.jsx)("div",{className:_().subtotalSection,children:(0,s.jsxs)("div",{className:_().subtotalRow,children:[(0,s.jsxs)("span",{children:["Subtotal (",l," tickets):"]}),(0,s.jsxs)("span",{className:_().subtotalValue,children:["S/. ",f.toFixed(2)]})]})}),g&&(0,s.jsx)("div",{className:_().errorMessage,children:g}),(0,s.jsx)("button",{className:_().buyButton,onClick:y,disabled:!j||h,children:h?"Procesando...":"Continuar con la compra"}),!j&&(0,s.jsxs)("p",{className:_().validationMessage,children:["Selecciona una cantidad v\xe1lida (1 - ",v,")"]})]}):(0,s.jsx)("div",{className:_().blockContainer,children:(0,s.jsxs)("div",{className:_().messageBox,children:[(0,s.jsx)("p",{children:"Inicia sesi\xf3n para comprar tickets"}),(0,s.jsx)("button",{className:_().loginButton,onClick:()=>r.push("/login"),children:"Iniciar sesi\xf3n"})]})})};var g=a(3404),x=a(507),v=a(2474),N=a.n(v);function f(){var e,t,a,m,h,_,v,f,j,k,y;let T=(0,o.useParams)().id,{user:b}=(0,d.a)(),[B,w]=(0,i.useState)(null),[I,C]=(0,i.useState)(!0),[S,E]=(0,i.useState)(null),[D,P]=(0,i.useState)([]),[L,A]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{let e=async()=>{try{C(!0);let e=await c.Z.getRaffleById(T);w(e)}catch(e){console.error("Error loading raffle:",e),E("No pudimos cargar el sorteo. Intenta nuevamente.")}finally{C(!1)}};T&&e();let t=setInterval(()=>{T&&B&&(B.status===u.r.ACTIVE||B.status===u.r.SOLD_OUT)&&e()},5e3);return()=>clearInterval(t)},[T,null==B?void 0:B.status]),(0,i.useEffect)(()=>{(async()=>{if(b&&T)try{A(!0);let e=await g.x.get("/api/raffle-tickets?raffleId=".concat(T));P(e.data||[])}catch(e){console.error("Error loading user tickets:",e)}finally{A(!1)}})()},[b,T]),I)return(0,s.jsx)("main",{className:N().container,children:(0,s.jsxs)("div",{className:N().loadingContainer,children:[(0,s.jsx)("div",{className:N().spinner}),(0,s.jsx)("p",{children:"Cargando sorteo..."})]})});if(S||!B)return(0,s.jsx)("main",{className:N().container,children:(0,s.jsxs)("div",{className:N().errorContainer,children:[(0,s.jsx)(l.jRj,{className:N().errorIcon}),(0,s.jsx)("h1",{className:N().errorTitle,children:"Sorteo no encontrado"}),(0,s.jsx)("p",{className:N().errorDescription,children:"El sorteo que buscas no existe o no est\xe1 disponible en este momento."}),(0,s.jsx)(r.default,{href:"/sorteos",children:(0,s.jsx)("button",{className:N().backButton,children:"Volver al listado"})})]})});let q=B.soldTickets/B.totalTickets*100,F=B.totalTickets-B.soldTickets,U=B.status===u.r.ACTIVE,V=B.status===u.r.SOLD_OUT,M=B.status===u.r.FINISHED,O=B.status===u.r.PAUSED,R=(()=>{if(F<=0||0===B.soldTickets)return null;let e=Math.max(1,(new Date().getTime()-new Date(B.createdAt).getTime())/864e5),t=B.soldTickets/e;if(t<=0)return null;let a=new Date;return a.setDate(a.getDate()+Math.ceil(F/t)),a})();return(0,s.jsxs)("main",{className:N().container,children:[(0,s.jsx)(r.default,{href:"/sorteos",className:N().backLink,children:"← Volver al listado"}),(0,s.jsxs)("div",{className:N().content,children:[(0,s.jsxs)("div",{className:N().leftColumn,children:[(0,s.jsxs)("div",{className:N().imageContainer,children:[(null===(e=B.product)||void 0===e?void 0:e.mainImage)?(0,s.jsx)(n.default,{src:B.product.mainImage,alt:B.product.name,fill:!0,className:N().image,priority:!0}):(0,s.jsx)("div",{className:N().imagePlaceholder,children:(0,s.jsx)("span",{children:"Sin imagen disponible"})}),(0,s.jsxs)("div",{className:"".concat(N().statusBadge," ").concat(N()["status-".concat(B.status)]),children:[B.status===u.r.ACTIVE&&"Activo",B.status===u.r.PAUSED&&"Pausado",B.status===u.r.SOLD_OUT&&"Agotado",B.status===u.r.FINISHED&&"Finalizado"]})]}),(0,s.jsxs)("div",{className:N().shopInfo,children:[(0,s.jsx)("h3",{className:N().shopTitle,children:"Tienda"}),(0,s.jsxs)("div",{className:N().shopCard,children:[(null===(t=B.shop)||void 0===t?void 0:t.logo)&&(0,s.jsx)(n.default,{src:B.shop.logo,alt:B.shop.name,width:48,height:48,className:N().shopLogo}),(0,s.jsxs)("div",{className:N().shopDetails,children:[(0,s.jsx)("h4",{className:N().shopName,children:null===(a=B.shop)||void 0===a?void 0:a.name}),(null===(m=B.shop)||void 0===m?void 0:m.status)==="verified"&&(0,s.jsxs)("span",{className:N().verifiedBadge,children:[(0,s.jsx)(l._rq,{className:N().verifiedIcon}),"Tienda verificada"]})]})]}),(null===(h=B.shop)||void 0===h?void 0:h.description)&&(0,s.jsx)("p",{className:N().shopDescription,children:B.shop.description}),(0,s.jsx)(r.default,{href:"/tienda/".concat(null===(_=B.shop)||void 0===_?void 0:_.id),children:(0,s.jsx)("button",{className:N().viewShopButton,children:"Ver otros sorteos"})})]})]}),(0,s.jsxs)("div",{className:N().rightColumn,children:[(0,s.jsxs)("div",{className:N().productSection,children:[(0,s.jsx)("h1",{className:N().productName,children:null===(v=B.product)||void 0===v?void 0:v.name}),(0,s.jsx)("p",{className:N().productDescription,children:null===(f=B.product)||void 0===f?void 0:f.description}),(0,s.jsxs)("div",{className:N().valueBox,children:[(0,s.jsx)("span",{className:N().valueLabel,children:"Valor del producto"}),(0,s.jsxs)("span",{className:N().valueAmount,children:["S/ ",Number(B.productValue).toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:N().rulesSection,children:[(0,s.jsx)("h3",{className:N().sectionTitle,children:"C\xf3mo funciona este sorteo"}),(0,s.jsxs)("div",{className:N().rulesList,children:[(0,s.jsxs)("div",{className:N().rule,children:[(0,s.jsx)("span",{className:N().ruleIcon,children:"\uD83C\uDFAB"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:N().ruleTitle,children:"Tickets y participaci\xf3n"}),(0,s.jsxs)("p",{className:N().ruleText,children:["Por cada producto de S/ ",Number(B.productValue).toFixed(2)," se generan"," ",(0,s.jsx)("strong",{children:Math.floor(2*Number(B.productValue))})," tickets."]})]})]}),(0,s.jsxs)("div",{className:N().rule,children:[(0,s.jsx)("span",{className:N().ruleIcon,children:"\uD83C\uDFB2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:N().ruleTitle,children:"Sorteo autom\xe1tico"}),(0,s.jsx)("p",{className:N().ruleText,children:"Cuando se venden todos los tickets, el sorteo se ejecuta autom\xe1ticamente."})]})]}),(0,s.jsxs)("div",{className:N().rule,children:[(0,s.jsx)("span",{className:N().ruleIcon,children:"\uD83C\uDFC6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:N().ruleTitle,children:"Ganador aleatorio"}),(0,s.jsx)("p",{className:N().ruleText,children:"El ganador se elige de forma completamente aleatoria entre todos los tickets vendidos."})]})]})]})]}),(0,s.jsxs)("div",{className:N().progressSection,children:[(0,s.jsx)("h3",{className:N().sectionTitle,children:"Progreso del sorteo"}),(0,s.jsxs)("div",{className:N().progressHeader,children:[(0,s.jsx)("span",{className:N().progressLabel,children:"Tickets vendidos"}),(0,s.jsxs)("span",{className:N().progressCount,children:[B.soldTickets," de ",B.totalTickets]})]}),(0,s.jsx)("div",{className:N().progressBar,children:(0,s.jsx)("div",{className:N().progressFill,style:{width:"".concat(Math.min(q,100),"%")}})}),(0,s.jsxs)("div",{className:N().progressFooter,children:[(0,s.jsx)("span",{className:N().remainingTickets,children:F>0?"".concat(F," tickets disponibles"):"Todos los tickets vendidos"}),(0,s.jsxs)("span",{className:N().progressPercent,children:[Math.round(q),"%"]})]}),R&&U&&(0,s.jsxs)("div",{className:N().estimatedDate,children:[(0,s.jsx)("span",{className:N().estimatedLabel,children:"Fecha estimada del sorteo:"}),(0,s.jsx)("span",{className:N().estimatedValue,children:R.toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"})})]})]}),B.requiresDeposit&&(0,s.jsxs)("div",{className:N().depositInfo,children:[(0,s.jsx)(l.UIZ,{className:N().depositIcon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:N().depositTitle,children:"Dep\xf3sito de garant\xeda"}),(0,s.jsx)("p",{className:N().depositText,children:"Esta tienda tiene un dep\xf3sito de garant\xeda para asegurar la entrega del premio."})]})]}),b?(0,s.jsxs)("div",{className:N().userParticipation,children:[(0,s.jsx)("h3",{className:N().sectionTitle,children:"Tus participaciones"}),L?(0,s.jsx)("p",{className:N().participationText,children:"Cargando tus tickets..."}):D.length>0?(0,s.jsxs)("div",{className:N().ticketsList,children:[(0,s.jsxs)("p",{className:N().participationText,children:["Tienes ",(0,s.jsx)("strong",{children:D.length})," ticket",D.length>1?"s":""," en este sorteo:"]}),(0,s.jsx)("div",{className:N().ticketNumbers,children:D.map(e=>(0,s.jsxs)("span",{className:N().ticketNumber,children:["#",e.number]},e.id))}),(0,s.jsxs)("p",{className:N().participationDate,children:["Comprado",D.length>1?"s":""," el"," ",new Date((null===(j=D[0])||void 0===j?void 0:j.createdAt)||Date.now()).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"})]})]}):(0,s.jsx)("p",{className:N().participationText,children:"A\xfan no participas en este sorteo. \xa1Compra tickets para tener oportunidad de ganar!"})]}):(0,s.jsxs)("div",{className:N().loginPrompt,children:[(0,s.jsx)("p",{className:N().loginText,children:"Inicia sesi\xf3n o reg\xedstrate para comprar tickets y ver tus participaciones."}),(0,s.jsxs)("div",{className:N().loginButtons,children:[(0,s.jsx)(r.default,{href:"/login",children:(0,s.jsx)("button",{className:N().loginButton,children:"Iniciar sesi\xf3n"})}),(0,s.jsx)(r.default,{href:"/register",children:(0,s.jsx)("button",{className:N().registerButton,children:"Registrarse"})})]})]}),U&&!O&&(0,s.jsx)(p,{raffle:B,onPaymentCreated:()=>{b&&setTimeout(()=>{g.x.get("/api/raffle-tickets?raffleId=".concat(T)).then(e=>{P(e.data||[])})},2e3)}}),O&&(0,s.jsx)("div",{className:N().soldOutMessage,children:(0,s.jsx)("p",{children:"Este sorteo est\xe1 pausado temporalmente."})}),V&&(0,s.jsx)("div",{className:N().soldOutMessage,children:(0,s.jsx)("p",{children:"Tickets agotados. El sorteo se ejecutar\xe1 pronto."})}),M&&(0,s.jsxs)("div",{className:N().finishedMessage,children:[(0,s.jsx)("p",{children:"Este sorteo ha finalizado."}),(0,s.jsx)(r.default,{href:"/sorteos/".concat(T,"/winner"),children:(0,s.jsx)("button",{className:N().viewWinnerButton,children:"Ver ticket ganador →"})})]})]})]}),M&&B.winnerTicketId&&(0,s.jsxs)("div",{className:N().winnerSection,children:[(0,s.jsx)("h2",{className:N().winnerTitle,children:"\uD83C\uDFC6 Sorteo finalizado"}),(0,s.jsxs)("div",{className:N().winnerCard,children:[(0,s.jsxs)("div",{className:N().winnerInfo,children:[(0,s.jsx)("p",{className:N().winnerLabel,children:"El ganador ha sido seleccionado"}),(0,s.jsx)("p",{className:N().winnerDetailText,children:"El sorteo ha finalizado y el ganador ha sido notificado. Visita la p\xe1gina del ganador para ver m\xe1s detalles."})]}),(0,s.jsx)(r.default,{href:"/sorteos/".concat(T,"/winner"),children:(0,s.jsx)("button",{className:N().viewWinnerButton,children:"Ver ticket ganador →"})})]})]}),(0,s.jsx)(x.Z,{}),(0,s.jsxs)("div",{className:N().relatedSection,children:[(0,s.jsx)("h2",{className:N().relatedTitle,children:"Otros sorteos de esta tienda"}),(0,s.jsx)("p",{className:N().relatedText,children:(0,s.jsxs)(r.default,{href:"/tienda/".concat(null===(k=B.shop)||void 0===k?void 0:k.id),children:["Ver todos los sorteos de ",null===(y=B.shop)||void 0===y?void 0:y.name," →"]})})]})]})}},6312:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});var s=a(8078),i=a(7197),r=a(5161);function n(){let[e,t]=(0,s.useState)(!1),a=(0,i.t)();return(0,s.useEffect)(()=>{let e=r.Y.onAuthStateChanged(async e=>{if(e){a.setUser(e);try{let e=await r.Y.getCurrentUserToken();e&&a.setToken(e)}catch(e){console.error("Error getting token:",e)}}else a.setUser(null),a.setToken(null);t(!0)});return()=>{e()}},[]),{...a,isHydrated:e}}},3404:function(e,t,a){"use strict";a.d(t,{x:function(){return o}});var s=a(7147),i=a(9190);let r=(()=>{let e="http://localhost:3001/api";if(!e.startsWith("http://")&&!e.startsWith("https://"))return console.warn("⚠️ NEXT_PUBLIC_API_URL no tiene protocolo, usando https://"),"https://".concat(e);if(!e.endsWith("/api")){let t=e.endsWith("/")?e.slice(0,-1):e;return"".concat(t,"/api")}return e})();class n{async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,a){return this.client.post(e,t,a)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}constructor(){(0,s._)(this,"client",void 0),this.client=i.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization="Bearer ".concat(t),console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&localStorage.removeItem("token"),Promise.reject(e)})}}let o=new n},5161:function(e,t,a){"use strict";a.d(t,{Y:function(){return l}});var s=a(4304),i=a(6534),r=a(6532),n=a(6289);let o=async e=>{var t,a,s;try{let s=await (0,i.getDoc)((0,i.doc)(r.db,"users",e.uid));if(!s.exists())return{id:e.uid,name:e.displayName||(null===(a=e.email)||void 0===a?void 0:a.split("@")[0])||"Usuario",email:e.email||"",role:n.i.USER};let o=s.data();return{id:e.uid,name:o.name||e.displayName||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Usuario",email:e.email||"",role:o.role||n.i.USER}}catch(t){return console.error("Error converting Firebase user:",t),{id:e.uid,name:e.displayName||(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"Usuario",email:e.email||"",role:n.i.USER}}},l={async register(e){try{let t=(await (0,s.Xb)(r.I8,e.email,e.password)).user;e.name&&await (0,s.ck)(t,{displayName:e.name});let a=await t.getIdToken(),l={name:e.name,email:e.email,role:e.role,createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)()};if(e.role===n.i.SHOP&&e.shopName){let a={userId:t.uid,name:e.shopName,description:"",status:"pending",createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)()},s=await (0,i.ET)((0,i.collection)(r.db,"shops"),a);l.shopId=s.id,await (0,i.pl)((0,i.doc)(r.db,"users",t.uid),l)}else await (0,i.pl)((0,i.doc)(r.db,"users",t.uid),l);return{user:await o(t),token:a}}catch(t){console.error("Error registering user:",t);let e="Error al registrar usuario";throw"auth/email-already-in-use"===t.code?e="Este email ya est\xe1 registrado":"auth/invalid-email"===t.code?e="Email inv\xe1lido":"auth/weak-password"===t.code?e="La contrase\xf1a debe tener al menos 6 caracteres":"auth/operation-not-allowed"===t.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===t.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":t.message&&(e=t.message),Error(e)}},async login(e){try{let t=(await (0,s.e5)(r.I8,e.email,e.password)).user,a=await t.getIdToken();return{user:await o(t),token:a}}catch(t){console.error("Error logging in:",t);let e="Error al iniciar sesi\xf3n";throw"auth/user-not-found"===t.code?e="Usuario no encontrado":"auth/wrong-password"===t.code?e="Contrase\xf1a incorrecta":"auth/invalid-email"===t.code?e="Email inv\xe1lido":"auth/user-disabled"===t.code?e="Usuario deshabilitado":"auth/too-many-requests"===t.code?e="Demasiados intentos. Intenta m\xe1s tarde":"auth/operation-not-allowed"===t.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===t.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":t.message&&(e=t.message),Error(e)}},async logout(){try{await (0,s.w7)(r.I8)}catch(e){throw console.error("Error logging out:",e),e}},async getCurrentUser(){try{let e=r.I8.currentUser;if(!e)return null;return await o(e)}catch(e){return console.error("Error getting current user:",e),null}},async getCurrentUserToken(){try{let e=r.I8.currentUser;if(!e)return null;return await e.getIdToken()}catch(e){return console.error("Error getting token:",e),null}},onAuthStateChanged:e=>(0,s.Aj)(r.I8,async t=>{t?e(await o(t)):e(null)})}},6943:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(3404);let i={async createPayment(e){try{return(await s.x.post("/payments",e)).data}catch(e){throw console.error("Error creating payment:",e),e}},async confirmPayment(e){try{return(await s.x.post("/payments/confirm",e)).data}catch(e){throw console.error("Error confirming payment:",e),e}},async failPayment(e,t){try{return(await s.x.post("/payments/".concat(e,"/fail"),{failureReason:t})).data}catch(e){throw console.error("Error failing payment:",e),e}},async getPaymentById(e){try{return(await s.x.get("/payments/".concat(e))).data}catch(e){throw console.error("Error fetching payment:",e),e}},async getMyPayments(){try{return(await s.x.get("/payments/user/me")).data}catch(e){throw console.error("Error fetching user payments:",e),e}},async getCompletedPaymentsByRaffleId(e){try{return(await s.x.get("/payments/raffle/".concat(e))).data}catch(e){throw console.error("Error fetching raffle payments:",e),e}},async refundPayment(e){try{return(await s.x.post("/payments/".concat(e,"/refund"),{})).data}catch(e){throw console.error("Error refunding payment:",e),e}}}},7197:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var s=a(3020),i=a(4302),r=a(5161);let n=(0,s.Ue)()((0,i.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>{t?localStorage.setItem("token",t):localStorage.removeItem("token"),e({token:t})},setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),logout:async()=>{try{await r.Y.logout()}catch(e){console.error("Error logging out:",e)}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}},refreshToken:async()=>{try{let e=await r.Y.getCurrentUserToken();e&&t().setToken(e)}catch(e){console.error("Error refreshing token:",e)}}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},6289:function(e,t,a){"use strict";var s,i;a.d(t,{i:function(){return s}}),(i=s||(s={})).ADMIN="admin",i.SHOP="shop",i.USER="user"},2474:function(e){e.exports={container:"detail_container__ULKUD",backLink:"detail_backLink__NQ9wo",loadingContainer:"detail_loadingContainer__zkUnc",errorContainer:"detail_errorContainer__YN7G7",spinner:"detail_spinner__weEuB",spin:"detail_spin__yeIrc",errorIcon:"detail_errorIcon__u1Jxx",errorTitle:"detail_errorTitle__jj0vi",errorDescription:"detail_errorDescription__xojbs",backButton:"detail_backButton__245oZ",content:"detail_content__M27T9",leftColumn:"detail_leftColumn__362CK",imageContainer:"detail_imageContainer__5H5v9",image:"detail_image__5cMHf",imagePlaceholder:"detail_imagePlaceholder__3J6i1",statusBadge:"detail_statusBadge__tKHA4","status-active":"detail_status-active__dqsFd","status-sold_out":"detail_status-sold_out__zfI8i","status-finished":"detail_status-finished__mwD6p","status-paused":"detail_status-paused__Gr_IE",shopInfo:"detail_shopInfo__oBDPu",shopTitle:"detail_shopTitle__djNe_",shopCard:"detail_shopCard__TI_qP",shopLogo:"detail_shopLogo__W33_B",shopDetails:"detail_shopDetails__qTKYr",shopName:"detail_shopName__XSKp0",verifiedBadge:"detail_verifiedBadge__AAaj8",verifiedIcon:"detail_verifiedIcon__B3G9b",shopDescription:"detail_shopDescription__y4Him",viewShopButton:"detail_viewShopButton__yppoP",rightColumn:"detail_rightColumn__EevaV",productSection:"detail_productSection__e6RrF",productName:"detail_productName__Vitwc",productDescription:"detail_productDescription__fgglb",valueBox:"detail_valueBox__2LHWf",valueLabel:"detail_valueLabel__1hnls",valueAmount:"detail_valueAmount__ZcW5c",rulesSection:"detail_rulesSection___WLv8",sectionTitle:"detail_sectionTitle__NzNFV",rulesList:"detail_rulesList__pShQw",rule:"detail_rule__8YuSq",ruleIcon:"detail_ruleIcon__wR_Jc",ruleTitle:"detail_ruleTitle__qXFbx",ruleText:"detail_ruleText__LgDI1",progressSection:"detail_progressSection__Dz7o2",progressHeader:"detail_progressHeader__Tl2mB",progressLabel:"detail_progressLabel__tGIZ3",progressCount:"detail_progressCount__eChVp",progressBar:"detail_progressBar__QoIov",progressFill:"detail_progressFill__kDOOh",progressFooter:"detail_progressFooter__H4aLX",remainingTickets:"detail_remainingTickets__7g9ve",progressPercent:"detail_progressPercent__plgYQ",estimatedDate:"detail_estimatedDate__eecTb",estimatedLabel:"detail_estimatedLabel__c4FCn",estimatedValue:"detail_estimatedValue__p_HVX",depositInfo:"detail_depositInfo__cTTME",depositIcon:"detail_depositIcon__7xNM3",depositTitle:"detail_depositTitle__m6PyC",depositText:"detail_depositText__vQG_B",userParticipation:"detail_userParticipation__2fbqO",participationText:"detail_participationText__bm9LK",ticketsList:"detail_ticketsList__1h_Qg",ticketNumbers:"detail_ticketNumbers__rFCaT",ticketNumber:"detail_ticketNumber__NIQqL",participationDate:"detail_participationDate__OhJwK",loginPrompt:"detail_loginPrompt__06FvA",loginText:"detail_loginText__KyGSC",loginButtons:"detail_loginButtons__jo6yd",loginButton:"detail_loginButton__zPo6O",registerButton:"detail_registerButton__Pvffg",buyButton:"detail_buyButton__ZvoJX",soldOutMessage:"detail_soldOutMessage___W9K7",finishedMessage:"detail_finishedMessage__ps6N7",viewWinnerButton:"detail_viewWinnerButton__FFxSF",winnerSection:"detail_winnerSection__8gsd9",winnerTitle:"detail_winnerTitle__198V4",winnerCard:"detail_winnerCard___8oIa",winnerInfo:"detail_winnerInfo__ytu6q",winnerLabel:"detail_winnerLabel__3oCdX",winnerNumber:"detail_winnerNumber__AGkQa",winnerDetails:"detail_winnerDetails__i3j86",winnerDetailText:"detail_winnerDetailText__bYR2D",relatedSection:"detail_relatedSection__Gq38b",relatedTitle:"detail_relatedTitle__z9geH",relatedText:"detail_relatedText__spQ_1"}},4504:function(e){e.exports={blockContainer:"BuyTicketsBlock_blockContainer__2vhQG",title:"BuyTicketsBlock_title__xeTXq",messageBox:"BuyTicketsBlock_messageBox__Bvkmn",loginButton:"BuyTicketsBlock_loginButton__k0fgW",infoSection:"BuyTicketsBlock_infoSection__7xBhO",infoItem:"BuyTicketsBlock_infoItem__nNFXl",label:"BuyTicketsBlock_label__DLbn3",value:"BuyTicketsBlock_value__uYPnp",quantitySection:"BuyTicketsBlock_quantitySection__eAsMh",quantityControls:"BuyTicketsBlock_quantityControls__boTTh",quantityInput:"BuyTicketsBlock_quantityInput__hX66Q",quickButtons:"BuyTicketsBlock_quickButtons__xRSvK",quickButton:"BuyTicketsBlock_quickButton__VaRml",subtotalSection:"BuyTicketsBlock_subtotalSection__LLADU",subtotalRow:"BuyTicketsBlock_subtotalRow__fYzsX",subtotalValue:"BuyTicketsBlock_subtotalValue__JsJyB",errorMessage:"BuyTicketsBlock_errorMessage__LVuEk",buyButton:"BuyTicketsBlock_buyButton__fs33T",validationMessage:"BuyTicketsBlock_validationMessage__b_YTO"}}},function(e){e.O(0,[8433,2907,4183,9134,1044,2489,8641,4755,4542,6153,6609,7115,2364,1744],function(){return e(e.s=9627)}),_N_E=e.O()}]);