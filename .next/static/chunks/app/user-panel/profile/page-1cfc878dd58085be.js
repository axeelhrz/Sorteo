(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4739],{8068:function(e,a,s){Promise.resolve().then(s.bind(s,5211))},5211:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return t}});var r=s(7821),i=s(8078),n=s(6201),o=s(4944),c=s(9603),l=s.n(c);function t(){let[e,a]=(0,i.useState)("profile"),[,s]=(0,i.useState)(null),[,c]=(0,i.useState)(null),[t,d]=(0,i.useState)(null),[u,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(null),[x,f]=(0,i.useState)(null),[j,b]=(0,i.useState)({name:"",email:"",phone:"",country:"",city:""}),[v,_]=(0,i.useState)({emailNotifications:!0,emailPromotions:!1,language:"es",timezone:"America/Argentina/Buenos_Aires",privacyShowInitials:!1,privacyHideTicketList:!1}),[g,y]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,i.useEffect)(()=>{(async()=>{try{m(!0);let[e,a,r]=await Promise.all([o.m.getProfile(),o.m.getPreferences(),o.m.getSecuritySettings()]);s(e),c(a),d(r),b({name:e.name,email:e.email,phone:e.phone||"",country:e.country||"",city:e.city||""}),_(a)}catch(e){console.error("Error fetching profile data:",e),p("Error al cargar tu perfil")}finally{m(!1)}})()},[]);let N=e=>{let{name:a,value:s}=e.target;b(e=>({...e,[a]:s}))},w=async e=>{e.preventDefault();try{p(null),f(null),await o.m.updateProfile(j),f("Perfil actualizado correctamente")}catch(e){console.error("Error updating profile:",e),p("Error al actualizar el perfil")}},P=e=>{let{name:a,value:s,type:r}=e.target,i=e.target.checked;_(e=>({...e,[a]:"checkbox"===r?i:s}))},C=async e=>{e.preventDefault();try{p(null),f(null),await o.m.updatePreferences(v),f("Preferencias actualizadas correctamente")}catch(e){console.error("Error updating preferences:",e),p("Error al actualizar las preferencias")}},S=e=>{let{name:a,value:s}=e.target;y(e=>({...e,[a]:s}))},k=async e=>{if(e.preventDefault(),g.newPassword!==g.confirmPassword){p("Las contrase\xf1as no coinciden");return}try{p(null),f(null),await o.m.changePassword(g.currentPassword,g.newPassword),f("Contrase\xf1a cambiada correctamente"),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){console.error("Error changing password:",e),p("Error al cambiar la contrase\xf1a")}},B=async()=>{if(confirm("\xbfEst\xe1s seguro? Se cerrar\xe1n todas tus sesiones activas."))try{p(null),f(null),await o.m.closeAllSessions(),f("Todas las sesiones han sido cerradas")}catch(e){console.error("Error closing sessions:",e),p("Error al cerrar las sesiones")}};return u?(0,r.jsx)(n.Z,{activeSection:"profile",children:(0,r.jsx)("div",{className:l().loadingContainer,children:(0,r.jsx)("p",{children:"Cargando perfil..."})})}):(0,r.jsx)(n.Z,{activeSection:"profile",children:(0,r.jsxs)("div",{className:l().container,children:[(0,r.jsxs)("div",{className:l().header,children:[(0,r.jsx)("h1",{className:l().title,children:"\uD83D\uDC64 Mi Perfil"}),(0,r.jsx)("p",{className:l().subtitle,children:"Gestiona tu informaci\xf3n personal, preferencias y seguridad"})]}),h&&(0,r.jsx)("div",{className:l().errorBanner,children:h}),x&&(0,r.jsx)("div",{className:l().successBanner,children:x}),(0,r.jsxs)("div",{className:l().tabs,children:[(0,r.jsx)("button",{className:"".concat(l().tab," ").concat("profile"===e?l().active:""),onClick:()=>a("profile"),children:"\uD83D\uDC64 Datos Personales"}),(0,r.jsx)("button",{className:"".concat(l().tab," ").concat("preferences"===e?l().active:""),onClick:()=>a("preferences"),children:"⚙️ Preferencias"}),(0,r.jsx)("button",{className:"".concat(l().tab," ").concat("security"===e?l().active:""),onClick:()=>a("security"),children:"\uD83D\uDD12 Seguridad"})]}),(0,r.jsxs)("div",{className:l().content,children:["profile"===e&&(0,r.jsxs)("form",{onSubmit:w,className:l().form,children:[(0,r.jsx)("h2",{children:"Datos Personales"}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"name",children:"Nombre Completo *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:j.name,onChange:N,required:!0})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:j.email,onChange:N,required:!0,disabled:!0}),(0,r.jsx)("small",{children:"El email no puede ser modificado"})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"phone",children:"Tel\xe9fono"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:j.phone,onChange:N})]}),(0,r.jsxs)("div",{className:l().formRow,children:[(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"country",children:"Pa\xeds"}),(0,r.jsx)("input",{type:"text",id:"country",name:"country",value:j.country,onChange:N})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"city",children:"Ciudad"}),(0,r.jsx)("input",{type:"text",id:"city",name:"city",value:j.city,onChange:N})]})]}),(0,r.jsx)("button",{type:"submit",className:l().submitButton,children:"Guardar Cambios"})]}),"preferences"===e&&(0,r.jsxs)("form",{onSubmit:C,className:l().form,children:[(0,r.jsx)("h2",{children:"Preferencias"}),(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Notificaciones"}),(0,r.jsx)("div",{className:l().checkboxGroup,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"emailNotifications",checked:v.emailNotifications,onChange:P}),"Recibir notificaciones por email"]})}),(0,r.jsx)("div",{className:l().checkboxGroup,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"emailPromotions",checked:v.emailPromotions,onChange:P}),"Recibir emails promocionales"]})})]}),(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Configuraci\xf3n Regional"}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"language",children:"Idioma"}),(0,r.jsxs)("select",{id:"language",name:"language",value:v.language,onChange:P,children:[(0,r.jsx)("option",{value:"es",children:"Espa\xf1ol"}),(0,r.jsx)("option",{value:"en",children:"English"}),(0,r.jsx)("option",{value:"pt",children:"Portugu\xeas"})]})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"timezone",children:"Zona Horaria"}),(0,r.jsxs)("select",{id:"timezone",name:"timezone",value:v.timezone,onChange:P,children:[(0,r.jsx)("option",{value:"America/Argentina/Buenos_Aires",children:"Argentina (Buenos Aires)"}),(0,r.jsx)("option",{value:"America/Mexico_City",children:"M\xe9xico (Ciudad de M\xe9xico)"}),(0,r.jsx)("option",{value:"America/Bogota",children:"Colombia (Bogot\xe1)"}),(0,r.jsx)("option",{value:"America/Lima",children:"Per\xfa (Lima)"}),(0,r.jsx)("option",{value:"America/Santiago",children:"Chile (Santiago)"})]})]})]}),(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Privacidad"}),(0,r.jsx)("div",{className:l().checkboxGroup,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"privacyShowInitials",checked:v.privacyShowInitials,onChange:P}),"Mostrar solo mis iniciales cuando gano un sorteo"]})}),(0,r.jsx)("div",{className:l().checkboxGroup,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"privacyHideTicketList",checked:v.privacyHideTicketList,onChange:P}),"Ocultar mi lista de tickets p\xfablicamente"]})})]}),(0,r.jsx)("button",{type:"submit",className:l().submitButton,children:"Guardar Preferencias"})]}),"security"===e&&(0,r.jsxs)("div",{className:l().securitySection,children:[(0,r.jsx)("h2",{children:"Seguridad"}),(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Cambiar Contrase\xf1a"}),(0,r.jsxs)("form",{onSubmit:k,className:l().form,children:[(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"currentPassword",children:"Contrase\xf1a Actual *"}),(0,r.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",value:g.currentPassword,onChange:S,required:!0})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"newPassword",children:"Nueva Contrase\xf1a *"}),(0,r.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:g.newPassword,onChange:S,required:!0})]}),(0,r.jsxs)("div",{className:l().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmar Contrase\xf1a *"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:S,required:!0})]}),(0,r.jsx)("button",{type:"submit",className:l().submitButton,children:"Cambiar Contrase\xf1a"})]})]}),(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Sesiones Activas"}),(0,r.jsxs)("p",{children:["Sesiones activas: ",(0,r.jsx)("strong",{children:(null==t?void 0:t.activeSessions)||0})]}),(0,r.jsx)("button",{onClick:B,className:l().dangerButton,children:"Cerrar Todas las Sesiones"})]}),(null==t?void 0:t.twoFactorEnabled)&&(0,r.jsxs)("div",{className:l().section,children:[(0,r.jsx)("h3",{children:"Autenticaci\xf3n de Dos Factores"}),(0,r.jsx)("p",{className:l().enabledBadge,children:"✅ Habilitada"})]})]})]})]})})}},9603:function(e){e.exports={container:"profile_container__mS00e",header:"profile_header__L5zKP",title:"profile_title__S5bBg",subtitle:"profile_subtitle__OaNkf",loadingContainer:"profile_loadingContainer__RxfTX",errorBanner:"profile_errorBanner__69jmp",successBanner:"profile_successBanner__ComY8",tabs:"profile_tabs__ZeAlq",tab:"profile_tab__W6KM8",active:"profile_active__dSGYA",content:"profile_content__1xaEs",form:"profile_form__SZn3N",section:"profile_section__7N_F_",formGroup:"profile_formGroup__iJ57q",formRow:"profile_formRow__DjwPp",checkboxGroup:"profile_checkboxGroup__OPV_X",submitButton:"profile_submitButton__kxnfV",dangerButton:"profile_dangerButton__sy_tg",securitySection:"profile_securitySection__2ByvE",enabledBadge:"profile_enabledBadge__ZjP63"}}},function(e){e.O(0,[8797,9134,2489,4755,4542,1105,7115,2364,1744],function(){return e(e.s=8068)}),_N_E=e.O()}]);