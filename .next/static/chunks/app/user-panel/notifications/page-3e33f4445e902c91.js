(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6904],{9590:function(i,t,n){Promise.resolve().then(n.bind(n,6018))},6018:function(i,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(7821),e=n(8078),o=n(6201),c=n(4944),s=n(2518),r=n.n(s);function l(){let[i,t]=(0,e.useState)([]),[n,s]=(0,e.useState)(!0),[l,f]=(0,e.useState)(null),[_,d]=(0,e.useState)("all");(0,e.useEffect)(()=>{(async()=>{try{s(!0);let i=await c.m.getNotifications();t(i)}catch(i){console.error("Error fetching notifications:",i),f("Error al cargar las notificaciones")}finally{s(!1)}})()},[]);let m=async n=>{try{await c.m.markNotificationAsRead(n),t(i.map(i=>i.id===n?{...i,isRead:!0}:i))}catch(i){console.error("Error marking notification as read:",i)}},u=async()=>{try{await c.m.markAllNotificationsAsRead(),t(i.map(i=>({...i,isRead:!0})))}catch(i){console.error("Error marking all as read:",i)}},h=i.filter(i=>"all"===_||i.type===_),p=i.filter(i=>!i.isRead).length;return n?(0,a.jsx)(o.Z,{activeSection:"notifications",children:(0,a.jsx)("div",{className:r().loadingContainer,children:(0,a.jsx)("p",{children:"Cargando notificaciones..."})})}):(0,a.jsx)(o.Z,{activeSection:"notifications",children:(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsxs)("div",{className:r().header,children:[(0,a.jsx)("h1",{className:r().title,children:"\uD83D\uDD14 Notificaciones"}),(0,a.jsx)("p",{className:r().subtitle,children:p>0?"Tienes ".concat(p," notificaciones sin leer"):"Todas tus notificaciones est\xe1n le\xeddas"})]}),l&&(0,a.jsx)("div",{className:r().errorBanner,children:l}),(0,a.jsxs)("div",{className:r().toolbar,children:[(0,a.jsxs)("div",{className:r().filters,children:[(0,a.jsx)("button",{className:"".concat(r().filterBtn," ").concat("all"===_?r().active:""),onClick:()=>d("all"),children:"Todas"}),(0,a.jsx)("button",{className:"".concat(r().filterBtn," ").concat("raffle_won"===_?r().active:""),onClick:()=>d("raffle_won"),children:"Sorteos Ganados"}),(0,a.jsx)("button",{className:"".concat(r().filterBtn," ").concat("tickets_purchased"===_?r().active:""),onClick:()=>d("tickets_purchased"),children:"Compras"}),(0,a.jsx)("button",{className:"".concat(r().filterBtn," ").concat("complaint_response"===_?r().active:""),onClick:()=>d("complaint_response"),children:"Reclamos"})]}),p>0&&(0,a.jsx)("button",{onClick:u,className:r().markAllButton,children:"Marcar todas como le\xeddas"})]}),0===h.length?(0,a.jsxs)("div",{className:r().emptyState,children:[(0,a.jsx)("p",{className:r().emptyIcon,children:"\uD83D\uDCED"}),(0,a.jsx)("h2",{children:"No hay notificaciones"}),(0,a.jsx)("p",{children:"Aqu\xed aparecer\xe1n tus notificaciones importantes"})]}):(0,a.jsx)("div",{className:r().notificationsList,children:h.map(i=>(0,a.jsxs)("div",{className:"".concat(r().notificationItem," ").concat(i.isRead?"":r().unread),children:[(0,a.jsxs)("div",{className:r().notificationIcon,children:["raffle_won"===i.type&&"\uD83C\uDFC6","tickets_purchased"===i.type&&"\uD83C\uDFAB","raffle_finished"===i.type&&"✅","complaint_response"===i.type&&"\uD83D\uDCAC","account_change"===i.type&&"⚙️","system"===i.type&&"ℹ️"]}),(0,a.jsxs)("div",{className:r().notificationContent,children:[(0,a.jsx)("h3",{className:r().notificationTitle,children:i.title}),(0,a.jsx)("p",{className:r().notificationMessage,children:i.message}),(0,a.jsxs)("p",{className:r().notificationDate,children:[new Date(i.createdAt).toLocaleDateString()," -"," ",new Date(i.createdAt).toLocaleTimeString()]})]}),(0,a.jsxs)("div",{className:r().notificationActions,children:[!i.isRead&&(0,a.jsx)("button",{className:r().markReadBtn,onClick:()=>m(i.id),children:"Marcar como le\xedda"}),i.actionUrl&&(0,a.jsx)("a",{href:i.actionUrl,className:r().actionLink,children:"Ver →"})]})]},i.id))})]})})}},2518:function(i){i.exports={container:"notifications_container__aijrO",header:"notifications_header__VtBR9",title:"notifications_title__wesVT",subtitle:"notifications_subtitle__IgU3e",loadingContainer:"notifications_loadingContainer__qddBr",errorBanner:"notifications_errorBanner__QcTRq",toolbar:"notifications_toolbar__RNoW0",filters:"notifications_filters____D8g",filterBtn:"notifications_filterBtn__VL9Vj",active:"notifications_active__fDiKD",markAllButton:"notifications_markAllButton__uYtWZ",emptyState:"notifications_emptyState__SB2Bl",emptyIcon:"notifications_emptyIcon__nVO1K",notificationsList:"notifications_notificationsList__3Q2Vc",notificationItem:"notifications_notificationItem__gg1PS",unread:"notifications_unread__3e__4",notificationIcon:"notifications_notificationIcon__XC89N",notificationContent:"notifications_notificationContent__t_JMm",notificationTitle:"notifications_notificationTitle__kqHSn",notificationMessage:"notifications_notificationMessage__BBcIC",notificationDate:"notifications_notificationDate__00zjN",notificationActions:"notifications_notificationActions__wGStA",markReadBtn:"notifications_markReadBtn__XMOmc",actionLink:"notifications_actionLink___gzZu"}}},function(i){i.O(0,[8797,2907,4183,9134,1044,2489,8641,4755,4542,1105,7115,2364,1744],function(){return i(i.s=9590)}),_N_E=i.O()}]);