(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9641],{6877:function(e,t,a){Promise.resolve().then(a.bind(a,599))},599:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var l=a(7821),n=a(8078),r=a(7197),s=a(6289),i=a(4767),o=a(692),d=a(1850),c=a(6066),p=a(192),f=a.n(p);function _(){let{user:e,isAuthenticated:t}=(0,r.t)(),[a,p]=(0,n.useState)(null),[_,u]=(0,n.useState)(null),[h,x]=(0,n.useState)(!0),[m,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&e&&v()},[t,e]);let v=async()=>{x(!0),g(null);try{let e=await i.m.getMyShop();p(e);let t=await i.m.getShopStatistics(e.id);u(t)}catch(a){var e,t;g((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al cargar las estad\xedsticas")}finally{x(!1)}};return(0,l.jsx)(c.i,{requiredRole:s.i.SHOP,children:(0,l.jsxs)("div",{className:f().panelContainer,children:[(0,l.jsx)(d.G,{isBlocked:(null==a?void 0:a.status)==="blocked"}),(0,l.jsxs)("main",{className:f().mainContent,children:[h&&(0,l.jsx)("div",{className:f().alert,children:"Cargando estad\xedsticas..."}),m&&(0,l.jsxs)("div",{className:"".concat(f().alert," ").concat(f().alertError),children:[m,(0,l.jsx)("button",{onClick:v,className:f().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),a&&_&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.N,{shop:a}),(0,l.jsxs)("div",{className:f().raffleDetail,children:[(0,l.jsx)("h1",{className:f().raffleDetailTitle,children:"Estad\xedsticas de mi tienda"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"30px"},children:[(0,l.jsxs)("div",{className:f().statCard,children:[(0,l.jsx)("div",{className:f().statCardIcon,children:"\uD83D\uDCCA"}),(0,l.jsx)("div",{className:f().statCardValue,children:_.raffles.total}),(0,l.jsx)("div",{className:f().statCardLabel,children:"Total de Sorteos"})]}),(0,l.jsxs)("div",{className:f().statCard,children:[(0,l.jsx)("div",{className:f().statCardIcon,children:"\uD83C\uDFAB"}),(0,l.jsx)("div",{className:f().statCardValue,children:_.tickets.totalSold}),(0,l.jsx)("div",{className:f().statCardLabel,children:"Tickets Vendidos"})]}),(0,l.jsxs)("div",{className:f().statCard,children:[(0,l.jsx)("div",{className:f().statCardIcon,children:"\uD83D\uDCB0"}),(0,l.jsxs)("div",{className:f().statCardValue,children:["S/. ",_.revenue.total.toFixed(2)]}),(0,l.jsx)("div",{className:f().statCardLabel,children:"Ingresos Totales"})]}),(0,l.jsxs)("div",{className:f().statCard,children:[(0,l.jsx)("div",{className:f().statCardIcon,children:"\uD83D\uDCC8"}),(0,l.jsxs)("div",{className:f().statCardValue,children:[_.conversionRate.toFixed(1),"%"]}),(0,l.jsx)("div",{className:f().statCardLabel,children:"Tasa de Conversi\xf3n"})]})]}),(0,l.jsxs)("div",{className:f().raffleFormSection,style:{marginBottom:"30px"},children:[(0,l.jsx)("h2",{className:f().raffleFormSectionTitle,children:"Sorteos"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,l.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:_.raffles.draft}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Borradores"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:_.raffles.pendingApproval}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pendientes de Aprobaci\xf3n"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:_.raffles.active}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:_.raffles.soldOut}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Agotados"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#d1ecf1",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460"},children:_.raffles.finished}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Finalizados"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#f8d7da",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#721c24"},children:_.raffles.cancelled}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Cancelados"})]})]})]}),(0,l.jsxs)("div",{className:f().raffleFormSection,style:{marginBottom:"30px"},children:[(0,l.jsx)("h2",{className:f().raffleFormSectionTitle,children:"Tickets"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,l.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:_.tickets.totalSold}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Vendidos"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#e7f3ff",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:_.tickets.totalAvailable}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Disponibles"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:_.tickets.thisMonth}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]})]})]}),(0,l.jsxs)("div",{className:f().raffleFormSection,style:{marginBottom:"30px"},children:[(0,l.jsx)("h2",{className:f().raffleFormSectionTitle,children:"Ingresos"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,l.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,l.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:["S/. ",_.revenue.total.toFixed(2)]}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Ingresos Totales"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[(0,l.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:["S/. ",_.revenue.thisMonth.toFixed(2)]}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:_.revenue.completedPayments}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pagos Completados"})]})]})]}),(0,l.jsxs)("div",{className:f().raffleFormSection,children:[(0,l.jsx)("h2",{className:f().raffleFormSectionTitle,children:"Productos"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,l.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:_.products.total}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total de Productos"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:_.products.active}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,l.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[(0,l.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:_.products.withDeposit}),(0,l.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Con Dep\xf3sito"})]})]})]})]})]})]})]})})}},6066:function(e,t,a){"use strict";a.d(t,{i:function(){return i}});var l=a(7821),n=a(8078),r=a(8504),s=a(7197);function i(e){let{children:t,requiredRole:a}=e,i=(0,r.useRouter)(),{user:o,isAuthenticated:d}=(0,s.t)();return((0,n.useEffect)(()=>{if(!d||!o){i.push("/login");return}if(a&&o.role!==a){i.push("/");return}},[d,o,a,i]),d&&o)?a&&o.role!==a?(0,l.jsx)("div",{children:"No tienes permiso para acceder a esta p\xe1gina"}):(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)("div",{children:"Cargando..."})}},692:function(e,t,a){"use strict";a.d(t,{N:function(){return s}});var l=a(7821),n=a(192),r=a.n(n);function s(e){let{shop:t}=e;return(0,l.jsx)("div",{className:r().shopHeader,children:(0,l.jsxs)("div",{className:r().shopHeaderContent,children:[t.logo&&(0,l.jsx)("img",{src:t.logo,alt:t.name,className:r().shopLogo}),(0,l.jsxs)("div",{className:r().shopHeaderInfo,children:[(0,l.jsx)("h1",{className:r().shopName,children:t.name}),(0,l.jsx)("p",{className:r().shopDescription,children:t.description})]})]})})}},1850:function(e,t,a){"use strict";a.d(t,{G:function(){return o}});var l=a(7821),n=a(4542),r=a(8504),s=a(192),i=a.n(s);function o(e){let{isBlocked:t=!1}=e,a=(0,r.usePathname)();return(0,l.jsx)("aside",{className:i().sidebar,children:(0,l.jsxs)("nav",{className:i().sidebarNav,children:[(0,l.jsx)(n.default,{href:"/panel/tienda",className:"".concat(i().navLink," ").concat("/panel/tienda"===a?i().active:""),children:"\uD83D\uDCCB Mi tienda"}),(0,l.jsx)(n.default,{href:"/panel/productos",className:"".concat(i().navLink," ").concat("/panel/productos"===a?i().active:""),children:"\uD83D\uDCE6 Mis productos"}),(0,l.jsx)(n.default,{href:"/panel/sorteos",className:"".concat(i().navLink," ").concat("/panel/sorteos"===a?i().active:""),children:"\uD83C\uDFB2 Mis sorteos"}),!t&&(0,l.jsx)(n.default,{href:"/panel/sorteos/crear",className:"".concat(i().navLink," ").concat("/panel/sorteos/crear"===a?i().active:""),children:"âž• Crear sorteo"})]})})}},3404:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});var l=a(7147),n=a(9190);class r{async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,a){return this.client.post(e,t,a)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}constructor(){(0,l._)(this,"client",void 0),this.client=n.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization="Bearer ".concat(t),console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&localStorage.removeItem("token"),Promise.reject(e)})}}let s=new r},4767:function(e,t,a){"use strict";a.d(t,{m:function(){return n}});var l=a(3404);let n={getMyShop:async()=>(await l.x.get("/shops/my-shop/current")).data,getShopById:async e=>(await l.x.get("/shops/".concat(e))).data,updateShop:async(e,t)=>(await l.x.put("/shops/".concat(e),t)).data,getAllShops:async()=>(await l.x.get("/shops")).data,getVerifiedShops:async()=>(await l.x.get("/shops/verified")).data,getShopStatistics:async e=>(await l.x.get("/shops/".concat(e,"/statistics"))).data}},7197:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});var l=a(3020),n=a(4302);let r=(0,l.Ue)()((0,n.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>{t?localStorage.setItem("token",t):localStorage.removeItem("token"),e({token:t})},setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},6289:function(e,t,a){"use strict";var l,n;a.d(t,{i:function(){return l}}),(n=l||(l={})).ADMIN="admin",n.SHOP="shop",n.USER="user"},192:function(e){e.exports={panelContainer:"panel_panelContainer__Kt8Ty",sidebar:"panel_sidebar__KeScH",sidebarNav:"panel_sidebarNav__KjeNV",navLink:"panel_navLink__sQoV6",active:"panel_active___ehGn",mainContent:"panel_mainContent__7V2fv",shopHeader:"panel_shopHeader__iRrDp",shopHeaderContent:"panel_shopHeaderContent__wsZnH",shopLogo:"panel_shopLogo__gTusz",shopHeaderInfo:"panel_shopHeaderInfo__IKOo3",shopName:"panel_shopName__lr5MU",shopDescription:"panel_shopDescription__zNvIE",statusBadge:"panel_statusBadge__37f3q",formGroup:"panel_formGroup__0UyVN",formLabel:"panel_formLabel___zOHD",formInput:"panel_formInput__bLzwR",formTextarea:"panel_formTextarea__B2MkI",formSelect:"panel_formSelect__thum_",primaryButton:"panel_primaryButton__ArDHW",secondaryButton:"panel_secondaryButton__KSKVI",dangerButton:"panel_dangerButton__2WLFi",buttonGroup:"panel_buttonGroup__pcyfD",card:"panel_card__ttDyJ",cardHeader:"panel_cardHeader__scyyA",cardTitle:"panel_cardTitle__K6V__",cardActions:"panel_cardActions___eqre",cardAction:"panel_cardAction__xpZWN",cardActionPrimary:"panel_cardActionPrimary__t_VOi",cardActionSecondary:"panel_cardActionSecondary__gcgLm",table:"panel_table__GBWH_",tableHeader:"panel_tableHeader__TN7va",tableHeaderCell:"panel_tableHeaderCell__WZypp",tableRow:"panel_tableRow__oR22e",tableCell:"panel_tableCell__GdQvd",tableCellCenter:"panel_tableCellCenter__Gc4za",tableCellRight:"panel_tableCellRight__jl067",emptyState:"panel_emptyState__1c4lK",emptyStateIcon:"panel_emptyStateIcon__znkGr",emptyStateTitle:"panel_emptyStateTitle__OpZSI",emptyStateDescription:"panel_emptyStateDescription__P3sK_",alert:"panel_alert__dbKCy",alertSuccess:"panel_alertSuccess__T39ZR",alertError:"panel_alertError__9DFT4",alertWarning:"panel_alertWarning__sOPwe",alertInfo:"panel_alertInfo__PLXx9",progressBar:"panel_progressBar__Ik7pm",progressBarFill:"panel_progressBarFill__NCwij",profileForm:"panel_profileForm__VbWs3",profileFormSection:"panel_profileFormSection__t80bQ",profileFormSectionTitle:"panel_profileFormSectionTitle__o8RW2",readOnlyField:"panel_readOnlyField___M4rQ",raffleForm:"panel_raffleForm__s3ll7",raffleFormSection:"panel_raffleFormSection__PUcJc",raffleFormSectionTitle:"panel_raffleFormSectionTitle__1DglO",dimensionsGrid:"panel_dimensionsGrid__7jafN",dimensionInfo:"panel_dimensionInfo__bjc2e",dimensionLabel:"panel_dimensionLabel__FAjKe",dimensionValue:"panel_dimensionValue__Jm7tM",depositWarning:"panel_depositWarning__mU2qE",ticketCalculation:"panel_ticketCalculation___d694",ticketCalculationValue:"panel_ticketCalculationValue__KOcl_",raffleDetail:"panel_raffleDetail__nigCY",raffleDetailHeader:"panel_raffleDetailHeader__xcVaX",raffleDetailTitle:"panel_raffleDetailTitle___LWvI",raffleDetailStatus:"panel_raffleDetailStatus__GBSlq",raffleDetailSection:"panel_raffleDetailSection__Y6dGR",raffleDetailSectionTitle:"panel_raffleDetailSectionTitle__6HXue",raffleDetailGrid:"panel_raffleDetailGrid__U8h9R",raffleDetailItem:"panel_raffleDetailItem__frOK2",raffleDetailItemLabel:"panel_raffleDetailItemLabel__PLUUN",raffleDetailItemValue:"panel_raffleDetailItemValue__mVKfw",ticketProgress:"panel_ticketProgress__9PZKW",ticketProgressLabel:"panel_ticketProgressLabel__fBS77",ticketProgressPercentage:"panel_ticketProgressPercentage__nBOhy",statCard:"panel_statCard__Dx3Sz",statCardIcon:"panel_statCardIcon__zp227",statCardValue:"panel_statCardValue__RWvG6",statCardLabel:"panel_statCardLabel__wRjrF",formHelpText:"panel_formHelpText__IpKar",formInputError:"panel_formInputError__oPd_O"}}},function(e){e.O(0,[6438,2489,4755,4542,7115,2364,1744],function(){return e(e.s=6877)}),_N_E=e.O()}]);