(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9641],{6877:function(e,s,t){Promise.resolve().then(t.bind(t,599))},599:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var d=t(7821),i=t(8078),a=t(7197),o=t(6289),l=t(9422),r=t(692),n=t(1850),c=t(6066),x=t(192),p=t.n(x);function f(){let{user:e,isAuthenticated:s}=(0,a.t)(),[t,x]=(0,i.useState)(null),[f,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(!0),[v,m]=(0,i.useState)(null);(0,i.useEffect)(()=>{s&&e&&j()},[s,e]);let j=async()=>{g(!0),m(null);try{let e=await l.m.getMyShop();x(e);let s=await l.m.getShopStatistics(e.id);h(s)}catch(t){var e,s;m((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al cargar las estad\xedsticas")}finally{g(!1)}};return(0,d.jsx)(c.i,{requiredRole:o.i.SHOP,children:(0,d.jsxs)("div",{className:p().panelContainer,children:[(0,d.jsx)(n.G,{isBlocked:(null==t?void 0:t.status)==="blocked"}),(0,d.jsxs)("main",{className:p().mainContent,children:[u&&(0,d.jsx)("div",{className:p().alert,children:"Cargando estad\xedsticas..."}),v&&(0,d.jsxs)("div",{className:"".concat(p().alert," ").concat(p().alertError),children:[v,(0,d.jsx)("button",{onClick:j,className:p().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),t&&f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.N,{shop:t}),(0,d.jsxs)("div",{className:p().raffleDetail,children:[(0,d.jsx)("h1",{className:p().raffleDetailTitle,children:"Estad\xedsticas de mi tienda"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"30px"},children:[(0,d.jsxs)("div",{className:p().statCard,children:[(0,d.jsx)("div",{className:p().statCardIcon,children:"\uD83D\uDCCA"}),(0,d.jsx)("div",{className:p().statCardValue,children:f.raffles.total}),(0,d.jsx)("div",{className:p().statCardLabel,children:"Total de Sorteos"})]}),(0,d.jsxs)("div",{className:p().statCard,children:[(0,d.jsx)("div",{className:p().statCardIcon,children:"\uD83C\uDFAB"}),(0,d.jsx)("div",{className:p().statCardValue,children:f.tickets.totalSold}),(0,d.jsx)("div",{className:p().statCardLabel,children:"Tickets Vendidos"})]}),(0,d.jsxs)("div",{className:p().statCard,children:[(0,d.jsx)("div",{className:p().statCardIcon,children:"\uD83D\uDCB0"}),(0,d.jsxs)("div",{className:p().statCardValue,children:["S/. ",f.revenue.total.toFixed(2)]}),(0,d.jsx)("div",{className:p().statCardLabel,children:"Ingresos Totales"})]}),(0,d.jsxs)("div",{className:p().statCard,children:[(0,d.jsx)("div",{className:p().statCardIcon,children:"\uD83D\uDCC8"}),(0,d.jsxs)("div",{className:p().statCardValue,children:[f.conversionRate.toFixed(1),"%"]}),(0,d.jsx)("div",{className:p().statCardLabel,children:"Tasa de Conversi\xf3n"})]})]}),(0,d.jsxs)("div",{className:p().raffleFormSection,style:{marginBottom:"30px"},children:[(0,d.jsx)("h2",{className:p().raffleFormSectionTitle,children:"Sorteos"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,d.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:f.raffles.draft}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Borradores"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:f.raffles.pendingApproval}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pendientes de Aprobaci\xf3n"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:f.raffles.active}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:f.raffles.soldOut}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Agotados"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#d1ecf1",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460"},children:f.raffles.finished}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Finalizados"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#f8d7da",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#721c24"},children:f.raffles.cancelled}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Cancelados"})]})]})]}),(0,d.jsxs)("div",{className:p().raffleFormSection,style:{marginBottom:"30px"},children:[(0,d.jsx)("h2",{className:p().raffleFormSectionTitle,children:"Tickets"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,d.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:f.tickets.totalSold}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Vendidos"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#e7f3ff",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:f.tickets.totalAvailable}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Disponibles"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:f.tickets.thisMonth}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]})]})]}),(0,d.jsxs)("div",{className:p().raffleFormSection,style:{marginBottom:"30px"},children:[(0,d.jsx)("h2",{className:p().raffleFormSectionTitle,children:"Ingresos"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,d.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,d.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:["S/. ",f.revenue.total.toFixed(2)]}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Ingresos Totales"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[(0,d.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:["S/. ",f.revenue.thisMonth.toFixed(2)]}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:f.revenue.completedPayments}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pagos Completados"})]})]})]}),(0,d.jsxs)("div",{className:p().raffleFormSection,children:[(0,d.jsx)("h2",{className:p().raffleFormSectionTitle,children:"Productos"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,d.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:f.products.total}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total de Productos"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:f.products.active}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,d.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[(0,d.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:f.products.withDeposit}),(0,d.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Con Dep\xf3sito"})]})]})]})]})]})]})]})})}},9422:function(e,s,t){"use strict";t.d(s,{m:function(){return c}});var d=t(3404),i=t(6534),a=t(6532),o=t(9283);let l=e=>(null==e?void 0:e.toDate)?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,r=e=>{let s=e.data();return{id:e.id,userId:s.userId||"",name:s.name||"",description:s.description,logo:s.logo,publicEmail:s.publicEmail,phone:s.phone,socialMedia:s.socialMedia,status:s.status||o.R.PENDING,createdAt:l(s.createdAt),updatedAt:l(s.updatedAt)}},n={async getShopById(e){try{let s=await (0,i.getDoc)((0,i.doc)(a.db,"shops",e));if(!s.exists())throw Error("Shop not found");return r(s)}catch(e){throw console.error("Error fetching shop:",e),e}},async getVerifiedShops(){try{let e=(0,i.collection)(a.db,"shops"),s=(0,i.query)(e,(0,i.where)("status","==",o.R.VERIFIED));return(await (0,i.getDocs)(s)).docs.map(e=>r(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching verified shops:",e),e}},async getAllShops(){try{let e=(0,i.collection)(a.db,"shops");return(await (0,i.getDocs)(e)).docs.map(e=>r(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching all shops:",e),e}}},c={getShopById:async e=>n.getShopById(e),getAllShops:async()=>n.getAllShops(),getVerifiedShops:async()=>n.getVerifiedShops(),getMyShop:async()=>(await d.x.get("/shops/my-shop/current")).data,updateShop:async(e,s)=>(await d.x.put("/shops/".concat(e),s)).data,getShopStatistics:async e=>(await d.x.get("/shops/".concat(e,"/statistics"))).data}},9283:function(e,s,t){"use strict";var d,i;t.d(s,{R:function(){return d}}),(i=d||(d={})).PENDING="pending",i.VERIFIED="verified",i.BLOCKED="blocked"}},function(e){e.O(0,[6438,2907,4183,1044,2489,8641,4755,4542,4446,7115,2364,1744],function(){return e(e.s=6877)}),_N_E=e.O()}]);