(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{5002:function(e,t,s){Promise.resolve().then(s.bind(s,9316))},9730:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var o=s(7821),a=s(8149),r=s(4542),l={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},n=s(3616),i=s.n(n);function c(e){let{size:t="medium",showText:s=!0,className:n="",href:c="/"}=e,m=(0,o.jsxs)("div",{className:"".concat(i().logo," ").concat(i()[t]," ").concat(n),children:[(0,o.jsx)(a.default,{src:l,alt:"TIKETEA ONLINE",width:"small"===t?40:"medium"===t?60:80,height:"small"===t?40:"medium"===t?60:80,className:i().logoImage,priority:!0}),s&&(0,o.jsx)("span",{className:i().logoText,children:"TIKETEA ONLINE"})]});return c?(0,o.jsx)(r.default,{href:c,className:i().logoLink,children:m}):m}},9316:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var o=s(7821),a=s(8078),r=s(4542),l=s(8504),n=s(7851),i=s(3404),c=s(7197),m=s(9730),u=s(5171),d=s.n(u);function h(){let e=(0,l.useRouter)(),{setUser:t,setToken:s}=(0,c.t)(),[u,h]=(0,a.useState)({name:"",email:"",password:"",role:"user",shopName:""}),[g,p]=(0,a.useState)(""),[_,f]=(0,a.useState)(!1),N=e=>{let{name:t,value:s}=e.target;h(e=>({...e,[t]:s}))},x=async o=>{if(o.preventDefault(),p(""),"shop"===u.role&&!u.shopName.trim()){p("El nombre de la tienda es requerido");return}f(!0);try{let o={name:u.name,email:u.email,password:u.password,role:u.role};"shop"===u.role&&u.shopName&&(o.shopName=u.shopName.trim());let{token:a,id:r,name:l,email:n,role:c}=(await i.x.register(o)).data;s(a),t({id:r,name:l,email:n,role:c}),setTimeout(()=>{e.push("/dashboard")},100)}catch(e){var a,r;p((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Error al registrarse")}finally{f(!1)}};return(0,o.jsx)("div",{className:d().container,children:(0,o.jsxs)("div",{className:d().formCard,children:[(0,o.jsx)(m.Z,{size:"medium",className:d().logo}),(0,o.jsx)("h2",{className:d().title,children:"Crear Cuenta"}),(0,o.jsx)("p",{className:d().subtitle,children:"\xdanete a nuestra plataforma y comienza a participar"}),g&&(0,o.jsx)("div",{className:d().errorMessage,children:g}),(0,o.jsxs)("form",{onSubmit:x,className:d().form,children:[(0,o.jsxs)("div",{className:d().formGroup,children:[(0,o.jsxs)("label",{htmlFor:"name",className:d().label,children:[(0,o.jsx)(n.fzv,{className:d().labelIcon}),"Nombre"]}),(0,o.jsx)("input",{type:"text",id:"name",name:"name",value:u.name,onChange:N,required:!0,minLength:3,className:d().input,placeholder:"Tu nombre completo"})]}),(0,o.jsxs)("div",{className:d().formGroup,children:[(0,o.jsxs)("label",{htmlFor:"email",className:d().label,children:[(0,o.jsx)(n.Imn,{className:d().labelIcon}),"Email"]}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:N,required:!0,className:d().input,placeholder:"tu@email.com"})]}),(0,o.jsxs)("div",{className:d().formGroup,children:[(0,o.jsxs)("label",{htmlFor:"password",className:d().label,children:[(0,o.jsx)(n.UIZ,{className:d().labelIcon}),"Contrase\xf1a"]}),(0,o.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:N,required:!0,minLength:8,className:d().input,placeholder:"M\xednimo 8 caracteres"})]}),(0,o.jsxs)("div",{className:d().formGroup,children:[(0,o.jsx)("label",{htmlFor:"role",className:d().label,children:"Tipo de cuenta"}),(0,o.jsxs)("select",{id:"role",name:"role",value:u.role,onChange:N,className:d().select,children:[(0,o.jsx)("option",{value:"user",children:"Usuario"}),(0,o.jsx)("option",{value:"shop",children:"Tienda"})]})]}),"shop"===u.role&&(0,o.jsxs)("div",{className:d().formGroup,children:[(0,o.jsxs)("label",{htmlFor:"shopName",className:d().label,children:[(0,o.jsx)(n.x8h,{className:d().labelIcon}),"Nombre de la Tienda"]}),(0,o.jsx)("input",{type:"text",id:"shopName",name:"shopName",value:u.shopName,onChange:N,required:!0,minLength:3,className:d().input,placeholder:"Ej: Mi Tienda de Sorteos"}),(0,o.jsx)("small",{className:d().helpText,children:"Este ser\xe1 el nombre de tu tienda en la plataforma"})]}),(0,o.jsx)("button",{type:"submit",disabled:_,className:d().submitButton,children:_?"Registrando...":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.zy7,{className:d().buttonIcon}),"Crear Cuenta"]})})]}),(0,o.jsx)("div",{className:d().footer,children:(0,o.jsxs)("p",{className:d().footerText,children:["\xbfYa tienes una cuenta?"," ",(0,o.jsx)(r.default,{href:"/login",className:d().footerLink,children:"Inicia sesi\xf3n aqu\xed"})]})})]})})}},3404:function(e,t,s){"use strict";s.d(t,{x:function(){return l}});var o=s(7147),a=s(9190);class r{async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,s){return this.client.post(e,t,s)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}constructor(){(0,o._)(this,"client",void 0),this.client=a.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization="Bearer ".concat(t),console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&localStorage.removeItem("token"),Promise.reject(e)})}}let l=new r},7197:function(e,t,s){"use strict";s.d(t,{t:function(){return r}});var o=s(3020),a=s(4302);let r=(0,o.Ue)()((0,a.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>{t?localStorage.setItem("token",t):localStorage.removeItem("token"),e({token:t})},setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},3616:function(e){e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},5171:function(e){e.exports={container:"RegisterForm_container__PXItq",logo:"RegisterForm_logo__Oe7l8",formCard:"RegisterForm_formCard__85zJy",title:"RegisterForm_title__5_yhQ",subtitle:"RegisterForm_subtitle__ferAR",form:"RegisterForm_form__uphLJ",formGroup:"RegisterForm_formGroup__lN_hv",label:"RegisterForm_label__pcttj",labelIcon:"RegisterForm_labelIcon__KEcvy",input:"RegisterForm_input___RUoH",select:"RegisterForm_select__RUIMH",helpText:"RegisterForm_helpText__V7TVV",submitButton:"RegisterForm_submitButton__ao_5X",buttonIcon:"RegisterForm_buttonIcon__cMnsi",errorMessage:"RegisterForm_errorMessage__Uoa9H",footer:"RegisterForm_footer__24861",footerText:"RegisterForm_footerText__zg9YR",footerLink:"RegisterForm_footerLink__AuLU5"}}},function(e){e.O(0,[9286,9134,2489,4755,4542,6153,7115,2364,1744],function(){return e(e.s=5002)}),_N_E=e.O()}]);