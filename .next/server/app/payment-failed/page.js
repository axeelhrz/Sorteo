(()=>{var e={};e.id=2524,e.ids=[2524],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},75550:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(33362),r(22399),r(12874);var a=r(27105),s=r(15265),n=r(90157),o=r.n(n),i=r(44665),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["payment-failed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33362)),"/Users/axelhernandez/Sorteos/frontend/src/app/payment-failed/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22399)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/payment-failed/page.tsx"],u="/payment-failed/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/payment-failed/page",pathname:"/payment-failed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7236:()=>{},89847:(e,t,r)=>{Promise.resolve().then(r.bind(r,80004))},4104:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,33817,23)),Promise.resolve().then(r.t.bind(r,19323,23)),Promise.resolve().then(r.t.bind(r,52204,23)),Promise.resolve().then(r.t.bind(r,60820,23)),Promise.resolve().then(r.t.bind(r,55915,23)),Promise.resolve().then(r.t.bind(r,81611,23))},80004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,dynamic:()=>l});var a=r(19899),s=r(5507),n=r(76153);r(33745);var o=r(64015),i=r.n(o);let l="force-dynamic";function c(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)();e.get("paymentId");let[r,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null);return l?a.jsx("div",{className:i().container,children:a.jsx("div",{className:i().loadingSpinner,children:"Cargando..."})}):d||!r?a.jsx("div",{className:i().container,children:(0,a.jsxs)("div",{className:i().errorBox,children:[a.jsx("h1",{children:"Error"}),a.jsx("p",{children:d||"No se pudo cargar el pago"}),a.jsx("button",{onClick:()=>t.push("/sorteos"),children:"Volver a TIKETEA ONLINE"})]})}):a.jsx("div",{className:i().container,children:(0,a.jsxs)("div",{className:i().failedCard,children:[a.jsx("div",{className:i().failedIcon,children:"âœ•"}),a.jsx("h1",{className:i().title,children:"Pago rechazado"}),a.jsx("p",{className:i().subtitle,children:"Tu pago no pudo ser procesado"}),r.failureReason&&a.jsx("div",{className:i().reasonBox,children:(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Raz\xf3n:"})," ",r.failureReason]})}),(0,a.jsxs)("div",{className:i().summarySection,children:[a.jsx("h2",{children:"Detalles de tu intento de compra"}),(0,a.jsxs)("div",{className:i().summaryItem,children:[a.jsx("span",{children:"Cantidad de tickets:"}),a.jsx("span",{className:i().value,children:r.ticketQuantity})]}),(0,a.jsxs)("div",{className:i().summaryItem,children:[a.jsx("span",{children:"Monto:"}),(0,a.jsxs)("span",{className:i().value,children:["S/. ",Number(r.amount).toFixed(2)]})]}),(0,a.jsxs)("div",{className:i().summaryItem,children:[a.jsx("span",{children:"Fecha del intento:"}),a.jsx("span",{className:i().value,children:new Date(r.createdAt).toLocaleDateString("es-PE")})]})]}),a.jsx("div",{className:i().infoBox,children:a.jsx("p",{children:"Tu cantidad de tickets seleccionados se ha mantenido. Puedes intentar de nuevo con otro m\xe9todo de pago."})}),(0,a.jsxs)("div",{className:i().actions,children:[a.jsx("button",{className:i().primaryButton,onClick:()=>{r&&t.push(`/checkout?paymentId=${r.id}`)},children:"Intentar de nuevo"}),a.jsx("button",{className:i().secondaryButton,onClick:()=>t.push("/sorteos"),children:"Volver a TIKETEA ONLINE"})]})]})})}function d(){return a.jsx(s.Suspense,{fallback:a.jsx("div",{className:i().container,children:a.jsx("div",{className:i().loadingSpinner,children:"Cargando..."})}),children:a.jsx(c,{})})}},10752:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var a=r(20751);class s{client;constructor(){this.client=a.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let t=localStorage.getItem("token");console.log("API Request - Token from localStorage:",t),t?(e.headers.Authorization=`Bearer ${t}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,t){return this.client.get(e,t)}async post(e,t,r){return this.client.post(e,t,r)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}}let n=new s},33745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10752);let s={async createPayment(e){try{return(await a.x.post("/payments",e)).data}catch(e){throw console.error("Error creating payment:",e),e}},async confirmPayment(e){try{return(await a.x.post("/payments/confirm",e)).data}catch(e){throw console.error("Error confirming payment:",e),e}},async failPayment(e,t){try{return(await a.x.post(`/payments/${e}/fail`,{failureReason:t})).data}catch(e){throw console.error("Error failing payment:",e),e}},async getPaymentById(e){try{return(await a.x.get(`/payments/${e}`)).data}catch(e){throw console.error("Error fetching payment:",e),e}},async getMyPayments(){try{return(await a.x.get("/payments/user/me")).data}catch(e){throw console.error("Error fetching user payments:",e),e}},async getCompletedPaymentsByRaffleId(e){try{return(await a.x.get(`/payments/raffle/${e}`)).data}catch(e){throw console.error("Error fetching raffle payments:",e),e}},async refundPayment(e){try{return(await a.x.post(`/payments/${e}/refund`,{})).data}catch(e){throw console.error("Error refunding payment:",e),e}}}},76153:(e,t,r)=>{"use strict";var a=r(81545);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},64015:e=>{e.exports={container:"payment-failed_container__m_LWd",failedCard:"payment-failed_failedCard___fm_W",failedIcon:"payment-failed_failedIcon__2pde_",title:"payment-failed_title__S_E5Q",subtitle:"payment-failed_subtitle__qZbFD",reasonBox:"payment-failed_reasonBox__PXjtg",summarySection:"payment-failed_summarySection__RSxnn",summaryItem:"payment-failed_summaryItem__o_zHD",value:"payment-failed_value__9jONL",infoBox:"payment-failed_infoBox__P_IpM",actions:"payment-failed_actions__OVMXh",primaryButton:"payment-failed_primaryButton__lqKW7",secondaryButton:"payment-failed_secondaryButton__z50Od",loadingSpinner:"payment-failed_loadingSpinner__4ERQB",errorBox:"payment-failed_errorBox__Pg890"}},22399:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});var a=r(35023);r(91641);let s={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function n({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:e})})}},33362:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,dynamic:()=>s});var a=r(2772);let s=(0,a.createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/payment-failed/page.tsx#dynamic`),n=(0,a.createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/payment-failed/page.tsx#default`)},91641:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,751],()=>r(75550));module.exports=a})();