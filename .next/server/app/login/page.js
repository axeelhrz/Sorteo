(()=>{var e={};e.id=2626,e.ids=[2626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},2636:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>g,tree:()=>u}),t(93507),t(24198),t(12874);var a=t(27105),o=t(15265),s=t(90157),i=t.n(s),n=t(44665),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let u=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93507)),"/Users/axelhernandez/Sorteos/frontend/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/login/page.tsx"],c="/login/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},57800:(e,r,t)=>{Promise.resolve().then(t.bind(t,81364))},52524:(e,r,t)=>{Promise.resolve().then(t.bind(t,27649))},4104:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},27649:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var a=t(19899),o=t(5507),s=t(54175),i=t(76153),n=t(55562),l=t(16012),u=t(38442),d=t(43993),c=t(61148),m=t.n(c);function g(){let e=(0,i.useRouter)(),{setUser:r,setToken:t}=(0,u.t)(),[c,g]=(0,o.useState)({email:"",password:""}),[p,h]=(0,o.useState)(""),[x,_]=(0,o.useState)(!1),f=e=>{let{name:r,value:t}=e.target;g(e=>({...e,[r]:t}))},b=async a=>{a.preventDefault(),h(""),_(!0);try{let{user:a,token:o}=await l.Y.login(c);t(o),r(a),setTimeout(()=>{e.push("/dashboard")},100)}catch(e){h(e.message||"Credenciales inv\xe1lidas")}finally{_(!1)}};return a.jsx("div",{className:m().container,children:(0,a.jsxs)("div",{className:m().formCard,children:[a.jsx(d.Z,{size:"medium",className:m().logo}),a.jsx("h2",{className:m().title,children:"Iniciar Sesi\xf3n"}),a.jsx("p",{className:m().subtitle,children:"Accede a tu cuenta para continuar"}),p&&a.jsx("div",{className:m().errorMessage,children:p}),(0,a.jsxs)("form",{onSubmit:b,className:m().form,children:[(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"email",className:m().label,children:[a.jsx(n.Imn,{className:m().labelIcon}),"Email"]}),a.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:f,required:!0,className:m().input,placeholder:"tu@email.com"})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"password",className:m().label,children:[a.jsx(n.UIZ,{className:m().labelIcon}),"Contrase\xf1a"]}),a.jsx("input",{type:"password",id:"password",name:"password",value:c.password,onChange:f,required:!0,className:m().input,placeholder:"••••••••"})]}),a.jsx("button",{type:"submit",disabled:x,className:m().submitButton,children:x?"Iniciando sesi\xf3n...":(0,a.jsxs)(a.Fragment,{children:[a.jsx(n._fJ,{className:m().buttonIcon}),"Iniciar Sesi\xf3n"]})})]}),a.jsx("div",{className:m().footer,children:(0,a.jsxs)("p",{className:m().footerText,children:["\xbfNo tienes una cuenta?"," ",a.jsx(s.default,{href:"/register",className:m().footerLink,children:"Reg\xedstrate aqu\xed"})]})})]})})}},43993:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var a=t(19899),o=t(18154),s=t(54175);let i={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var n=t(11648),l=t.n(n);function u({size:e="medium",showText:r=!0,className:t="",href:n="/"}){let u=(0,a.jsxs)("div",{className:`${l().logo} ${l()[e]} ${t}`,children:[a.jsx(o.default,{src:i,alt:"TIKETEA ONLINE",width:"small"===e?40:"medium"===e?60:80,height:"small"===e?40:"medium"===e?60:80,className:l().logoImage,priority:!0}),r&&a.jsx("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return n?a.jsx(s.default,{href:n,className:l().logoLink,children:u}):u}},81364:(e,r,t)=>{"use strict";function a(){return null}t.d(r,{default:()=>a}),t(5507),t(82986),t(26379)},26379:(e,r,t)=>{"use strict";let a;t.d(r,{I8:()=>u,db:()=>l});var o=t(3827),s=t(82986),i=t(31027),n=t(80549);a=0===(0,o.C6)().length?(0,o.ZF)({apiKey:"AIzaSyCROuDbFChzWrRSXQ42lih56oLEA1hjne4",authDomain:"sorteo-b8fb0.firebaseapp.com",projectId:"sorteo-b8fb0",storageBucket:"sorteo-b8fb0.firebasestorage.app",messagingSenderId:"58395659334",appId:"1:58395659334:web:58c8f46dab380710eb4e47"}):(0,o.C6)()[0];let l=(0,s.ad)(a);(0,i.cF)(a);let u=(0,n.v0)(a)},16012:(e,r,t)=>{"use strict";t.d(r,{Y:()=>l});var a=t(80549),o=t(82986),s=t(26379),i=t(1260);let n=async e=>{try{let r=await (0,o.getDoc)((0,o.doc)(s.db,"users",e.uid));if(!r.exists())return{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER};let t=r.data();return{id:e.uid,name:t.name||e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:t.role||i.i.USER}}catch(r){return console.error("Error converting Firebase user:",r),{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER}}},l={async register(e){try{let r=(await (0,a.Xb)(s.I8,e.email,e.password)).user;e.name&&await (0,a.ck)(r,{displayName:e.name});let t=await r.getIdToken(),l={name:e.name,email:e.email,role:e.role,createdAt:(0,o.serverTimestamp)(),updatedAt:(0,o.serverTimestamp)()};if(e.role===i.i.SHOP&&e.shopName){let t={userId:r.uid,name:e.shopName,description:"",status:"pending",createdAt:(0,o.serverTimestamp)(),updatedAt:(0,o.serverTimestamp)()},a=await (0,o.ET)((0,o.collection)(s.db,"shops"),t);l.shopId=a.id,await (0,o.pl)((0,o.doc)(s.db,"users",r.uid),l)}else await (0,o.pl)((0,o.doc)(s.db,"users",r.uid),l);return{user:await n(r),token:t}}catch(r){console.error("Error registering user:",r);let e="Error al registrar usuario";throw"auth/email-already-in-use"===r.code?e="Este email ya est\xe1 registrado":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/weak-password"===r.code?e="La contrase\xf1a debe tener al menos 6 caracteres":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async login(e){try{let r=(await (0,a.e5)(s.I8,e.email,e.password)).user,t=await r.getIdToken();return{user:await n(r),token:t}}catch(r){console.error("Error logging in:",r);let e="Error al iniciar sesi\xf3n";throw"auth/user-not-found"===r.code?e="Usuario no encontrado":"auth/wrong-password"===r.code?e="Contrase\xf1a incorrecta":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/user-disabled"===r.code?e="Usuario deshabilitado":"auth/too-many-requests"===r.code?e="Demasiados intentos. Intenta m\xe1s tarde":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async logout(){try{await (0,a.w7)(s.I8)}catch(e){throw console.error("Error logging out:",e),e}},async getCurrentUser(){try{let e=s.I8.currentUser;if(!e)return null;return await n(e)}catch(e){return console.error("Error getting current user:",e),null}},async getCurrentUserToken(){try{let e=s.I8.currentUser;if(!e)return null;return await e.getIdToken()}catch(e){return console.error("Error getting token:",e),null}},onAuthStateChanged:e=>(0,a.Aj)(s.I8,async r=>{r?e(await n(r)):e(null)})}},38442:(e,r,t)=>{"use strict";t.d(r,{t:()=>i});var a=t(24978),o=t(31460),s=t(16012);let i=(0,a.Ue)()((0,o.tJ)((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:r=>e({user:r,isAuthenticated:!!r}),setToken:r=>{r?localStorage.setItem("token",r):localStorage.removeItem("token"),e({token:r})},setIsLoading:r=>e({isLoading:r}),setError:r=>e({error:r}),logout:async()=>{try{await s.Y.logout()}catch(e){console.error("Error logging out:",e)}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}},refreshToken:async()=>{try{let e=await s.Y.getCurrentUserToken();e&&r().setToken(e)}catch(e){console.error("Error refreshing token:",e)}}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},1260:(e,r,t)=>{"use strict";var a;t.d(r,{i:()=>a}),function(e){e.ADMIN="admin",e.SHOP="shop",e.USER="user"}(a||(a={}))},76153:(e,r,t)=>{"use strict";var a=t(81545);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},61148:e=>{e.exports={container:"LoginForm_container__AKO7c",logo:"LoginForm_logo__RVlkg",formCard:"LoginForm_formCard__hhe9G",title:"LoginForm_title__fcaaz",subtitle:"LoginForm_subtitle__hAWHa",form:"LoginForm_form__576t0",formGroup:"LoginForm_formGroup__ydMA6",label:"LoginForm_label__JxNP_",labelIcon:"LoginForm_labelIcon__AuVOK",input:"LoginForm_input__ZtjDD",submitButton:"LoginForm_submitButton__rUG7w",buttonIcon:"LoginForm_buttonIcon__QYcE8",errorMessage:"LoginForm_errorMessage__UL3qF",footer:"LoginForm_footer__aprEN",footerText:"LoginForm_footerText__IXxLw",footerLink:"LoginForm_footerLink__SqT2g"}},11648:e=>{e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},24198:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>s});var a=t(35023);t(91641);let o=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/MakeAdminScript.tsx#default`),s={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return a.jsx("html",{lang:"es",children:(0,a.jsxs)("body",{children:[e,a.jsx(o,{})]})})}},93507:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(35023);let o=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/LoginForm.tsx#default`);function s(){return a.jsx(o,{})}},91641:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[3591,3352,4175,5562,8154],()=>t(2636));module.exports=a})();