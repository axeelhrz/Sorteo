(()=>{var e={};e.id=9641,e.ids=[9641],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},91678:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>n}),t(34705),t(24198),t(12874);var r=t(27105),i=t(15265),a=t(90157),d=t.n(a),o=t(44665),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let n=["",{children:["panel",{children:["estadisticas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34705)),"/Users/axelhernandez/Sorteos/frontend/src/app/panel/estadisticas/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/panel/estadisticas/page.tsx"],p="/panel/estadisticas/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/panel/estadisticas/page",pathname:"/panel/estadisticas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},36072:(e,s,t)=>{Promise.resolve().then(t.bind(t,96798))},96798:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(19899),i=t(5507),a=t(38442),d=t(1260),o=t(28848),l=t(26028),n=t(84499),c=t(2345),p=t(10195),x=t.n(p);function h(){let{user:e,isAuthenticated:s}=(0,a.t)(),[t,p]=(0,i.useState)(null),[h,u]=(0,i.useState)(null),[f,g]=(0,i.useState)(!0),[m,v]=(0,i.useState)(null),y=async()=>{g(!0),v(null);try{let e=await o.m.getMyShop();p(e);let s=await o.m.getShopStatistics(e.id);u(s)}catch(e){v(e.response?.data?.message||"Error al cargar las estad\xedsticas")}finally{g(!1)}};return r.jsx(c.i,{requiredRole:d.i.SHOP,children:(0,r.jsxs)("div",{className:x().panelContainer,children:[r.jsx(n.G,{isBlocked:t?.status==="blocked"}),(0,r.jsxs)("main",{className:x().mainContent,children:[f&&r.jsx("div",{className:x().alert,children:"Cargando estad\xedsticas..."}),m&&(0,r.jsxs)("div",{className:`${x().alert} ${x().alertError}`,children:[m,r.jsx("button",{onClick:y,className:x().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),t&&h&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.N,{shop:t}),(0,r.jsxs)("div",{className:x().raffleDetail,children:[r.jsx("h1",{className:x().raffleDetailTitle,children:"Estad\xedsticas de mi tienda"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"30px"},children:[(0,r.jsxs)("div",{className:x().statCard,children:[r.jsx("div",{className:x().statCardIcon,children:"\uD83D\uDCCA"}),r.jsx("div",{className:x().statCardValue,children:h.raffles.total}),r.jsx("div",{className:x().statCardLabel,children:"Total de Sorteos"})]}),(0,r.jsxs)("div",{className:x().statCard,children:[r.jsx("div",{className:x().statCardIcon,children:"\uD83C\uDFAB"}),r.jsx("div",{className:x().statCardValue,children:h.tickets.totalSold}),r.jsx("div",{className:x().statCardLabel,children:"Tickets Vendidos"})]}),(0,r.jsxs)("div",{className:x().statCard,children:[r.jsx("div",{className:x().statCardIcon,children:"\uD83D\uDCB0"}),(0,r.jsxs)("div",{className:x().statCardValue,children:["S/. ",h.revenue.total.toFixed(2)]}),r.jsx("div",{className:x().statCardLabel,children:"Ingresos Totales"})]}),(0,r.jsxs)("div",{className:x().statCard,children:[r.jsx("div",{className:x().statCardIcon,children:"\uD83D\uDCC8"}),(0,r.jsxs)("div",{className:x().statCardValue,children:[h.conversionRate.toFixed(1),"%"]}),r.jsx("div",{className:x().statCardLabel,children:"Tasa de Conversi\xf3n"})]})]}),(0,r.jsxs)("div",{className:x().raffleFormSection,style:{marginBottom:"30px"},children:[r.jsx("h2",{className:x().raffleFormSectionTitle,children:"Sorteos"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,r.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:h.raffles.draft}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Borradores"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:h.raffles.pendingApproval}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pendientes de Aprobaci\xf3n"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:h.raffles.active}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:h.raffles.soldOut}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Agotados"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#d1ecf1",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460"},children:h.raffles.finished}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Finalizados"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#f8d7da",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#721c24"},children:h.raffles.cancelled}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Cancelados"})]})]})]}),(0,r.jsxs)("div",{className:x().raffleFormSection,style:{marginBottom:"30px"},children:[r.jsx("h2",{className:x().raffleFormSectionTitle,children:"Tickets"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,r.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:h.tickets.totalSold}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Vendidos"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#e7f3ff",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:h.tickets.totalAvailable}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total Disponibles"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:h.tickets.thisMonth}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]})]})]}),(0,r.jsxs)("div",{className:x().raffleFormSection,style:{marginBottom:"30px"},children:[r.jsx("h2",{className:x().raffleFormSectionTitle,children:"Ingresos"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,r.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[(0,r.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:["S/. ",h.revenue.total.toFixed(2)]}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Ingresos Totales"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#cce5ff",borderRadius:"8px"},children:[(0,r.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#004085"},children:["S/. ",h.revenue.thisMonth.toFixed(2)]}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Este Mes"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:h.revenue.completedPayments}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Pagos Completados"})]})]})]}),(0,r.jsxs)("div",{className:x().raffleFormSection,children:[r.jsx("h2",{className:x().raffleFormSectionTitle,children:"Productos"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,r.jsxs)("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},children:h.products.total}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Total de Productos"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#d4edda",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:h.products.active}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Activos"})]}),(0,r.jsxs)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"8px"},children:[r.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#856404"},children:h.products.withDeposit}),r.jsx("div",{style:{color:"#7f8c8d",fontSize:"14px"},children:"Con Dep\xf3sito"})]})]})]})]})]})]})]})})}},28848:(e,s,t)=>{"use strict";t.d(s,{m:()=>c});var r=t(10752),i=t(82986),a=t(26379),d=t(12576);let o=e=>e?.toDate?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,l=e=>{let s=e.data();return{id:e.id,userId:s.userId||"",name:s.name||"",description:s.description,logo:s.logo,publicEmail:s.publicEmail,phone:s.phone,socialMedia:s.socialMedia,status:s.status||d.R.PENDING,createdAt:o(s.createdAt),updatedAt:o(s.updatedAt)}},n={async getShopById(e){try{let s=await (0,i.getDoc)((0,i.doc)(a.db,"shops",e));if(!s.exists())throw Error("Shop not found");return l(s)}catch(e){throw console.error("Error fetching shop:",e),e}},async getVerifiedShops(){try{let e=(0,i.collection)(a.db,"shops"),s=(0,i.query)(e,(0,i.where)("status","==",d.R.VERIFIED));return(await (0,i.getDocs)(s)).docs.map(e=>l(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching verified shops:",e),e}},async getAllShops(){try{let e=(0,i.collection)(a.db,"shops");return(await (0,i.getDocs)(e)).docs.map(e=>l(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching all shops:",e),e}}},c={getShopById:async e=>n.getShopById(e),getAllShops:async()=>n.getAllShops(),getVerifiedShops:async()=>n.getVerifiedShops(),getMyShop:async()=>(await r.x.get("/shops/my-shop/current")).data,updateShop:async(e,s)=>(await r.x.put(`/shops/${e}`,s)).data,getShopStatistics:async e=>(await r.x.get(`/shops/${e}/statistics`)).data}},12576:(e,s,t)=>{"use strict";var r;t.d(s,{R:()=>r}),function(e){e.PENDING="pending",e.VERIFIED="verified",e.BLOCKED="blocked"}(r||(r={}))},34705:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/panel/estadisticas/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[3591,8559,3352,4175,9388],()=>t(91678));module.exports=r})();