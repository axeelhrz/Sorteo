(()=>{var e={};e.id=4624,e.ids=[4624],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},21776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>h,tree:()=>n}),r(81182),r(24198),r(12874);var s=r(27105),a=r(15265),o=r(90157),i=r.n(o),c=r(44665),d={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>c[e]);r.d(t,d);let n=["",{children:["panel",{children:["productos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,81182)),"/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/page.tsx"],p="/panel/productos/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/panel/productos/page",pathname:"/panel/productos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},66852:(e,t,r)=>{Promise.resolve().then(r.bind(r,99569))},99569:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(19899),a=r(5507),o=r(38442),i=r(1260),c=r(28848),d=r(79114),n=r(26028),l=r(84499),p=r(87963),u=r(2345),h=r(10195),m=r.n(h);function g(){let{user:e,isAuthenticated:t}=(0,o.t)(),[r,h]=(0,a.useState)(null),[g,x]=(0,a.useState)([]),[y,v]=(0,a.useState)(!0),[w,f]=(0,a.useState)(null),b=async()=>{v(!0),f(null);try{let e=await c.m.getMyShop();h(e);let t=await d._.getProductsByShop(e.id);x(t)}catch(e){f(e.response?.data?.message||"Error al cargar los datos")}finally{v(!1)}};return s.jsx(u.i,{requiredRole:i.i.SHOP,children:(0,s.jsxs)("div",{className:m().panelContainer,children:[s.jsx(l.G,{isBlocked:r?.status==="blocked"}),(0,s.jsxs)("main",{className:m().mainContent,children:[y&&s.jsx("div",{className:m().alert,children:"Cargando datos..."}),w&&(0,s.jsxs)("div",{className:`${m().alert} ${m().alertError}`,children:[w,s.jsx("button",{onClick:b,className:m().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.N,{shop:r}),(0,s.jsxs)("div",{className:m().raffleDetail,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h1",{className:m().raffleDetailTitle,style:{margin:0},children:"Mis productos"}),s.jsx("a",{href:"/panel/productos/crear",className:m().primaryButton,style:{textDecoration:"none"},children:"+ Crear producto"})]}),0===g.length?s.jsx(p.u,{title:"No tienes productos a\xfan",description:"Crea tu primer producto para poder crear sorteos.",icon:"\uD83D\uDCE6"}):(0,s.jsxs)("table",{className:m().table,children:[s.jsx("thead",{className:m().tableHeader,children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:m().tableHeaderCell,children:"Nombre"}),s.jsx("th",{className:m().tableHeaderCell,children:"Valor"}),s.jsx("th",{className:m().tableHeaderCell,children:"Dimensiones"}),s.jsx("th",{className:m().tableHeaderCell,children:"Dep\xf3sito"}),s.jsx("th",{className:m().tableHeaderCell,children:"Estado"}),s.jsx("th",{className:m().tableHeaderCell,children:"Acciones"})]})}),s.jsx("tbody",{children:g.map(e=>(0,s.jsxs)("tr",{className:m().tableRow,children:[s.jsx("td",{className:m().tableCell,children:e.name}),(0,s.jsxs)("td",{className:m().tableCell,children:["S/. ",Number(e.value).toFixed(2)]}),(0,s.jsxs)("td",{className:m().tableCell,children:[Number(e.height).toFixed(1)," \xd7 ",Number(e.width).toFixed(1)," \xd7 ",Number(e.depth).toFixed(1)," cm"]}),s.jsx("td",{className:m().tableCell,children:e.requiresDeposit?"✓ S\xed":"✗ No"}),s.jsx("td",{className:m().tableCell,children:e.status}),s.jsx("td",{className:m().tableCell,children:s.jsx("a",{href:`/panel/productos/${e.id}/editar`,className:m().secondaryButton,style:{textDecoration:"none",padding:"5px 10px",fontSize:"12px"},children:"Editar"})})]},e.id))})]})]})]})]})]})})}},87963:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});var s=r(19899),a=r(10195),o=r.n(a);function i({title:e,description:t,icon:r,action:a}){return(0,s.jsxs)("div",{className:o().emptyState,children:[r&&s.jsx("div",{className:o().emptyStateIcon,children:r}),s.jsx("h3",{className:o().emptyStateTitle,children:e}),s.jsx("p",{className:o().emptyStateDescription,children:t}),a&&s.jsx("button",{className:o().primaryButton,onClick:a.onClick,children:a.label})]})}},79114:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s,a=r(82986),o=r(26379);!function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.ARCHIVED="archived"}(s||(s={}));let i=e=>e?.toDate?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,c=e=>{let t=e.data();return{id:e.id,shopId:t.shopId||"",name:t.name||"",description:t.description||"",value:t.value||0,height:t.height||0,width:t.width||0,depth:t.depth||0,requiresDeposit:t.requiresDeposit||!1,category:t.category,mainImage:t.mainImage,status:t.status||s.INACTIVE,createdAt:i(t.createdAt),updatedAt:i(t.updatedAt)}},d={async getProductsByShop(e){try{let t=(0,a.collection)(o.db,"products"),r=(0,a.query)(t,(0,a.where)("shopId","==",e),(0,a.where)("status","==",s.ACTIVE));return(await (0,a.getDocs)(r)).docs.map(e=>c(e)).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}catch(e){throw console.error("Error fetching products by shop:",e),e}},async getActiveProductsByShop(e){return this.getProductsByShop(e)},async getProductById(e){try{let t=await (0,a.getDoc)((0,a.doc)(o.db,"products",e));if(!t.exists())throw Error("Product not found");return c(t)}catch(e){throw console.error("Error fetching product:",e),e}},async getAllProducts(){try{let e=(0,a.collection)(o.db,"products"),t=(0,a.query)(e,(0,a.where)("status","==",s.ACTIVE));return(await (0,a.getDocs)(t)).docs.map(e=>c(e)).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}catch(e){throw console.error("Error fetching all products:",e),e}},async createProduct(e){try{let t=(0,a.collection)(o.db,"products"),r={shopId:e.shopId,name:e.name,description:e.description,value:e.value,height:e.height,width:e.width,depth:e.depth,requiresDeposit:e.height>15||e.width>15||e.depth>15,category:e.category||null,mainImage:e.mainImage||null,status:s.ACTIVE,createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()},i=await (0,a.ET)(t,r),d=await (0,a.getDoc)(i);if(!d.exists())throw Error("Error al crear el producto");return c(d)}catch(e){throw console.error("Error creating product:",e),e}},async updateProduct(e,t){try{let r=(0,a.doc)(o.db,"products",e),s={updatedAt:(0,a.serverTimestamp)()};if(void 0!==t.name&&(s.name=t.name),void 0!==t.description&&(s.description=t.description),void 0!==t.value&&(s.value=t.value),void 0!==t.height&&(s.height=t.height),void 0!==t.width&&(s.width=t.width),void 0!==t.depth&&(s.depth=t.depth),void 0!==t.category&&(s.category=t.category),void 0!==t.mainImage&&(s.mainImage=t.mainImage),void 0!==t.height||void 0!==t.width||void 0!==t.depth){let e=await (0,a.getDoc)(r);if(e.exists()){let r=e.data(),a=void 0!==t.height?t.height:r.height,o=void 0!==t.width?t.width:r.width,i=void 0!==t.depth?t.depth:r.depth;s.requiresDeposit=a>15||o>15||i>15}}await (0,a.updateDoc)(r,s);let i=await (0,a.getDoc)(r);if(!i.exists())throw Error("Producto no encontrado");return c(i)}catch(e){throw console.error("Error updating product:",e),e}},async deactivateProduct(e){try{let t=(0,a.doc)(o.db,"products",e);await (0,a.updateDoc)(t,{status:s.INACTIVE,updatedAt:(0,a.serverTimestamp)()});let r=await (0,a.getDoc)(t);if(!r.exists())throw Error("Producto no encontrado");return c(r)}catch(e){throw console.error("Error deactivating product:",e),e}}},n={getProductsByShop:async e=>d.getProductsByShop(e),getActiveProductsByShop:async e=>d.getActiveProductsByShop(e),getProductById:async e=>d.getProductById(e),getAllProducts:async()=>d.getAllProducts(),createProduct:async e=>d.createProduct(e),updateProduct:async(e,t)=>d.updateProduct(e,t),deactivateProduct:async e=>d.deactivateProduct(e)}},28848:(e,t,r)=>{"use strict";r.d(t,{m:()=>l});var s=r(10752),a=r(82986),o=r(26379),i=r(12576);let c=e=>e?.toDate?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,d=e=>{let t=e.data();return{id:e.id,userId:t.userId||"",name:t.name||"",description:t.description,logo:t.logo,publicEmail:t.publicEmail,phone:t.phone,socialMedia:t.socialMedia,status:t.status||i.R.PENDING,createdAt:c(t.createdAt),updatedAt:c(t.updatedAt)}},n={async getShopById(e){try{let t=await (0,a.getDoc)((0,a.doc)(o.db,"shops",e));if(!t.exists())throw Error("Shop not found");return d(t)}catch(e){throw console.error("Error fetching shop:",e),e}},async getVerifiedShops(){try{let e=(0,a.collection)(o.db,"shops"),t=(0,a.query)(e,(0,a.where)("status","==",i.R.VERIFIED));return(await (0,a.getDocs)(t)).docs.map(e=>d(e)).sort((e,t)=>e.name.localeCompare(t.name))}catch(e){throw console.error("Error fetching verified shops:",e),e}},async getAllShops(){try{let e=(0,a.collection)(o.db,"shops");return(await (0,a.getDocs)(e)).docs.map(e=>d(e)).sort((e,t)=>e.name.localeCompare(t.name))}catch(e){throw console.error("Error fetching all shops:",e),e}}},l={getShopById:async e=>n.getShopById(e),getAllShops:async()=>n.getAllShops(),getVerifiedShops:async()=>n.getVerifiedShops(),getMyShop:async()=>(await s.x.get("/shops/my-shop/current")).data,updateShop:async(e,t)=>(await s.x.put(`/shops/${e}`,t)).data,getShopStatistics:async e=>(await s.x.get(`/shops/${e}/statistics`)).data}},12576:(e,t,r)=>{"use strict";var s;r.d(t,{R:()=>s}),function(e){e.PENDING="pending",e.VERIFIED="verified",e.BLOCKED="blocked"}(s||(s={}))},81182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3591,8559,3352,4175,9388],()=>r(21776));module.exports=s})();