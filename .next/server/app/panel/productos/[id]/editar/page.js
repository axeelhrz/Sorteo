(()=>{var e={};e.id=5026,e.ids=[5026],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},52997:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(39134),t(22399),t(12874);var r=t(27105),s=t(15265),n=t(90157),l=t.n(n),i=t(44665),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(a,o);let c=["",{children:["panel",{children:["productos",{children:["[id]",{children:["editar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39134)),"/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/[id]/editar/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22399)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/[id]/editar/page.tsx"],p="/panel/productos/[id]/editar/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/panel/productos/[id]/editar/page",pathname:"/panel/productos/[id]/editar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7236:()=>{},26488:(e,a,t)=>{Promise.resolve().then(t.bind(t,28400))},4104:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},28400:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(19899),s=t(5507),n=t(76153),l=t(38442),i=t(1260),o=t(57355),c=t(45035),d=t(26028),p=t(84499),u=t(2345),m=t(10195),_=t.n(m);function h(){let e=(0,n.useRouter)(),a=(0,n.useParams)().id,{user:t,isAuthenticated:m}=(0,l.t)(),[h,f]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!0),[N,S]=(0,s.useState)(null),[I,P]=(0,s.useState)({}),[C,D]=(0,s.useState)([]),L=async()=>{b(!0);try{let[e,t]=await Promise.all([o.m.getMyShop(),c._.getProductById(a)]);if(f(e),g(t),t.shopId!==e.id){S("Este producto no pertenece a tu tienda");return}P({name:t.name,description:t.description,value:t.value,height:t.height,width:t.width,depth:t.depth,category:t.category,mainImage:t.mainImage})}catch(e){S(e.response?.data?.message||"Error al cargar los datos")}finally{b(!1)}},q=(e,a,t)=>{let r=[];return e<=0&&r.push("La altura debe ser mayor a 0"),a<=0&&r.push("El ancho debe ser mayor a 0"),t<=0&&r.push("La profundidad debe ser mayor a 0"),e>15&&r.push("La altura no puede exceder 15cm"),a>15&&r.push("El ancho no puede exceder 15cm"),t>15&&r.push("La profundidad no puede exceder 15cm"),r},k=(e,a)=>{let t=parseFloat(a)||0;P(a=>({...a,[e]:t})),D(q("height"===e?t:I.height||x?.height||0,"width"===e?t:I.width||x?.width||0,"depth"===e?t:I.depth||x?.depth||0))},E=async t=>{t.preventDefault(),S(null);let r=q(I.height||x?.height||0,I.width||x?.width||0,I.depth||x?.depth||0);if(r.length>0){D(r),S("Por favor corrige los errores en las dimensiones");return}y(!0);try{await c._.updateProduct(a,I),e.push("/panel/productos")}catch(e){S(e.response?.data?.message||"Error al actualizar el producto")}finally{y(!1)}},w=async()=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar este producto? Esta acci\xf3n no se puede deshacer.")){y(!0);try{await c._.deactivateProduct(a),e.push("/panel/productos")}catch(e){S(e.response?.data?.message||"Error al eliminar el producto"),y(!1)}}},G=void 0!==I.height?I.height:x?.height||0,T=void 0!==I.width?I.width:x?.width||0,A=void 0!==I.depth?I.depth:x?.depth||0,F=void 0!==I.value?I.value:x?.value||0,B=G>15||T>15||A>15;return j?r.jsx(u.i,{requiredRole:i.i.SHOP,children:(0,r.jsxs)("div",{className:_().panelContainer,children:[r.jsx(p.G,{}),r.jsx("main",{className:_().mainContent,children:r.jsx("div",{className:_().alert,children:"Cargando datos..."})})]})}):x&&h?r.jsx(u.i,{requiredRole:i.i.SHOP,children:(0,r.jsxs)("div",{className:_().panelContainer,children:[r.jsx(p.G,{isBlocked:h?.status==="blocked"}),(0,r.jsxs)("main",{className:_().mainContent,children:[N&&(0,r.jsxs)("div",{className:`${_().alert} ${_().alertError}`,children:[N,r.jsx("button",{onClick:L,className:_().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),r.jsx(d.N,{shop:h}),(0,r.jsxs)("div",{className:_().raffleDetail,children:[r.jsx("h1",{className:_().raffleDetailTitle,children:"Editar producto"}),(0,r.jsxs)("form",{onSubmit:E,className:_().raffleForm,children:[(0,r.jsxs)("div",{className:_().raffleFormSection,children:[r.jsx("h2",{className:_().raffleFormSectionTitle,children:"Informaci\xf3n b\xe1sica"}),(0,r.jsxs)("div",{className:_().formGroup,children:[(0,r.jsxs)("label",{className:_().formLabel,children:["Nombre del producto ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",value:I.name||x.name,onChange:e=>P(a=>({...a,name:e.target.value})),className:_().formInput,required:!0})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[(0,r.jsxs)("label",{className:_().formLabel,children:["Descripci\xf3n ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("textarea",{value:I.description||x.description,onChange:e=>P(a=>({...a,description:e.target.value})),className:_().formTextarea,required:!0,rows:4})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[(0,r.jsxs)("label",{className:_().formLabel,children:["Valor del producto (S/.) ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:void 0!==I.value?I.value:x.value,onChange:e=>P(a=>({...a,value:parseFloat(e.target.value)||0})),className:_().formInput,required:!0})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Categor\xeda (opcional)"}),r.jsx("input",{type:"text",value:void 0!==I.category?I.category:x.category||"",onChange:e=>P(a=>({...a,category:e.target.value})),className:_().formInput})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"URL de imagen principal (opcional)"}),r.jsx("input",{type:"url",value:void 0!==I.mainImage?I.mainImage:x.mainImage||"",onChange:e=>P(a=>({...a,mainImage:e.target.value})),className:_().formInput})]})]}),(0,r.jsxs)("div",{className:_().raffleFormSection,children:[(0,r.jsxs)("h2",{className:_().raffleFormSectionTitle,children:["Dimensiones (en cent\xedmetros) ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("p",{className:_().formHelpText,children:"M\xe1ximo permitido: 15cm por cada dimensi\xf3n. Si alguna dimensi\xf3n excede este l\xedmite, se requerir\xe1 un dep\xf3sito de garant\xeda."}),(0,r.jsxs)("div",{className:_().dimensionsGrid,children:[(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Altura (cm)"}),r.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"15",value:G,onChange:e=>k("height",e.target.value),className:C.some(e=>e.includes("altura")||e.includes("Alto"))?`${_().formInput} ${_().formInputError}`:_().formInput,required:!0})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Ancho (cm)"}),r.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"15",value:T,onChange:e=>k("width",e.target.value),className:C.some(e=>e.includes("ancho")||e.includes("Ancho"))?`${_().formInput} ${_().formInputError}`:_().formInput,required:!0})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Profundidad (cm)"}),r.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"15",value:A,onChange:e=>k("depth",e.target.value),className:C.some(e=>e.includes("profundidad")||e.includes("Profundidad"))?`${_().formInput} ${_().formInputError}`:_().formInput,required:!0})]})]}),C.length>0&&(0,r.jsxs)("div",{className:_().alert+" "+_().alertError,children:[r.jsx("strong",{children:"Errores en las dimensiones:"}),r.jsx("ul",{style:{margin:"10px 0 0 20px"},children:C.map((e,a)=>r.jsx("li",{children:e},a))})]}),B&&0===C.length&&(0,r.jsxs)("div",{className:_().depositWarning,children:["⚠️ Este producto requiere un dep\xf3sito de garant\xeda porque excede las dimensiones m\xe1ximas permitidas (15\xd715\xd715 cm).",r.jsx("br",{}),r.jsx("strong",{children:"Dep\xf3sito requerido:"})," S/. ",F.toFixed(2)]}),!B&&G>0&&T>0&&A>0&&r.jsx("div",{className:_().ticketCalculation,children:"✓ Este producto no requiere dep\xf3sito de garant\xeda."})]}),(0,r.jsxs)("div",{className:_().raffleFormSection,children:[r.jsx("h2",{className:_().raffleFormSectionTitle,children:"Estado actual"}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Estado"}),r.jsx("div",{className:_().statusBadge,style:{display:"inline-block",marginTop:"10px"},children:x.status})]}),(0,r.jsxs)("div",{className:_().formGroup,children:[r.jsx("label",{className:_().formLabel,children:"Requiere dep\xf3sito"}),r.jsx("div",{style:{marginTop:"10px"},children:x.requiresDeposit?"✓ S\xed":"✗ No"})]})]}),(0,r.jsxs)("div",{className:_().buttonGroup,children:[r.jsx("button",{type:"submit",className:_().primaryButton,disabled:v,children:v?"Guardando cambios...":"Guardar cambios"}),r.jsx("button",{type:"button",className:_().secondaryButton,onClick:()=>e.push("/panel/productos"),children:"Cancelar"}),r.jsx("button",{type:"button",className:_().dangerButton,onClick:w,disabled:v,style:{marginLeft:"auto"},children:"Eliminar producto"})]})]})]})]})]})}):r.jsx(u.i,{requiredRole:i.i.SHOP,children:(0,r.jsxs)("div",{className:_().panelContainer,children:[r.jsx(p.G,{}),r.jsx("main",{className:_().mainContent,children:r.jsx("div",{className:`${_().alert} ${_().alertError}`,children:N||"Producto no encontrado"})})]})})}},2345:(e,a,t)=>{"use strict";t.d(a,{i:()=>l});var r=t(19899);t(5507);var s=t(76153),n=t(38442);function l({children:e,requiredRole:a}){(0,s.useRouter)();let{user:t,isAuthenticated:l}=(0,n.t)();return l&&t?a&&t.role!==a?r.jsx("div",{children:"No tienes permiso para acceder a esta p\xe1gina"}):r.jsx(r.Fragment,{children:e}):r.jsx("div",{children:"Cargando..."})}},26028:(e,a,t)=>{"use strict";t.d(a,{N:()=>l});var r=t(19899),s=t(10195),n=t.n(s);function l({shop:e}){return r.jsx("div",{className:n().shopHeader,children:(0,r.jsxs)("div",{className:n().shopHeaderContent,children:[e.logo&&r.jsx("img",{src:e.logo,alt:e.name,className:n().shopLogo}),(0,r.jsxs)("div",{className:n().shopHeaderInfo,children:[r.jsx("h1",{className:n().shopName,children:e.name}),r.jsx("p",{className:n().shopDescription,children:e.description})]})]})})}},84499:(e,a,t)=>{"use strict";t.d(a,{G:()=>o});var r=t(19899),s=t(54175),n=t(76153),l=t(10195),i=t.n(l);function o({isBlocked:e=!1}){let a=(0,n.usePathname)();return r.jsx("aside",{className:i().sidebar,children:(0,r.jsxs)("nav",{className:i().sidebarNav,children:[r.jsx(s.default,{href:"/panel/tienda",className:`${i().navLink} ${"/panel/tienda"===a?i().active:""}`,children:"\uD83D\uDCCB Mi tienda"}),r.jsx(s.default,{href:"/panel/productos",className:`${i().navLink} ${"/panel/productos"===a?i().active:""}`,children:"\uD83D\uDCE6 Mis productos"}),r.jsx(s.default,{href:"/panel/sorteos",className:`${i().navLink} ${"/panel/sorteos"===a?i().active:""}`,children:"\uD83C\uDFB2 Mis sorteos"}),!e&&r.jsx(s.default,{href:"/panel/sorteos/crear",className:`${i().navLink} ${"/panel/sorteos/crear"===a?i().active:""}`,children:"➕ Crear sorteo"})]})})}},10752:(e,a,t)=>{"use strict";t.d(a,{x:()=>n});var r=t(20751);class s{client;constructor(){this.client=r.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let a=localStorage.getItem("token");console.log("API Request - Token from localStorage:",a),a?(e.headers.Authorization=`Bearer ${a}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,a){return this.client.get(e,a)}async post(e,a,t){return this.client.post(e,a,t)}async put(e,a){return this.client.put(e,a)}async delete(e){return this.client.delete(e)}}let n=new s},45035:(e,a,t)=>{"use strict";t.d(a,{_:()=>s});var r=t(10752);let s={getProductsByShop:async e=>(await r.x.get(`/products?shopId=${e}`)).data,getActiveProductsByShop:async e=>(await r.x.get(`/products/shop/${e}/active`)).data,getProductById:async e=>(await r.x.get(`/products/${e}`)).data,createProduct:async e=>(await r.x.post("/products",e)).data,updateProduct:async(e,a)=>(await r.x.put(`/products/${e}`,a)).data,deactivateProduct:async e=>(await r.x.put(`/products/${e}/deactivate`,{})).data,getAllProducts:async()=>(await r.x.get("/products")).data}},57355:(e,a,t)=>{"use strict";t.d(a,{m:()=>s});var r=t(10752);let s={getMyShop:async()=>(await r.x.get("/shops/my-shop/current")).data,getShopById:async e=>(await r.x.get(`/shops/${e}`)).data,updateShop:async(e,a)=>(await r.x.put(`/shops/${e}`,a)).data,getAllShops:async()=>(await r.x.get("/shops")).data,getVerifiedShops:async()=>(await r.x.get("/shops/verified")).data,getShopStatistics:async e=>(await r.x.get(`/shops/${e}/statistics`)).data}},38442:(e,a,t)=>{"use strict";t.d(a,{t:()=>n});var r=t(24978),s=t(31460);let n=(0,r.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:a=>e({user:a,isAuthenticated:!!a}),setToken:a=>{a?localStorage.setItem("token",a):localStorage.removeItem("token"),e({token:a})},setIsLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},1260:(e,a,t)=>{"use strict";var r;t.d(a,{i:()=>r}),function(e){e.ADMIN="admin",e.SHOP="shop",e.USER="user"}(r||(r={}))},10195:e=>{e.exports={panelContainer:"panel_panelContainer__Kt8Ty",sidebar:"panel_sidebar__KeScH",sidebarNav:"panel_sidebarNav__KjeNV",navLink:"panel_navLink__sQoV6",active:"panel_active___ehGn",mainContent:"panel_mainContent__7V2fv",shopHeader:"panel_shopHeader__iRrDp",shopHeaderContent:"panel_shopHeaderContent__wsZnH",shopLogo:"panel_shopLogo__gTusz",shopHeaderInfo:"panel_shopHeaderInfo__IKOo3",shopName:"panel_shopName__lr5MU",shopDescription:"panel_shopDescription__zNvIE",statusBadge:"panel_statusBadge__37f3q",formGroup:"panel_formGroup__0UyVN",formLabel:"panel_formLabel___zOHD",formInput:"panel_formInput__bLzwR",formTextarea:"panel_formTextarea__B2MkI",formSelect:"panel_formSelect__thum_",primaryButton:"panel_primaryButton__ArDHW",secondaryButton:"panel_secondaryButton__KSKVI",dangerButton:"panel_dangerButton__2WLFi",buttonGroup:"panel_buttonGroup__pcyfD",card:"panel_card__ttDyJ",cardHeader:"panel_cardHeader__scyyA",cardTitle:"panel_cardTitle__K6V__",cardActions:"panel_cardActions___eqre",cardAction:"panel_cardAction__xpZWN",cardActionPrimary:"panel_cardActionPrimary__t_VOi",cardActionSecondary:"panel_cardActionSecondary__gcgLm",table:"panel_table__GBWH_",tableHeader:"panel_tableHeader__TN7va",tableHeaderCell:"panel_tableHeaderCell__WZypp",tableRow:"panel_tableRow__oR22e",tableCell:"panel_tableCell__GdQvd",tableCellCenter:"panel_tableCellCenter__Gc4za",tableCellRight:"panel_tableCellRight__jl067",emptyState:"panel_emptyState__1c4lK",emptyStateIcon:"panel_emptyStateIcon__znkGr",emptyStateTitle:"panel_emptyStateTitle__OpZSI",emptyStateDescription:"panel_emptyStateDescription__P3sK_",alert:"panel_alert__dbKCy",alertSuccess:"panel_alertSuccess__T39ZR",alertError:"panel_alertError__9DFT4",alertWarning:"panel_alertWarning__sOPwe",alertInfo:"panel_alertInfo__PLXx9",progressBar:"panel_progressBar__Ik7pm",progressBarFill:"panel_progressBarFill__NCwij",profileForm:"panel_profileForm__VbWs3",profileFormSection:"panel_profileFormSection__t80bQ",profileFormSectionTitle:"panel_profileFormSectionTitle__o8RW2",readOnlyField:"panel_readOnlyField___M4rQ",raffleForm:"panel_raffleForm__s3ll7",raffleFormSection:"panel_raffleFormSection__PUcJc",raffleFormSectionTitle:"panel_raffleFormSectionTitle__1DglO",dimensionsGrid:"panel_dimensionsGrid__7jafN",dimensionInfo:"panel_dimensionInfo__bjc2e",dimensionLabel:"panel_dimensionLabel__FAjKe",dimensionValue:"panel_dimensionValue__Jm7tM",depositWarning:"panel_depositWarning__mU2qE",ticketCalculation:"panel_ticketCalculation___d694",ticketCalculationValue:"panel_ticketCalculationValue__KOcl_",raffleDetail:"panel_raffleDetail__nigCY",raffleDetailHeader:"panel_raffleDetailHeader__xcVaX",raffleDetailTitle:"panel_raffleDetailTitle___LWvI",raffleDetailStatus:"panel_raffleDetailStatus__GBSlq",raffleDetailSection:"panel_raffleDetailSection__Y6dGR",raffleDetailSectionTitle:"panel_raffleDetailSectionTitle__6HXue",raffleDetailGrid:"panel_raffleDetailGrid__U8h9R",raffleDetailItem:"panel_raffleDetailItem__frOK2",raffleDetailItemLabel:"panel_raffleDetailItemLabel__PLUUN",raffleDetailItemValue:"panel_raffleDetailItemValue__mVKfw",ticketProgress:"panel_ticketProgress__9PZKW",ticketProgressLabel:"panel_ticketProgressLabel__fBS77",ticketProgressPercentage:"panel_ticketProgressPercentage__nBOhy",statCard:"panel_statCard__Dx3Sz",statCardIcon:"panel_statCardIcon__zp227",statCardValue:"panel_statCardValue__RWvG6",statCardLabel:"panel_statCardLabel__wRjrF",formHelpText:"panel_formHelpText__IpKar",formInputError:"panel_formInputError__oPd_O"}},22399:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,metadata:()=>s});var r=t(35023);t(91641);let s={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function n({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:e})})}},39134:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/panel/productos/[id]/editar/page.tsx#default`)},91641:()=>{}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[276,751,1925,4175],()=>t(52997));module.exports=r})();