(()=>{var e={};e.id=7408,e.ids=[7408],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},79594:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>n}),t(9428),t(24198),t(12874);var a=t(27105),r=t(15265),l=t(90157),i=t.n(l),d=t(44665),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(s,o);let n=["",{children:["panel",{children:["deposits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9428)),"/Users/axelhernandez/Sorteos/frontend/src/app/panel/deposits/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/panel/deposits/page.tsx"],p="/panel/deposits/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/panel/deposits/page",pathname:"/panel/deposits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},70399:(e,s,t)=>{Promise.resolve().then(t.bind(t,77758))},77758:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(19899),r=t(5507),l=t(38442),i=t(1260);t(28848);var d=t(10752),o=t(26028),n=t(84499),c=t(2345),p=t(10195),u=t.n(p);function x(){let{user:e,isAuthenticated:s}=(0,l.t)(),[t,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),[m,g]=(0,r.useState)([]),[j,v]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[b,f]=(0,r.useState)("all"),C=async()=>{try{let e;h(!0),e="all"===b?await d.x.get("/deposits"):await d.x.get(`/deposits/by-status/${b}`),g(e.data||[]);let s=await d.x.get("/deposits/stats/overview");v(s.data),N(null)}catch(e){N(e.response?.data?.message||"Error al cargar dep\xf3sitos")}finally{h(!1)}},S=e=>({pending:"#FFA500",held:"#F44336",released:"#4CAF50",executed:"#2196F3"})[e]||"#757575",D=e=>({pending:"Pendiente",held:"Retenido",released:"Liberado",executed:"Ejecutado"})[e]||e;return a.jsx(c.i,{requiredRole:i.i.SHOP,children:(0,a.jsxs)("div",{className:u().panelContainer,children:[a.jsx(n.G,{isBlocked:t?.status==="blocked"}),(0,a.jsxs)("main",{className:u().mainContent,children:[x&&a.jsx("div",{className:u().alert,children:"Cargando..."}),y&&(0,a.jsxs)("div",{className:`${u().alert} ${u().alertError}`,children:[y,a.jsx("button",{onClick:C,className:u().primaryButton,style:{marginLeft:"10px"},children:"Reintentar"})]}),t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.N,{shop:t}),(0,a.jsxs)("div",{className:u().raffleDetail,children:[a.jsx("h1",{className:u().raffleDetailTitle,children:"Gesti\xf3n de Dep\xf3sitos de Garant\xeda"}),a.jsx("p",{style:{color:"#7f8c8d",marginBottom:"30px"},children:"Visualiza y gestiona todos tus dep\xf3sitos de garant\xeda"}),j&&(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"\uD83D\uDCCA"}),a.jsx("div",{className:u().statCardValue,children:j.totalDeposits}),a.jsx("div",{className:u().statCardLabel,children:"Total de Dep\xf3sitos"})]}),(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"\uD83D\uDCB0"}),(0,a.jsxs)("div",{className:u().statCardValue,children:["S/. ",j.totalAmount.toFixed(2)]}),a.jsx("div",{className:u().statCardLabel,children:"Monto Total"})]}),(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"⏳"}),a.jsx("div",{className:u().statCardValue,children:j.byStatus.pending}),a.jsx("div",{className:u().statCardLabel,children:"Pendientes"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["S/. ",j.amountByStatus.pending.toFixed(2)]})]}),(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"\uD83D\uDD12"}),a.jsx("div",{className:u().statCardValue,children:j.byStatus.held}),a.jsx("div",{className:u().statCardLabel,children:"Retenidos"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["S/. ",j.amountByStatus.held.toFixed(2)]})]}),(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"✅"}),a.jsx("div",{className:u().statCardValue,children:j.byStatus.released}),a.jsx("div",{className:u().statCardLabel,children:"Liberados"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["S/. ",j.amountByStatus.released.toFixed(2)]})]}),(0,a.jsxs)("div",{className:u().statCard,children:[a.jsx("div",{className:u().statCardIcon,children:"✓"}),a.jsx("div",{className:u().statCardValue,children:j.byStatus.executed}),a.jsx("div",{className:u().statCardLabel,children:"Ejecutados"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["S/. ",j.amountByStatus.executed.toFixed(2)]})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{htmlFor:"statusFilter",className:u().formLabel,style:{marginRight:"10px"},children:"Filtrar por estado:"}),(0,a.jsxs)("select",{id:"statusFilter",value:b,onChange:e=>f(e.target.value),className:u().formSelect,style:{width:"auto",display:"inline-block"},children:[a.jsx("option",{value:"all",children:"Todos"}),a.jsx("option",{value:"pending",children:"Pendiente"}),a.jsx("option",{value:"held",children:"Retenido"}),a.jsx("option",{value:"released",children:"Liberado"}),a.jsx("option",{value:"executed",children:"Ejecutado"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h2",{style:{marginBottom:"15px",fontSize:"18px",color:"#2c3e50"},children:"Historial de Dep\xf3sitos"}),0===m.length?a.jsx("div",{className:u().alert,style:{textAlign:"center"},children:"No hay dep\xf3sitos registrados"}):(0,a.jsxs)("table",{className:u().table,children:[a.jsx("thead",{className:u().tableHeader,children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:u().tableHeaderCell,children:"ID Dep\xf3sito"}),a.jsx("th",{className:u().tableHeaderCell,children:"Producto"}),a.jsx("th",{className:u().tableHeaderCell,children:"Monto"}),a.jsx("th",{className:u().tableHeaderCell,children:"Estado"}),a.jsx("th",{className:u().tableHeaderCell,children:"Fecha Creaci\xf3n"}),a.jsx("th",{className:u().tableHeaderCell,children:"Notas"})]})}),a.jsx("tbody",{children:m.map(e=>(0,a.jsxs)("tr",{className:u().tableRow,children:[a.jsx("td",{className:u().tableCell,children:(0,a.jsxs)("strong",{children:[e.id.substring(0,8),"..."]})}),a.jsx("td",{className:u().tableCell,children:e.raffle?.product?.name||"N/A"}),a.jsx("td",{className:u().tableCell,children:(0,a.jsxs)("strong",{children:["S/. ",Number(e.amount).toFixed(2)]})}),a.jsx("td",{className:u().tableCell,children:a.jsx("span",{className:u().statusBadge,style:{backgroundColor:S(e.status)},children:D(e.status)})}),a.jsx("td",{className:u().tableCell,children:new Date(e.createdAt).toLocaleDateString("es-ES")}),a.jsx("td",{className:u().tableCell,style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:e.notes?e.notes.substring(0,50)+"...":"-"})]},e.id))})]})]})]})]})]})]})})}},28848:(e,s,t)=>{"use strict";t.d(s,{m:()=>c});var a=t(10752),r=t(82986),l=t(26379),i=t(12576);let d=e=>e?.toDate?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,o=e=>{let s=e.data();return{id:e.id,userId:s.userId||"",name:s.name||"",description:s.description,logo:s.logo,publicEmail:s.publicEmail,phone:s.phone,socialMedia:s.socialMedia,status:s.status||i.R.PENDING,createdAt:d(s.createdAt),updatedAt:d(s.updatedAt)}},n={async getShopById(e){try{let s=await (0,r.getDoc)((0,r.doc)(l.db,"shops",e));if(!s.exists())throw Error("Shop not found");return o(s)}catch(e){throw console.error("Error fetching shop:",e),e}},async getVerifiedShops(){try{let e=(0,r.collection)(l.db,"shops"),s=(0,r.query)(e,(0,r.where)("status","==",i.R.VERIFIED));return(await (0,r.getDocs)(s)).docs.map(e=>o(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching verified shops:",e),e}},async getAllShops(){try{let e=(0,r.collection)(l.db,"shops");return(await (0,r.getDocs)(e)).docs.map(e=>o(e)).sort((e,s)=>e.name.localeCompare(s.name))}catch(e){throw console.error("Error fetching all shops:",e),e}}},c={getShopById:async e=>n.getShopById(e),getAllShops:async()=>n.getAllShops(),getVerifiedShops:async()=>n.getVerifiedShops(),getMyShop:async()=>(await a.x.get("/shops/my-shop/current")).data,updateShop:async(e,s)=>(await a.x.put(`/shops/${e}`,s)).data,getShopStatistics:async e=>(await a.x.get(`/shops/${e}/statistics`)).data}},12576:(e,s,t)=>{"use strict";var a;t.d(s,{R:()=>a}),function(e){e.PENDING="pending",e.VERIFIED="verified",e.BLOCKED="blocked"}(a||(a={}))},9428:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/panel/deposits/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[3591,8559,3352,4175,9388],()=>t(79594));module.exports=a})();