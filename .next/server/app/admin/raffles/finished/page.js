(()=>{var e={};e.id=6468,e.ids=[6468],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},54892:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o}),t(67751),t(83517),t(22399),t(12874);var s=t(27105),n=t(15265),i=t(90157),r=t.n(i),d=t(44665),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(a,l);let o=["",{children:["admin",{children:["raffles",{children:["finished",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,67751)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/finished/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,83517)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,22399)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/finished/page.tsx"],m="/admin/raffles/finished/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/raffles/finished/page",pathname:"/admin/raffles/finished",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},76090:(e,a,t)=>{Promise.resolve().then(t.bind(t,36445))},90962:(e,a,t)=>{Promise.resolve().then(t.bind(t,99679))},7236:()=>{},4104:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},36445:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(19899),n=t(5507),i=t(54175),r=t(76153),d=t(55562),l=t(38442),o=t(43993),c=t(51881),m=t.n(c);function u({children:e}){let a=(0,r.useRouter)(),{user:t,logout:c}=(0,l.t)(),[u,h]=(0,n.useState)(!0);return t?.role!=="admin"?s.jsx("div",{className:m().unauthorized,children:(0,s.jsxs)("div",{className:m().unauthorizedContent,children:[s.jsx("h1",{children:"No autorizado"}),s.jsx("p",{children:"No tienes permiso para acceder a esta secci\xf3n."}),s.jsx("button",{onClick:()=>a.push("/"),children:"Volver al inicio"})]})}):(0,s.jsxs)("div",{className:m().adminContainer,children:[(0,s.jsxs)("aside",{className:`${m().sidebar} ${u?m().open:m().closed}`,children:[(0,s.jsxs)("div",{className:m().sidebarHeader,children:[s.jsx(o.Z,{size:"small",showText:!1}),s.jsx("h2",{children:"Panel Admin"}),s.jsx("button",{className:m().toggleBtn,onClick:()=>h(!u),children:s.jsx(d.cur,{})})]}),(0,s.jsxs)("nav",{className:m().sidebarNav,children:[(0,s.jsxs)(i.default,{href:"/admin",className:m().navItem,children:[s.jsx(d.orK,{className:m().navIcon}),s.jsx("span",{children:"Dashboard"})]}),(0,s.jsxs)(i.default,{href:"/admin/raffles/pending",className:m().navItem,children:[s.jsx(d.TCC,{className:m().navIcon}),s.jsx("span",{children:"Sorteos Pendientes"})]}),(0,s.jsxs)(i.default,{href:"/admin/raffles/active",className:m().navItem,children:[s.jsx(d.KCr,{className:m().navIcon}),s.jsx("span",{children:"Sorteos Activos"})]}),(0,s.jsxs)(i.default,{href:"/admin/raffles/finished",className:m().navItem,children:[s.jsx(d._rq,{className:m().navIcon}),s.jsx("span",{children:"Sorteos Finalizados"})]}),(0,s.jsxs)(i.default,{href:"/admin/shops",className:m().navItem,children:[s.jsx(d.x8h,{className:m().navIcon}),s.jsx("span",{children:"Tiendas"})]}),(0,s.jsxs)(i.default,{href:"/admin/users",className:m().navItem,children:[s.jsx(d.WY8,{className:m().navIcon}),s.jsx("span",{children:"Usuarios"})]}),(0,s.jsxs)(i.default,{href:"/admin/audit",className:m().navItem,children:[s.jsx(d.NOg,{className:m().navIcon}),s.jsx("span",{children:"Auditor\xeda"})]}),(0,s.jsxs)(i.default,{href:"/admin/payments",className:m().navItem,children:[s.jsx(d.XiQ,{className:m().navIcon}),s.jsx("span",{children:"Transacciones"})]})]}),(0,s.jsxs)("div",{className:m().sidebarFooter,children:[(0,s.jsxs)("div",{className:m().userInfo,children:[s.jsx("p",{children:t?.name}),s.jsx("small",{children:t?.email})]}),s.jsx("button",{className:m().logoutBtn,onClick:()=>{c(),a.push("/login")},children:"Cerrar sesi\xf3n"})]})]}),(0,s.jsxs)("main",{className:m().mainContent,children:[s.jsx("div",{className:m().topBar,children:s.jsx("h1",{children:"Panel de Administraci\xf3n"})}),s.jsx("div",{className:m().content,children:e})]})]})}},99679:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(19899),n=t(5507);t(42466);var i=t(51881),r=t.n(i);function d(){let[e,a]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[d,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(0),[m,u]=(0,n.useState)(0),[h,x]=(0,n.useState)(""),[_,p]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),j=e=>{if(!e.winnerTicketId)return"No hay ganador";let a=e.tickets?.find(a=>a.id===e.winnerTicketId);return a?`Ticket #${a.number}`:"Ganador no encontrado"};return t&&0===e.length?s.jsx("div",{style:{textAlign:"center",padding:"40px"},children:s.jsx("p",{children:"Cargando sorteos finalizados..."})}):(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{marginBottom:"20px",color:"#2c3e50"},children:"Sorteos Finalizados"}),d&&s.jsx("div",{style:{padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"20px"},children:d}),s.jsx("div",{className:r().tableHeader,style:{marginBottom:"20px"},children:s.jsx("div",{className:r().filterContainer,children:s.jsx("input",{type:"text",className:r().filterInput,placeholder:"Filtrar por ID de tienda...",value:h,onChange:e=>{x(e.target.value),c(0)}})})}),0===e.length?s.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"white",borderRadius:"8px"},children:s.jsx("p",{style:{color:"#7f8c8d"},children:"No hay sorteos finalizados"})}):(0,s.jsxs)("div",{className:r().tableContainer,children:[(0,s.jsxs)("table",{children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"Tienda"}),s.jsx("th",{children:"Producto"}),s.jsx("th",{children:"Valor"}),s.jsx("th",{children:"Tickets Vendidos"}),s.jsx("th",{children:"Ganador"}),s.jsx("th",{children:"Fecha Finalizaci\xf3n"}),s.jsx("th",{children:"Estado"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:e.shop.name}),s.jsx("td",{children:e.product.name}),(0,s.jsxs)("td",{children:["$",e.productValue.toFixed(2)]}),(0,s.jsxs)("td",{children:[e.soldTickets," / ",e.totalTickets]}),s.jsx("td",{children:j(e)}),s.jsx("td",{children:new Date(e.raffleExecutedAt).toLocaleDateString()}),s.jsx("td",{children:s.jsx("span",{className:`${r().statusBadge} ${r()[e.status]}`,children:"finished"===e.status?"Finalizado":"Agotado"})}),s.jsx("td",{children:s.jsx("div",{className:r().actionButtons,children:s.jsx("button",{className:`${r().btn} ${r().btnPrimary}`,onClick:()=>{p(e),f(!0)},children:"Ver"})})})]},e.id))})]}),(0,s.jsxs)("div",{className:r().pagination,children:[s.jsx("button",{className:r().paginationBtn,disabled:0===o,onClick:()=>c(o-1),children:"← Anterior"}),(0,s.jsxs)("span",{style:{padding:"8px 12px"},children:["P\xe1gina ",o+1," de ",Math.ceil(m/10)]}),s.jsx("button",{className:r().paginationBtn,disabled:o>=Math.ceil(m/10)-1,onClick:()=>c(o+1),children:"Siguiente →"})]})]}),g&&_&&s.jsx("div",{className:`${r().modal} ${g?r().open:""}`,children:(0,s.jsxs)("div",{className:r().modalContent,children:[s.jsx("div",{className:r().modalHeader,children:s.jsx("h2",{children:"Detalles del Sorteo Finalizado"})}),(0,s.jsxs)("div",{className:r().modalBody,children:[(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Tienda"}),s.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:_.shop.name})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Producto"}),s.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:_.product.name})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Valor del Producto"}),(0,s.jsxs)("p",{style:{margin:"5px 0",color:"#2c3e50"},children:["$",_.productValue.toFixed(2)]})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Tickets Vendidos"}),(0,s.jsxs)("p",{style:{margin:"5px 0",color:"#2c3e50"},children:[_.soldTickets," / ",_.totalTickets]})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Ganador"}),s.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:j(_)})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Fecha de Finalizaci\xf3n"}),s.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:new Date(_.raffleExecutedAt).toLocaleString()})]}),(0,s.jsxs)("div",{className:r().formGroup,children:[s.jsx("label",{children:"Estado"}),s.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:s.jsx("span",{className:`${r().statusBadge} ${r()[_.status]}`,children:"finished"===_.status?"Finalizado":"Agotado"})})]})]}),s.jsx("div",{className:r().modalFooter,children:s.jsx("button",{className:`${r().btn} ${r().btnSecondary}`,onClick:()=>f(!1),children:"Cerrar"})})]})})]})}},43993:(e,a,t)=>{"use strict";t.d(a,{Z:()=>o});var s=t(19899),n=t(18154),i=t(54175);let r={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var d=t(11648),l=t.n(d);function o({size:e="medium",showText:a=!0,className:t="",href:d="/"}){let o=(0,s.jsxs)("div",{className:`${l().logo} ${l()[e]} ${t}`,children:[s.jsx(n.default,{src:r,alt:"TIKETEA ONLINE",width:"small"===e?40:"medium"===e?60:80,height:"small"===e?40:"medium"===e?60:80,className:l().logoImage,priority:!0}),a&&s.jsx("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return d?s.jsx(i.default,{href:d,className:l().logoLink,children:o}):o}},10752:(e,a,t)=>{"use strict";t.d(a,{x:()=>i});var s=t(20751);class n{client;constructor(){this.client=s.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let a=localStorage.getItem("token");console.log("API Request - Token from localStorage:",a),a?(e.headers.Authorization=`Bearer ${a}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,a){return this.client.get(e,a)}async post(e,a,t){return this.client.post(e,a,t)}async put(e,a){return this.client.put(e,a)}async delete(e){return this.client.delete(e)}}let i=new n},42466:(e,a,t)=>{"use strict";t.d(a,{d:()=>n});var s=t(10752);let n={getDashboardStats:async()=>(await s.x.get("/admin/dashboard/stats")).data,getPendingRaffles:async(e=50,a=0)=>(await s.x.get("/admin/raffles/pending",{params:{limit:e,offset:a}})).data,getActiveRaffles:async(e=50,a=0,t)=>(await s.x.get("/admin/raffles/active",{params:{limit:e,offset:a,...t&&{shopId:t}}})).data,getFinishedRaffles:async(e=50,a=0,t)=>(await s.x.get("/admin/raffles/finished",{params:{limit:e,offset:a,...t&&{shopId:t}}})).data,getRaffleDetail:async e=>(await s.x.get(`/admin/raffles/${e}`)).data,approveRaffle:async e=>(await s.x.put(`/admin/raffles/${e}/approve`,{})).data,rejectRaffle:async(e,a)=>(await s.x.put(`/admin/raffles/${e}/reject`,{reason:a})).data,cancelRaffle:async(e,a)=>(await s.x.put(`/admin/raffles/${e}/cancel`,{reason:a})).data,executeRaffle:async e=>(await s.x.put(`/admin/raffles/${e}/execute`,{})).data,getAllShops:async(e=50,a=0,t)=>(await s.x.get("/admin/shops",{params:{limit:e,offset:a,...t&&{status:t}}})).data,getShopDetail:async e=>(await s.x.get(`/admin/shops/${e}`)).data,changeShopStatus:async(e,a,t)=>(await s.x.put(`/admin/shops/${e}/status`,{status:a,...t&&{reason:t}})).data,getAllUsers:async(e=50,a=0,t)=>(await s.x.get("/admin/users",{params:{limit:e,offset:a,...t&&{role:t}}})).data,getUserDetail:async e=>(await s.x.get(`/admin/users/${e}`)).data,getAuditLogs:async(e=50,a=0,t)=>(await s.x.get("/admin/audit/logs",{params:{limit:e,offset:a,...t}})).data,getEntityAuditLogs:async(e,a)=>(await s.x.get(`/admin/audit/entity/${e}/${a}`)).data,getAllPayments:async(e=50,a=0,t)=>(await s.x.get("/admin/payments",{params:{limit:e,offset:a,...t?.status&&{status:t.status},...t?.userId&&{userId:t.userId},...t?.raffleId&&{raffleId:t.raffleId}}})).data,getPaymentDetail:async e=>(await s.x.get(`/admin/payments/${e}`)).data}},38442:(e,a,t)=>{"use strict";t.d(a,{t:()=>i});var s=t(24978),n=t(31460);let i=(0,s.Ue)()((0,n.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:a=>e({user:a,isAuthenticated:!!a}),setToken:a=>{a?localStorage.setItem("token",a):localStorage.removeItem("token"),e({token:a})},setIsLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},51881:e=>{e.exports={adminContainer:"admin_adminContainer__Eh90a",sidebar:"admin_sidebar__mXGAh",closed:"admin_closed__0toWD",sidebarHeader:"admin_sidebarHeader__R_jJT",toggleBtn:"admin_toggleBtn__xfw93",sidebarNav:"admin_sidebarNav__WZtZQ",navItem:"admin_navItem__DShOG",navIcon:"admin_navIcon__3O_Ni",sidebarFooter:"admin_sidebarFooter__3hkih",userInfo:"admin_userInfo__LVYmW",logoutBtn:"admin_logoutBtn__XlQ6d",mainContent:"admin_mainContent__LKiLk",topBar:"admin_topBar__NC1F1",content:"admin_content__q9bCm",unauthorized:"admin_unauthorized__IQ2li",unauthorizedContent:"admin_unauthorizedContent__WVcyS",dashboardGrid:"admin_dashboardGrid__eoxej",statCard:"admin_statCard__x3Xg1",warning:"admin_warning__AVQfv",danger:"admin_danger__sptcS",success:"admin_success__1eje9",info:"admin_info__tS_KQ",statHeader:"admin_statHeader__eYJkD",statIcon:"admin_statIcon__S4aUI",value:"admin_value__TMFsT",tableContainer:"admin_tableContainer__GVxxO",tableHeader:"admin_tableHeader___8L4K",filterContainer:"admin_filterContainer__6WkIk",filterSelect:"admin_filterSelect__OG5aD",filterInput:"admin_filterInput__qeIwH",table:"admin_table__Wi_BD",tableHead:"admin_tableHead__HUGym",tableHeadCell:"admin_tableHeadCell__aGufP",tableCell:"admin_tableCell__sFHBM",tableBodyRow:"admin_tableBodyRow__arYS1",statusBadge:"admin_statusBadge__6Bfmv",pending:"admin_pending__ESWta",active:"admin_active__3D2D6",finished:"admin_finished__w5SWW",rejected:"admin_rejected__lb5oK",cancelled:"admin_cancelled__Qaxdn",verified:"admin_verified__eRcoj",blocked:"admin_blocked__bylJi",actionButtons:"admin_actionButtons__n1G3j",btn:"admin_btn__lDLne",btnPrimary:"admin_btnPrimary__uvegQ",btnSuccess:"admin_btnSuccess__IODau",btnDanger:"admin_btnDanger__76sY_",btnWarning:"admin_btnWarning__5Fqhx",btnSecondary:"admin_btnSecondary__assgO",modal:"admin_modal__DNvY3",open:"admin_open__bBxNv",modalContent:"admin_modalContent__tBgZX",modalHeader:"admin_modalHeader__frRax",modalBody:"admin_modalBody__6pNmP",modalFooter:"admin_modalFooter__jGFWx",formGroup:"admin_formGroup__W0nf_",pagination:"admin_pagination__0kMUt",paginationBtn:"admin_paginationBtn__oojru"}},11648:e=>{e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},83517:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/admin/layout.tsx#default`)},67751:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/finished/page.tsx#default`)},22399:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i,metadata:()=>n});var s=t(35023);t(91641);let n={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{children:e})})}},91641:()=>{}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[276,751,1925,4175,5562,8154],()=>t(54892));module.exports=s})();