(()=>{var e={};e.id=5347,e.ids=[5347],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},92146:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(7110),s(83517),s(24198),s(12874);var t=s(27105),r=s(15265),i=s(90157),n=s.n(i),o=s(44665),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(a,l);let d=["",{children:["admin",{children:["raffles",{children:["pending",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7110)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/pending/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,83517)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/pending/page.tsx"],p="/admin/raffles/pending/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/raffles/pending/page",pathname:"/admin/raffles/pending",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},99371:(e,a,s)=>{Promise.resolve().then(s.bind(s,98590))},98590:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var t=s(19899),r=s(5507),i=s(42466),n=s(51881),o=s.n(n);function l(){let[e,a]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(0),[N,S]=(0,r.useState)(0),$=async()=>{try{n(!0);let e=await i.d.getPendingRaffles(10,10*b);a(e.data),S(e.total),d(null)}catch(e){d(e.response?.data?.message||"Error al cargar sorteos"),console.error("Error:",e)}finally{n(!1)}},P=async e=>{try{let a=await i.d.getRaffleDetail(e);p(a),u(!0)}catch(e){alert("Error al cargar detalles del sorteo"),console.error("Error:",e)}},q=async e=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas aprobar este sorteo?"))try{y(!0),await i.d.approveRaffle(e),alert("Sorteo aprobado exitosamente"),u(!1),$()}catch(e){alert(e.response?.data?.message||"Error al aprobar sorteo"),console.error("Error:",e)}finally{y(!1)}},w=async e=>{if(!g.trim()){alert("Por favor ingresa un motivo de rechazo");return}try{y(!0),await i.d.rejectRaffle(e,g),alert("Sorteo rechazado exitosamente"),m(!1),f(""),u(!1),$()}catch(e){alert(e.response?.data?.message||"Error al rechazar sorteo"),console.error("Error:",e)}finally{y(!1)}};return s&&0===e.length?t.jsx("div",{style:{textAlign:"center",padding:"40px"},children:t.jsx("p",{children:"Cargando sorteos pendientes..."})}):(0,t.jsxs)("div",{children:[t.jsx("h2",{style:{marginBottom:"20px",color:"#2c3e50"},children:"Sorteos Pendientes de Aprobaci\xf3n"}),l&&t.jsx("div",{style:{padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"20px"},children:l}),0===e.length?t.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"white",borderRadius:"8px"},children:t.jsx("p",{style:{color:"#7f8c8d"},children:"No hay sorteos pendientes de aprobaci\xf3n"})}):(0,t.jsxs)("div",{className:o().tableContainer,children:[(0,t.jsxs)("table",{children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Tienda"}),t.jsx("th",{children:"Producto"}),t.jsx("th",{children:"Valor"}),t.jsx("th",{children:"Tickets"}),t.jsx("th",{children:"Dep\xf3sito"}),t.jsx("th",{children:"Fecha"}),t.jsx("th",{children:"Acciones"})]})}),t.jsx("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:e.shop.name}),t.jsx("td",{children:e.product.name}),(0,t.jsxs)("td",{children:["$",e.productValue.toFixed(2)]}),t.jsx("td",{children:e.totalTickets}),t.jsx("td",{children:e.requiresDeposit?"✓ S\xed":"✗ No"}),t.jsx("td",{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx("td",{children:t.jsx("div",{className:o().actionButtons,children:t.jsx("button",{className:`${o().btn} ${o().btnPrimary}`,onClick:()=>P(e.id),children:"Ver"})})})]},e.id))})]}),(0,t.jsxs)("div",{className:o().pagination,children:[t.jsx("button",{className:o().paginationBtn,disabled:0===b,onClick:()=>v(b-1),children:"← Anterior"}),(0,t.jsxs)("span",{style:{padding:"8px 12px"},children:["P\xe1gina ",b+1," de ",Math.ceil(N/10)]}),t.jsx("button",{className:o().paginationBtn,disabled:b>=Math.ceil(N/10)-1,onClick:()=>v(b+1),children:"Siguiente →"})]})]}),x&&c&&t.jsx("div",{className:`${o().modal} ${x?o().open:""}`,children:(0,t.jsxs)("div",{className:o().modalContent,children:[t.jsx("div",{className:o().modalHeader,children:t.jsx("h2",{children:"Detalles del Sorteo"})}),(0,t.jsxs)("div",{className:o().modalBody,children:[(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Tienda"}),(0,t.jsxs)("p",{style:{margin:"5px 0",color:"#2c3e50"},children:[c.shop.name,t.jsx("span",{className:`${o().statusBadge} ${o()[c.shop.status]}`,style:{marginLeft:"10px"},children:c.shop.status})]})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Producto"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:c.product.name})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Descripci\xf3n"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:c.product.description||"N/A"})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Valor del Producto"}),(0,t.jsxs)("p",{style:{margin:"5px 0",color:"#2c3e50"},children:["$",c.productValue.toFixed(2)]})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Total de Tickets"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:c.totalTickets})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Requiere Dep\xf3sito"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:c.requiresDeposit?"✓ S\xed":"✗ No"})]}),c.specialConditions&&(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Condiciones Especiales"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:c.specialConditions})]})]}),(0,t.jsxs)("div",{className:o().modalFooter,children:[t.jsx("button",{className:`${o().btn} ${o().btnSecondary}`,onClick:()=>u(!1),disabled:j,children:"Cerrar"}),t.jsx("button",{className:`${o().btn} ${o().btnDanger}`,onClick:()=>m(!0),disabled:j,children:"Rechazar"}),t.jsx("button",{className:`${o().btn} ${o().btnSuccess}`,onClick:()=>q(c.id),disabled:j,children:j?"Procesando...":"Aprobar"})]})]})}),h&&c&&t.jsx("div",{className:`${o().modal} ${h?o().open:""}`,children:(0,t.jsxs)("div",{className:o().modalContent,children:[t.jsx("div",{className:o().modalHeader,children:t.jsx("h2",{children:"Rechazar Sorteo"})}),(0,t.jsxs)("div",{className:o().modalBody,children:[t.jsx("p",{style:{color:"#7f8c8d",marginBottom:"15px"},children:"Por favor, proporciona un motivo para rechazar este sorteo. La tienda podr\xe1 ver este motivo."}),(0,t.jsxs)("div",{className:o().formGroup,children:[t.jsx("label",{children:"Motivo del Rechazo"}),t.jsx("textarea",{value:g,onChange:e=>f(e.target.value),placeholder:"Ingresa el motivo del rechazo...",disabled:j})]})]}),(0,t.jsxs)("div",{className:o().modalFooter,children:[t.jsx("button",{className:`${o().btn} ${o().btnSecondary}`,onClick:()=>{m(!1),f("")},disabled:j,children:"Cancelar"}),t.jsx("button",{className:`${o().btn} ${o().btnDanger}`,onClick:()=>w(c.id),disabled:j,children:j?"Procesando...":"Confirmar Rechazo"})]})]})})]})}},42466:(e,a,s)=>{"use strict";s.d(a,{d:()=>r});var t=s(10752);let r={getDashboardStats:async()=>(await t.x.get("/admin/dashboard/stats")).data,getPendingRaffles:async(e=50,a=0)=>(await t.x.get("/admin/raffles/pending",{params:{limit:e,offset:a}})).data,getActiveRaffles:async(e=50,a=0,s)=>(await t.x.get("/admin/raffles/active",{params:{limit:e,offset:a,...s&&{shopId:s}}})).data,getFinishedRaffles:async(e=50,a=0,s)=>(await t.x.get("/admin/raffles/finished",{params:{limit:e,offset:a,...s&&{shopId:s}}})).data,getRaffleDetail:async e=>(await t.x.get(`/admin/raffles/${e}`)).data,approveRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/approve`,{})).data,rejectRaffle:async(e,a)=>(await t.x.put(`/admin/raffles/${e}/reject`,{reason:a})).data,cancelRaffle:async(e,a)=>(await t.x.put(`/admin/raffles/${e}/cancel`,{reason:a})).data,executeRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/execute`,{})).data,getAllShops:async(e=50,a=0,s)=>(await t.x.get("/admin/shops",{params:{limit:e,offset:a,...s&&{status:s}}})).data,getShopDetail:async e=>(await t.x.get(`/admin/shops/${e}`)).data,changeShopStatus:async(e,a,s)=>(await t.x.put(`/admin/shops/${e}/status`,{status:a,...s&&{reason:s}})).data,getAllUsers:async(e=50,a=0,s)=>(await t.x.get("/admin/users",{params:{limit:e,offset:a,...s&&{role:s}}})).data,getUserDetail:async e=>(await t.x.get(`/admin/users/${e}`)).data,getAuditLogs:async(e=50,a=0,s)=>(await t.x.get("/admin/audit/logs",{params:{limit:e,offset:a,...s}})).data,getEntityAuditLogs:async(e,a)=>(await t.x.get(`/admin/audit/entity/${e}/${a}`)).data,getAllPayments:async(e=50,a=0,s)=>(await t.x.get("/admin/payments",{params:{limit:e,offset:a,...s?.status&&{status:s.status},...s?.userId&&{userId:s.userId},...s?.raffleId&&{raffleId:s.raffleId}}})).data,getPaymentDetail:async e=>(await t.x.get(`/admin/payments/${e}`)).data}},7110:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/admin/raffles/pending/page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[3591,8559,3352,4175,5562,8154,6415],()=>s(92146));module.exports=t})();