(()=>{var e={};e.id=6132,e.ids=[6132],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},69727:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),a(41729),a(83517),a(24198),a(12874);var t=a(27105),r=a(15265),i=a(90157),l=a.n(i),n=a(44665),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["admin",{children:["shops",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,41729)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/shops/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,83517)),"/Users/axelhernandez/Sorteos/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/admin/shops/page.tsx"],x="/admin/shops/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/shops/page",pathname:"/admin/shops",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},37065:(e,s,a)=>{Promise.resolve().then(a.bind(a,54168))},54168:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(19899),r=a(5507),i=a(42466),l=a(51881),n=a.n(l);function d(){let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[d,o]=(0,r.useState)(null),[c,x]=(0,r.useState)(0),[p,u]=(0,r.useState)(0),[h,m]=(0,r.useState)(""),[g,j]=(0,r.useState)(null),[f,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[S,N]=(0,r.useState)(""),[$,C]=(0,r.useState)(""),[q,P]=(0,r.useState)(!1),w=async()=>{try{l(!0);let e=await i.d.getAllShops(10,10*c,h||void 0);s(e.data),u(e.total),o(null)}catch(e){o(e.response?.data?.message||"Error al cargar tiendas"),console.error("Error:",e)}finally{l(!1)}},E=async e=>{try{let s=await i.d.getShopDetail(e);j(s),v(!0)}catch(e){alert("Error al cargar detalles de la tienda"),console.error("Error:",e)}},A=async()=>{if(!g||!S){alert("Por favor selecciona un estado");return}try{P(!0),await i.d.changeShopStatus(g.id,S,$),alert("Estado de la tienda actualizado exitosamente"),b(!1),N(""),C(""),v(!1),w()}catch(e){alert(e.response?.data?.message||"Error al cambiar estado"),console.error("Error:",e)}finally{P(!1)}};return a&&0===e.length?t.jsx("div",{style:{textAlign:"center",padding:"40px"},children:t.jsx("p",{children:"Cargando tiendas..."})}):(0,t.jsxs)("div",{children:[t.jsx("h2",{style:{marginBottom:"20px",color:"#2c3e50"},children:"Gesti\xf3n de Tiendas"}),d&&t.jsx("div",{style:{padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"20px"},children:d}),t.jsx("div",{className:n().tableHeader,style:{marginBottom:"20px"},children:t.jsx("div",{className:n().filterContainer,children:(0,t.jsxs)("select",{className:n().filterSelect,value:h,onChange:e=>{m(e.target.value),x(0)},children:[t.jsx("option",{value:"",children:"Todos los estados"}),t.jsx("option",{value:"pending",children:"Pendiente"}),t.jsx("option",{value:"verified",children:"Verificado"}),t.jsx("option",{value:"blocked",children:"Bloqueado"})]})})}),0===e.length?t.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"white",borderRadius:"8px"},children:t.jsx("p",{style:{color:"#7f8c8d"},children:"No hay tiendas"})}):(0,t.jsxs)("div",{className:n().tableContainer,children:[(0,t.jsxs)("table",{children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Nombre"}),t.jsx("th",{children:"Propietario"}),t.jsx("th",{children:"Email"}),t.jsx("th",{children:"Estado"}),t.jsx("th",{children:"Fecha Registro"}),t.jsx("th",{children:"Acciones"})]})}),t.jsx("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:e.name}),t.jsx("td",{children:e.user.name}),t.jsx("td",{children:e.user.email}),t.jsx("td",{children:t.jsx("span",{className:`${n().statusBadge} ${n()[e.status]}`,children:e.status})}),t.jsx("td",{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx("td",{children:t.jsx("div",{className:n().actionButtons,children:t.jsx("button",{className:`${n().btn} ${n().btnPrimary}`,onClick:()=>E(e.id),children:"Ver"})})})]},e.id))})]}),(0,t.jsxs)("div",{className:n().pagination,children:[t.jsx("button",{className:n().paginationBtn,disabled:0===c,onClick:()=>x(c-1),children:"← Anterior"}),(0,t.jsxs)("span",{style:{padding:"8px 12px"},children:["P\xe1gina ",c+1," de ",Math.ceil(p/10)]}),t.jsx("button",{className:n().paginationBtn,disabled:c>=Math.ceil(p/10)-1,onClick:()=>x(c+1),children:"Siguiente →"})]})]}),f&&g&&t.jsx("div",{className:`${n().modal} ${f?n().open:""}`,children:(0,t.jsxs)("div",{className:n().modalContent,children:[t.jsx("div",{className:n().modalHeader,children:t.jsx("h2",{children:"Detalles de la Tienda"})}),(0,t.jsxs)("div",{className:n().modalBody,children:[(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Nombre"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:g.name})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Propietario"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:g.user.name})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Email"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:g.user.email})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Estado Actual"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:t.jsx("span",{className:`${n().statusBadge} ${n()[g.status]}`,children:g.status})})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Descripci\xf3n"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:g.description||"N/A"})]}),(0,t.jsxs)("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",marginTop:"20px"},children:[t.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50"},children:"Estad\xedsticas"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[(0,t.jsxs)("div",{children:[t.jsx("small",{style:{color:"#7f8c8d"},children:"Total de Sorteos"}),t.jsx("p",{style:{margin:"5px 0",fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},children:g.stats.totalRaffles})]}),(0,t.jsxs)("div",{children:[t.jsx("small",{style:{color:"#7f8c8d"},children:"Sorteos Activos"}),t.jsx("p",{style:{margin:"5px 0",fontSize:"18px",fontWeight:"bold",color:"#27ae60"},children:g.stats.activeRaffles})]}),(0,t.jsxs)("div",{children:[t.jsx("small",{style:{color:"#7f8c8d"},children:"Sorteos Finalizados"}),t.jsx("p",{style:{margin:"5px 0",fontSize:"18px",fontWeight:"bold",color:"#3498db"},children:g.stats.finishedRaffles})]}),(0,t.jsxs)("div",{children:[t.jsx("small",{style:{color:"#7f8c8d"},children:"Sorteos Cancelados"}),t.jsx("p",{style:{margin:"5px 0",fontSize:"18px",fontWeight:"bold",color:"#e74c3c"},children:g.stats.cancelledRaffles})]})]})]})]}),(0,t.jsxs)("div",{className:n().modalFooter,children:[t.jsx("button",{className:`${n().btn} ${n().btnSecondary}`,onClick:()=>v(!1),disabled:q,children:"Cerrar"}),t.jsx("button",{className:`${n().btn} ${n().btnWarning}`,onClick:()=>b(!0),disabled:q,children:"Cambiar Estado"})]})]})}),y&&g&&t.jsx("div",{className:`${n().modal} ${y?n().open:""}`,children:(0,t.jsxs)("div",{className:n().modalContent,children:[t.jsx("div",{className:n().modalHeader,children:t.jsx("h2",{children:"Cambiar Estado de Tienda"})}),(0,t.jsxs)("div",{className:n().modalBody,children:[(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Estado Actual"}),t.jsx("p",{style:{margin:"5px 0",color:"#2c3e50"},children:t.jsx("span",{className:`${n().statusBadge} ${n()[g.status]}`,children:g.status})})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Nuevo Estado"}),(0,t.jsxs)("select",{value:S,onChange:e=>N(e.target.value),className:n().filterSelect,disabled:q,children:[t.jsx("option",{value:"",children:"Selecciona un estado"}),"pending"!==g.status&&t.jsx("option",{value:"pending",children:"Pendiente"}),"verified"!==g.status&&t.jsx("option",{value:"verified",children:"Verificado"}),"blocked"!==g.status&&t.jsx("option",{value:"blocked",children:"Bloqueado"})]})]}),(0,t.jsxs)("div",{className:n().formGroup,children:[t.jsx("label",{children:"Motivo (Opcional)"}),t.jsx("textarea",{value:$,onChange:e=>C(e.target.value),placeholder:"Ingresa el motivo del cambio de estado...",disabled:q})]})]}),(0,t.jsxs)("div",{className:n().modalFooter,children:[t.jsx("button",{className:`${n().btn} ${n().btnSecondary}`,onClick:()=>{b(!1),N(""),C("")},disabled:q,children:"Cancelar"}),t.jsx("button",{className:`${n().btn} ${n().btnWarning}`,onClick:A,disabled:q||!S,children:q?"Procesando...":"Confirmar Cambio"})]})]})})]})}},42466:(e,s,a)=>{"use strict";a.d(s,{d:()=>r});var t=a(10752);let r={getDashboardStats:async()=>(await t.x.get("/admin/dashboard/stats")).data,getPendingRaffles:async(e=50,s=0)=>(await t.x.get("/admin/raffles/pending",{params:{limit:e,offset:s}})).data,getActiveRaffles:async(e=50,s=0,a)=>(await t.x.get("/admin/raffles/active",{params:{limit:e,offset:s,...a&&{shopId:a}}})).data,getFinishedRaffles:async(e=50,s=0,a)=>(await t.x.get("/admin/raffles/finished",{params:{limit:e,offset:s,...a&&{shopId:a}}})).data,getRaffleDetail:async e=>(await t.x.get(`/admin/raffles/${e}`)).data,approveRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/approve`,{})).data,rejectRaffle:async(e,s)=>(await t.x.put(`/admin/raffles/${e}/reject`,{reason:s})).data,cancelRaffle:async(e,s)=>(await t.x.put(`/admin/raffles/${e}/cancel`,{reason:s})).data,executeRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/execute`,{})).data,getAllShops:async(e=50,s=0,a)=>(await t.x.get("/admin/shops",{params:{limit:e,offset:s,...a&&{status:a}}})).data,getShopDetail:async e=>(await t.x.get(`/admin/shops/${e}`)).data,changeShopStatus:async(e,s,a)=>(await t.x.put(`/admin/shops/${e}/status`,{status:s,...a&&{reason:a}})).data,getAllUsers:async(e=50,s=0,a)=>(await t.x.get("/admin/users",{params:{limit:e,offset:s,...a&&{role:a}}})).data,getUserDetail:async e=>(await t.x.get(`/admin/users/${e}`)).data,getAuditLogs:async(e=50,s=0,a)=>(await t.x.get("/admin/audit/logs",{params:{limit:e,offset:s,...a}})).data,getEntityAuditLogs:async(e,s)=>(await t.x.get(`/admin/audit/entity/${e}/${s}`)).data,getAllPayments:async(e=50,s=0,a)=>(await t.x.get("/admin/payments",{params:{limit:e,offset:s,...a?.status&&{status:a.status},...a?.userId&&{userId:a.userId},...a?.raffleId&&{raffleId:a.raffleId}}})).data,getPaymentDetail:async e=>(await t.x.get(`/admin/payments/${e}`)).data}},41729:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/admin/shops/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[3591,8559,3352,4175,5562,8154,6415],()=>a(69727));module.exports=t})();