(()=>{var e={};e.id=4011,e.ids=[4011],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},56727:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u}),t(25943),t(24198),t(12874);var s=t(27105),a=t(15265),o=t(90157),i=t.n(o),n=t(44665),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let u=["",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,25943)),"/Users/axelhernandez/Sorteos/frontend/src/app/register/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/register/page.tsx"],c="/register/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/register/page",pathname:"/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},57800:(e,r,t)=>{Promise.resolve().then(t.bind(t,81364))},1753:(e,r,t)=>{Promise.resolve().then(t.bind(t,47894))},4104:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},43993:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var s=t(19899),a=t(18154),o=t(54175);let i={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var n=t(11648),l=t.n(n);function u({size:e="medium",showText:r=!0,className:t="",href:n="/"}){let u=(0,s.jsxs)("div",{className:`${l().logo} ${l()[e]} ${t}`,children:[s.jsx(a.default,{src:i,alt:"TIKETEA ONLINE",width:"small"===e?40:"medium"===e?60:80,height:"small"===e?40:"medium"===e?60:80,className:l().logoImage,priority:!0}),r&&s.jsx("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return n?s.jsx(o.default,{href:n,className:l().logoLink,children:u}):u}},81364:(e,r,t)=>{"use strict";function s(){return null}t.d(r,{default:()=>s}),t(5507),t(82986),t(26379)},47894:(e,r,t)=>{"use strict";t.d(r,{default:()=>p});var s=t(19899),a=t(5507),o=t(54175),i=t(76153),n=t(55562),l=t(16012),u=t(38442),d=t(43993),c=t(37739),m=t.n(c);function p(){let e=(0,i.useRouter)(),{setUser:r,setToken:t}=(0,u.t)(),[c,p]=(0,a.useState)({name:"",email:"",password:"",role:"user",shopName:""}),[h,g]=(0,a.useState)(""),[x,_]=(0,a.useState)(!1),f=e=>{let{name:r,value:t}=e.target;p(e=>({...e,[r]:t}))},b=async s=>{if(s.preventDefault(),g(""),"shop"===c.role&&!c.shopName.trim()){g("El nombre de la tienda es requerido");return}_(!0);try{let s={name:c.name,email:c.email,password:c.password,role:c.role,shopName:"shop"===c.role?c.shopName.trim():void 0},{user:a,token:o}=await l.Y.register(s);t(o),r(a),setTimeout(()=>{e.push("/dashboard")},100)}catch(e){g(e.message||"Error al registrarse")}finally{_(!1)}};return s.jsx("div",{className:m().container,children:(0,s.jsxs)("div",{className:m().formCard,children:[s.jsx(d.Z,{size:"medium",className:m().logo}),s.jsx("h2",{className:m().title,children:"Crear Cuenta"}),s.jsx("p",{className:m().subtitle,children:"\xdanete a nuestra plataforma y comienza a participar"}),h&&s.jsx("div",{className:m().errorMessage,children:h}),(0,s.jsxs)("form",{onSubmit:b,className:m().form,children:[(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"name",className:m().label,children:[s.jsx(n.fzv,{className:m().labelIcon}),"Nombre"]}),s.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:f,required:!0,minLength:3,className:m().input,placeholder:"Tu nombre completo"})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"email",className:m().label,children:[s.jsx(n.Imn,{className:m().labelIcon}),"Email"]}),s.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:f,required:!0,className:m().input,placeholder:"tu@email.com"})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"password",className:m().label,children:[s.jsx(n.UIZ,{className:m().labelIcon}),"Contrase\xf1a"]}),s.jsx("input",{type:"password",id:"password",name:"password",value:c.password,onChange:f,required:!0,minLength:8,className:m().input,placeholder:"M\xednimo 8 caracteres"})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{htmlFor:"role",className:m().label,children:"Tipo de cuenta"}),(0,s.jsxs)("select",{id:"role",name:"role",value:c.role,onChange:f,className:m().select,children:[s.jsx("option",{value:"user",children:"Usuario"}),s.jsx("option",{value:"shop",children:"Tienda"})]})]}),"shop"===c.role&&(0,s.jsxs)("div",{className:m().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"shopName",className:m().label,children:[s.jsx(n.x8h,{className:m().labelIcon}),"Nombre de la Tienda"]}),s.jsx("input",{type:"text",id:"shopName",name:"shopName",value:c.shopName,onChange:f,required:!0,minLength:3,className:m().input,placeholder:"Ej: Mi Tienda de Sorteos"}),s.jsx("small",{className:m().helpText,children:"Este ser\xe1 el nombre de tu tienda en la plataforma"})]}),s.jsx("button",{type:"submit",disabled:x,className:m().submitButton,children:x?"Registrando...":(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.zy7,{className:m().buttonIcon}),"Crear Cuenta"]})})]}),s.jsx("div",{className:m().footer,children:(0,s.jsxs)("p",{className:m().footerText,children:["\xbfYa tienes una cuenta?"," ",s.jsx(o.default,{href:"/login",className:m().footerLink,children:"Inicia sesi\xf3n aqu\xed"})]})})]})})}},26379:(e,r,t)=>{"use strict";let s;t.d(r,{I8:()=>u,db:()=>l});var a=t(3827),o=t(82986),i=t(31027),n=t(80549);s=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyCROuDbFChzWrRSXQ42lih56oLEA1hjne4",authDomain:"sorteo-b8fb0.firebaseapp.com",projectId:"sorteo-b8fb0",storageBucket:"sorteo-b8fb0.firebasestorage.app",messagingSenderId:"58395659334",appId:"1:58395659334:web:58c8f46dab380710eb4e47"}):(0,a.C6)()[0];let l=(0,o.ad)(s);(0,i.cF)(s);let u=(0,n.v0)(s)},16012:(e,r,t)=>{"use strict";t.d(r,{Y:()=>l});var s=t(80549),a=t(82986),o=t(26379),i=t(1260);let n=async e=>{try{let r=await (0,a.getDoc)((0,a.doc)(o.db,"users",e.uid));if(!r.exists())return{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER};let t=r.data();return{id:e.uid,name:t.name||e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:t.role||i.i.USER}}catch(r){return console.error("Error converting Firebase user:",r),{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER}}},l={async register(e){try{let r=(await (0,s.Xb)(o.I8,e.email,e.password)).user;e.name&&await (0,s.ck)(r,{displayName:e.name});let t=await r.getIdToken(),l={name:e.name,email:e.email,role:e.role,createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()};if(e.role===i.i.SHOP&&e.shopName){let t={userId:r.uid,name:e.shopName,description:"",status:"pending",createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()},s=await (0,a.ET)((0,a.collection)(o.db,"shops"),t);l.shopId=s.id,await (0,a.pl)((0,a.doc)(o.db,"users",r.uid),l)}else await (0,a.pl)((0,a.doc)(o.db,"users",r.uid),l);return{user:await n(r),token:t}}catch(r){console.error("Error registering user:",r);let e="Error al registrar usuario";throw"auth/email-already-in-use"===r.code?e="Este email ya est\xe1 registrado":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/weak-password"===r.code?e="La contrase\xf1a debe tener al menos 6 caracteres":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async login(e){try{let r=(await (0,s.e5)(o.I8,e.email,e.password)).user,t=await r.getIdToken();return{user:await n(r),token:t}}catch(r){console.error("Error logging in:",r);let e="Error al iniciar sesi\xf3n";throw"auth/user-not-found"===r.code?e="Usuario no encontrado":"auth/wrong-password"===r.code?e="Contrase\xf1a incorrecta":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/user-disabled"===r.code?e="Usuario deshabilitado":"auth/too-many-requests"===r.code?e="Demasiados intentos. Intenta m\xe1s tarde":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async logout(){try{await (0,s.w7)(o.I8)}catch(e){throw console.error("Error logging out:",e),e}},async getCurrentUser(){try{let e=o.I8.currentUser;if(!e)return null;return await n(e)}catch(e){return console.error("Error getting current user:",e),null}},async getCurrentUserToken(){try{let e=o.I8.currentUser;if(!e)return null;return await e.getIdToken()}catch(e){return console.error("Error getting token:",e),null}},onAuthStateChanged:e=>(0,s.Aj)(o.I8,async r=>{r?e(await n(r)):e(null)})}},38442:(e,r,t)=>{"use strict";t.d(r,{t:()=>i});var s=t(24978),a=t(31460),o=t(16012);let i=(0,s.Ue)()((0,a.tJ)((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:r=>e({user:r,isAuthenticated:!!r}),setToken:r=>{r?localStorage.setItem("token",r):localStorage.removeItem("token"),e({token:r})},setIsLoading:r=>e({isLoading:r}),setError:r=>e({error:r}),logout:async()=>{try{await o.Y.logout()}catch(e){console.error("Error logging out:",e)}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}},refreshToken:async()=>{try{let e=await o.Y.getCurrentUserToken();e&&r().setToken(e)}catch(e){console.error("Error refreshing token:",e)}}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},1260:(e,r,t)=>{"use strict";var s;t.d(r,{i:()=>s}),function(e){e.ADMIN="admin",e.SHOP="shop",e.USER="user"}(s||(s={}))},76153:(e,r,t)=>{"use strict";var s=t(81545);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},11648:e=>{e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},37739:e=>{e.exports={container:"RegisterForm_container__PXItq",logo:"RegisterForm_logo__Oe7l8",formCard:"RegisterForm_formCard__85zJy",title:"RegisterForm_title__5_yhQ",subtitle:"RegisterForm_subtitle__ferAR",form:"RegisterForm_form__uphLJ",formGroup:"RegisterForm_formGroup__lN_hv",label:"RegisterForm_label__pcttj",labelIcon:"RegisterForm_labelIcon__KEcvy",input:"RegisterForm_input___RUoH",select:"RegisterForm_select__RUIMH",helpText:"RegisterForm_helpText__V7TVV",submitButton:"RegisterForm_submitButton__ao_5X",buttonIcon:"RegisterForm_buttonIcon__cMnsi",errorMessage:"RegisterForm_errorMessage__Uoa9H",footer:"RegisterForm_footer__24861",footerText:"RegisterForm_footerText__zg9YR",footerLink:"RegisterForm_footerLink__AuLU5"}},24198:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>o});var s=t(35023);t(91641);let a=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/MakeAdminScript.tsx#default`),o={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return s.jsx("html",{lang:"es",children:(0,s.jsxs)("body",{children:[e,s.jsx(a,{})]})})}},25943:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(35023);let a=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/RegisterForm.tsx#default`);function o(){return s.jsx(a,{})}},91641:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[3591,3352,4175,5562,8154],()=>t(56727));module.exports=s})();