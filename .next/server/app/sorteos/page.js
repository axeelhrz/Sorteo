(()=>{var e={};e.id=4372,e.ids=[4372],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},4783:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>_,tree:()=>c}),t(59333),t(24198),t(12874);var a=t(27105),r=t(15265),o=t(90157),l=t.n(o),n=t(44665),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(s,i);let c=["",{children:["sorteos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59333)),"/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24198)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/page.tsx"],u="/sorteos/page",p={require:t,loadChunk:()=>Promise.resolve()},_=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/sorteos/page",pathname:"/sorteos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64634:(e,s,t)=>{Promise.resolve().then(t.bind(t,47391))},47391:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(19899),r=t(5507),o=t(54175),l=t(18154),n=t(65373),i=t(54613),c=t.n(i);function d({raffle:e}){let s=e.soldTickets/e.totalTickets*100,t=e.totalTickets-e.soldTickets;return a.jsx(o.default,{href:`/sorteos/${e.id}`,children:(0,a.jsxs)("div",{className:c().card,children:[(0,a.jsxs)("div",{className:c().imageContainer,children:[e.product?.mainImage?a.jsx(l.default,{src:e.product.mainImage,alt:e.product.name,fill:!0,className:c().image,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):a.jsx("div",{className:c().imagePlaceholder,children:a.jsx("span",{children:"Sin imagen"})}),(()=>{switch(e.status){case n.r.ACTIVE:return a.jsx("span",{className:`${c().badge} ${c().badgeActive}`,children:"Activo"});case n.r.SOLD_OUT:return a.jsx("span",{className:`${c().badge} ${c().badgeSoldOut}`,children:"Agotado"});case n.r.FINISHED:return a.jsx("span",{className:`${c().badge} ${c().badgeFinished}`,children:"Finalizado"});default:return null}})()]}),(0,a.jsxs)("div",{className:c().content,children:[(0,a.jsxs)("div",{className:c().productInfo,children:[a.jsx("h3",{className:c().productName,children:e.product?.name||"Producto"}),a.jsx("p",{className:c().shopName,children:e.shop?.name||"Tienda"})]}),(0,a.jsxs)("div",{className:c().value,children:[a.jsx("span",{className:c().valueLabel,children:"Valor del producto"}),(0,a.jsxs)("span",{className:c().valueAmount,children:["S/ ",Number(e.productValue).toFixed(2)]})]}),(0,a.jsxs)("div",{className:c().progressSection,children:[(0,a.jsxs)("div",{className:c().progressHeader,children:[a.jsx("span",{className:c().progressLabel,children:"Tickets vendidos"}),(0,a.jsxs)("span",{className:c().progressCount,children:[e.soldTickets," de ",e.totalTickets]})]}),a.jsx("div",{className:c().progressBar,children:a.jsx("div",{className:c().progressFill,style:{width:`${Math.min(s,100)}%`}})}),(0,a.jsxs)("div",{className:c().progressFooter,children:[a.jsx("span",{className:c().remainingTickets,children:t>0?`${t} tickets disponibles`:"Todos los tickets vendidos"}),(0,a.jsxs)("span",{className:c().progressPercent,children:[Math.round(s),"%"]})]})]}),a.jsx("button",{className:c().ctaButton,children:e.status===n.r.ACTIVE?"Ver sorteo":"Ver detalles"})]})]})})}var u=t(63653),p=t.n(u);function _({onFiltersChange:e,categories:s=[],shops:t=[],isLoading:o=!1}){let[l,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[_,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[v,j]=(0,r.useState)("newest"),[b,N]=(0,r.useState)(!1),R=(0,r.useCallback)(()=>{e({search:l||void 0,category:i||void 0,shopId:d||void 0,status:_||void 0,minValue:m?parseFloat(m):void 0,maxValue:g?parseFloat(g):void 0,sortBy:v,page:1})},[l,i,d,_,m,g,v,e]);return(0,a.jsxs)("div",{className:p().container,children:[a.jsx("form",{onSubmit:e=>{e.preventDefault(),R()},className:p().searchForm,children:(0,a.jsxs)("div",{className:p().searchInputWrapper,children:[a.jsx("input",{type:"text",placeholder:"Buscar por nombre de producto, sorteo o tienda...",value:l,onChange:e=>n(e.target.value),className:p().searchInput,disabled:o}),a.jsx("button",{type:"submit",className:p().searchButton,disabled:o,children:a.jsx("span",{children:"\uD83D\uDD0D"})})]})}),(0,a.jsxs)("div",{className:p().controlsRow,children:[(0,a.jsxs)("div",{className:p().sortControl,children:[a.jsx("label",{htmlFor:"sortBy",className:p().label,children:"Ordenar por:"}),(0,a.jsxs)("select",{id:"sortBy",value:v,onChange:s=>{j(s.target.value),e({sortBy:s.target.value,page:1})},className:p().select,disabled:o,children:[a.jsx("option",{value:"newest",children:"M\xe1s recientes"}),a.jsx("option",{value:"closest",children:"M\xe1s cerca de completarse"}),a.jsx("option",{value:"price-asc",children:"Menor precio"}),a.jsx("option",{value:"price-desc",children:"Mayor precio"})]})]}),a.jsx("button",{type:"button",className:`${p().toggleButton} ${b?p().active:""}`,onClick:()=>N(!b),disabled:o,children:b?"✕ Cerrar filtros":"⚙️ M\xe1s filtros"})]}),b&&(0,a.jsxs)("div",{className:p().advancedFilters,children:[s.length>0&&(0,a.jsxs)("div",{className:p().filterGroup,children:[a.jsx("label",{htmlFor:"category",className:p().label,children:"Categor\xeda"}),(0,a.jsxs)("select",{id:"category",value:i,onChange:e=>c(e.target.value),className:p().select,disabled:o,children:[a.jsx("option",{value:"",children:"Todas las categor\xedas"}),s.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),t.length>0&&(0,a.jsxs)("div",{className:p().filterGroup,children:[a.jsx("label",{htmlFor:"shop",className:p().label,children:"Tienda"}),(0,a.jsxs)("select",{id:"shop",value:d,onChange:e=>u(e.target.value),className:p().select,disabled:o,children:[a.jsx("option",{value:"",children:"Todas las tiendas"}),t.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:p().filterGroup,children:[a.jsx("label",{htmlFor:"status",className:p().label,children:"Estado"}),(0,a.jsxs)("select",{id:"status",value:_,onChange:e=>h(e.target.value),className:p().select,disabled:o,children:[a.jsx("option",{value:"",children:"Todos los estados"}),a.jsx("option",{value:"active",children:"Activo"}),a.jsx("option",{value:"paused",children:"Pausado"}),a.jsx("option",{value:"sold_out",children:"Agotado"}),a.jsx("option",{value:"finished",children:"Finalizado"})]})]}),(0,a.jsxs)("div",{className:p().priceRange,children:[(0,a.jsxs)("div",{className:p().filterGroup,children:[a.jsx("label",{htmlFor:"minValue",className:p().label,children:"Precio m\xednimo (S/)"}),a.jsx("input",{id:"minValue",type:"number",min:"0",step:"0.01",placeholder:"0",value:m,onChange:e=>x(e.target.value),className:p().input,disabled:o})]}),(0,a.jsxs)("div",{className:p().filterGroup,children:[a.jsx("label",{htmlFor:"maxValue",className:p().label,children:"Precio m\xe1ximo (S/)"}),a.jsx("input",{id:"maxValue",type:"number",min:"0",step:"0.01",placeholder:"Sin l\xedmite",value:g,onChange:e=>f(e.target.value),className:p().input,disabled:o})]})]}),(0,a.jsxs)("div",{className:p().filterActions,children:[a.jsx("button",{type:"button",onClick:R,className:p().applyButton,disabled:o,children:"Aplicar filtros"}),a.jsx("button",{type:"button",onClick:()=>{n(""),c(""),u(""),h(""),x(""),f(""),j("newest"),e({sortBy:"newest",page:1})},className:p().resetButton,disabled:o,children:"Limpiar"})]})]})]})}var h=t(80078),m=t.n(h);function x({type:e,onRetry:s}){let t=(()=>{switch(e){case"no-raffles":return{icon:"\uD83C\uDFB2",title:"No hay sorteos activos",description:"No hay sorteos activos en este momento. Volv\xe9 pronto o segu\xed a nuestras tiendas para estar al tanto de los pr\xf3ximos lanzamientos.",showRetry:!1};case"no-results":return{icon:"\uD83D\uDD0D",title:"No encontramos sorteos",description:"No encontramos sorteos que coincidan con tu b\xfasqueda. Intenta con otros filtros o t\xe9rminos de b\xfasqueda.",showRetry:!1};case"error":return{icon:"⚠️",title:"Ocurri\xf3 un problema",description:"Ocurri\xf3 un problema al cargar los sorteos. Intenta nuevamente.",showRetry:!0};default:return{icon:"\uD83D\uDCE6",title:"Sin datos",description:"No hay datos disponibles.",showRetry:!1}}})();return(0,a.jsxs)("div",{className:m().container,children:[a.jsx("div",{className:m().icon,children:t.icon}),a.jsx("h2",{className:m().title,children:t.title}),a.jsx("p",{className:m().description,children:t.description}),t.showRetry&&s&&a.jsx("button",{onClick:s,className:m().retryButton,children:"Reintentar"})]})}var g=t(17484),f=t(83730),v=t(70654),j=t.n(v);function b(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[m,v]=(0,r.useState)(1),[b,N]=(0,r.useState)(1),[R,C]=(0,r.useState)(0),[y,F]=(0,r.useState)({sortBy:"newest",page:1,limit:12}),S=(0,r.useCallback)(async e=>{l(!0),i(null);try{console.log("\uD83D\uDD0D Cargando sorteos activos con filtros:",e);let t=await f.Z.getActiveRaffles(e);console.log("✅ Sorteos activos cargados:",t.data.length,"de",t.total),s(t.data),N(t.totalPages),v(t.page),C(t.total)}catch(e){console.error("❌ Error loading raffles:",e),i("No pudimos cargar los sorteos. Intenta nuevamente."),s([])}finally{l(!1)}},[]),B=e=>{let s={...y,page:e};F(s),S(s),window.scrollTo({top:0,behavior:"smooth"})};return(0,a.jsxs)("main",{className:j().container,children:[(0,a.jsxs)("div",{className:j().header,children:[a.jsx("h1",{className:j().title,children:"Sorteos Disponibles"}),a.jsx("p",{className:j().subtitle,children:"Descubre incre\xedbles premios y particip\xe1 en nuestros sorteos"})]}),a.jsx(_,{onFiltersChange:e=>{let s={...y,...e,page:e.page||1};F(s),S(s)},categories:c,shops:p,isLoading:t}),!t&&e.length>0&&a.jsx("div",{className:j().resultsInfo,children:(0,a.jsxs)("p",{children:["Mostrando ",a.jsx("strong",{children:e.length})," de ",a.jsx("strong",{children:R})," sorteos"]})}),t&&(0,a.jsxs)("div",{className:j().loadingContainer,children:[a.jsx("div",{className:j().spinner}),a.jsx("p",{children:"Cargando sorteos..."})]}),n&&!t&&a.jsx(x,{type:"error",onRetry:()=>{S(y)}}),!t&&!n&&0===e.length&&a.jsx(x,{type:y.search?"no-results":"no-raffles"}),!t&&!n&&e.length>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:j().grid,children:e.map(e=>a.jsx(d,{raffle:e},e.id))}),b>1&&(0,a.jsxs)("div",{className:j().pagination,children:[a.jsx("button",{onClick:()=>B(m-1),disabled:1===m,className:j().paginationButton,children:"← Anterior"}),(0,a.jsxs)("div",{className:j().pageInfo,children:["P\xe1gina ",a.jsx("strong",{children:m})," de ",a.jsx("strong",{children:b})]}),a.jsx("button",{onClick:()=>B(m+1),disabled:m===b,className:j().paginationButton,children:"Siguiente →"})]})]}),a.jsx(g.Z,{}),(0,a.jsxs)("div",{className:j().ctaSection,children:[a.jsx("h2",{children:"\xbfEres una tienda?"}),a.jsx("p",{children:"Crea sorteos y llega a miles de clientes potenciales"}),a.jsx(o.default,{href:"/register",children:a.jsx("button",{className:j().ctaButton,children:"Registra tu tienda"})})]})]})}},70654:e=>{e.exports={container:"sorteos_container__Zk7Aa",header:"sorteos_header__PTomZ",title:"sorteos_title__MQ79T",subtitle:"sorteos_subtitle__QkmiF",resultsInfo:"sorteos_resultsInfo__Yrpxw",loadingContainer:"sorteos_loadingContainer__R1tkw",spinner:"sorteos_spinner__ZI0IQ",spin:"sorteos_spin__0JpLo",grid:"sorteos_grid__F5Wdi",pagination:"sorteos_pagination__3jkV_",paginationButton:"sorteos_paginationButton__JYbUW",pageInfo:"sorteos_pageInfo__hUa1X",ctaSection:"sorteos_ctaSection__h4E4v",ctaButton:"sorteos_ctaButton__4UQz6"}},80078:e=>{e.exports={container:"EmptyState_container__zMe2_",icon:"EmptyState_icon__EnNXL",bounce:"EmptyState_bounce__3_AL_",title:"EmptyState_title__iSbK4",description:"EmptyState_description__gMPX_",retryButton:"EmptyState_retryButton__R4sHp"}},54613:e=>{e.exports={card:"RaffleCard_card__mM1X5",imageContainer:"RaffleCard_imageContainer__RYD9p",image:"RaffleCard_image__nztJ2",imagePlaceholder:"RaffleCard_imagePlaceholder__3y5e2",badge:"RaffleCard_badge__PsSvU",badgeActive:"RaffleCard_badgeActive__AE7YM",badgeSoldOut:"RaffleCard_badgeSoldOut__v1sD0",badgeFinished:"RaffleCard_badgeFinished__cJ3RJ",content:"RaffleCard_content__OD30v",productInfo:"RaffleCard_productInfo__f2P1l",productName:"RaffleCard_productName__3N56M",shopName:"RaffleCard_shopName__xTn5w",value:"RaffleCard_value__89KKu",valueLabel:"RaffleCard_valueLabel__hkGuj",valueAmount:"RaffleCard_valueAmount__1maen",progressSection:"RaffleCard_progressSection__nvpkY",progressHeader:"RaffleCard_progressHeader__U37Az",progressLabel:"RaffleCard_progressLabel__rzSO4",progressCount:"RaffleCard_progressCount__LYv1p",progressBar:"RaffleCard_progressBar__QdWZ6",progressFill:"RaffleCard_progressFill__vMDok",progressFooter:"RaffleCard_progressFooter__L_ynv",remainingTickets:"RaffleCard_remainingTickets__ob2rW",progressPercent:"RaffleCard_progressPercent__NGvIs",ctaButton:"RaffleCard_ctaButton__gJ2FM"}},63653:e=>{e.exports={container:"RaffleFilters_container__4lZma",searchForm:"RaffleFilters_searchForm__np5lG",searchInputWrapper:"RaffleFilters_searchInputWrapper__cxPZc",searchInput:"RaffleFilters_searchInput__wpNOR",searchButton:"RaffleFilters_searchButton__pCBjk",controlsRow:"RaffleFilters_controlsRow__YFkSb",sortControl:"RaffleFilters_sortControl__cC9Aw",label:"RaffleFilters_label__oQ32V",select:"RaffleFilters_select__msgdj",toggleButton:"RaffleFilters_toggleButton__5POTX",active:"RaffleFilters_active__Rfg8z",advancedFilters:"RaffleFilters_advancedFilters__fF6ZR",slideDown:"RaffleFilters_slideDown__nLnVp",filterGroup:"RaffleFilters_filterGroup__ioUj8",input:"RaffleFilters_input__XcgaU",priceRange:"RaffleFilters_priceRange__RiI4W",filterActions:"RaffleFilters_filterActions__4Mltr",applyButton:"RaffleFilters_applyButton__m2J1k",resetButton:"RaffleFilters_resetButton__fbwWs"}},59333:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[3591,4175,5562,8154,9311],()=>t(4783));module.exports=a})();