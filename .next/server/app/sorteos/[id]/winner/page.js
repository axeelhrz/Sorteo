(()=>{var e={};e.id=1842,e.ids=[1842],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6617:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>l}),s(57254),s(22399),s(12874);var n=s(27105),t=s(15265),a=s(90157),i=s.n(a),o=s(44665),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(r,c);let l=["",{children:["sorteos",{children:["[id]",{children:["winner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,57254)),"/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/[id]/winner/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22399)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/[id]/winner/page.tsx"],h="/sorteos/[id]/winner/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/sorteos/[id]/winner/page",pathname:"/sorteos/[id]/winner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7236:()=>{},36507:(e,r,s)=>{Promise.resolve().then(s.bind(s,69622))},4104:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,33817,23)),Promise.resolve().then(s.t.bind(s,19323,23)),Promise.resolve().then(s.t.bind(s,52204,23)),Promise.resolve().then(s.t.bind(s,60820,23)),Promise.resolve().then(s.t.bind(s,55915,23)),Promise.resolve().then(s.t.bind(s,81611,23))},69622:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p});var n=s(19899),t=s(5507),a=s(54175),i=s(18154),o=s(76153),c=s(55562);s(83730);var l=s(80760),d=s(65373);s(10752);var h=s(14066),u=s.n(h);function p(){let e=(0,o.useParams)().id,{user:r}=(0,l.a)(),[s,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(!0),[_,x]=(0,t.useState)(null),[g,w]=(0,t.useState)(null),[N,j]=(0,t.useState)([]),[f,v]=(0,t.useState)(!1);return p?n.jsx("main",{className:u().container,children:(0,n.jsxs)("div",{className:u().loadingContainer,children:[n.jsx("div",{className:u().spinner}),n.jsx("p",{children:"Cargando informaci\xf3n del ganador..."})]})}):_||!s?n.jsx("main",{className:u().container,children:(0,n.jsxs)("div",{className:u().errorContainer,children:[n.jsx(c.jRj,{className:u().errorIcon}),n.jsx("h1",{className:u().errorTitle,children:"Sorteo no encontrado"}),n.jsx("p",{className:u().errorDescription,children:"El sorteo que buscas no existe o no est\xe1 disponible en este momento."}),n.jsx(a.default,{href:"/sorteos",children:n.jsx("button",{className:u().backButton,children:"Volver al listado"})})]})}):s.status!==d.r.FINISHED?n.jsx("main",{className:u().container,children:(0,n.jsxs)("div",{className:u().errorContainer,children:[n.jsx(c.TCC,{className:u().errorIcon}),n.jsx("h1",{className:u().errorTitle,children:"Sorteo a\xfan no finalizado"}),n.jsx("p",{className:u().errorDescription,children:"Este sorteo a\xfan no ha finalizado. Vuelve cuando el sorteo est\xe9 completo."}),n.jsx(a.default,{href:`/sorteos/${e}`,children:n.jsx("button",{className:u().backButton,children:"Ver sorteo"})})]})}):s.winnerTicketId?(0,n.jsxs)("main",{className:u().container,children:[n.jsx(a.default,{href:`/sorteos/${e}`,className:u().backLink,children:"â† Volver al sorteo"}),n.jsx("div",{className:u().heroSection,children:n.jsx("div",{className:u().heroContent,children:f?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:u().winnerIcon,children:n.jsx(c.HR2,{})}),n.jsx("h1",{className:u().heroTitle,children:"\xa1Felicidades! Eres el ganador"}),(0,n.jsxs)("p",{className:u().heroSubtitle,children:["Has ganado el sorteo de ",n.jsx("strong",{children:s.product?.name})]})]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:u().winnerIcon,children:n.jsx(c._rq,{})}),n.jsx("h1",{className:u().heroTitle,children:"Sorteo finalizado"}),(0,n.jsxs)("p",{className:u().heroSubtitle,children:["El ganador del sorteo de ",n.jsx("strong",{children:s.product?.name})," ha sido seleccionado"]})]})})}),(0,n.jsxs)("div",{className:u().content,children:[(0,n.jsxs)("div",{className:u().leftColumn,children:[(0,n.jsxs)("div",{className:u().productCard,children:[s.product?.mainImage?n.jsx("div",{className:u().imageContainer,children:n.jsx(i.default,{src:s.product.mainImage,alt:s.product.name,fill:!0,className:u().image,priority:!0})}):n.jsx("div",{className:u().imagePlaceholder,children:n.jsx("span",{children:"Sin imagen disponible"})}),(0,n.jsxs)("div",{className:u().productInfo,children:[n.jsx("h2",{className:u().productName,children:s.product?.name}),n.jsx("p",{className:u().productDescription,children:s.product?.description}),(0,n.jsxs)("div",{className:u().valueBox,children:[n.jsx("span",{className:u().valueLabel,children:"Valor del producto"}),(0,n.jsxs)("span",{className:u().valueAmount,children:["S/ ",Number(s.productValue).toFixed(2)]})]})]})]}),(0,n.jsxs)("div",{className:u().shopCard,children:[n.jsx("h3",{className:u().shopTitle,children:"Tienda"}),(0,n.jsxs)("div",{className:u().shopInfo,children:[s.shop?.logo&&n.jsx(i.default,{src:s.shop.logo,alt:s.shop.name,width:48,height:48,className:u().shopLogo}),(0,n.jsxs)("div",{className:u().shopDetails,children:[n.jsx("h4",{className:u().shopName,children:s.shop?.name}),s.shop?.status==="verified"&&(0,n.jsxs)("span",{className:u().verifiedBadge,children:[n.jsx(c._rq,{className:u().verifiedIcon}),"Tienda verificada"]})]})]}),s.shop?.publicEmail&&(0,n.jsxs)("p",{className:u().shopContact,children:[n.jsx("strong",{children:"Contacto:"})," ",s.shop.publicEmail]}),s.shop?.phone&&(0,n.jsxs)("p",{className:u().shopContact,children:[n.jsx("strong",{children:"Tel\xe9fono:"})," ",s.shop.phone]})]})]}),(0,n.jsxs)("div",{className:u().rightColumn,children:[(0,n.jsxs)("div",{className:`${u().winnerCard} ${f?u().winnerCardHighlight:""}`,children:[n.jsx("div",{className:u().winnerHeader,children:n.jsx("h2",{className:u().winnerTitle,children:f?(0,n.jsxs)(n.Fragment,{children:[n.jsx(c._rq,{className:u().titleIcon}),"Tu ticket ganador"]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.HR2,{className:u().titleIcon}),"Ticket ganador"]})})}),(0,n.jsxs)("div",{className:u().winnerTicketDisplay,children:[(0,n.jsxs)("div",{className:u().ticketNumberContainer,children:[n.jsx("span",{className:u().ticketLabel,children:"N\xfamero de ticket"}),(0,n.jsxs)("span",{className:u().ticketNumber,children:["#",g?.number||"N/A"]})]}),g?.user&&(0,n.jsxs)("div",{className:u().winnerUserInfo,children:[n.jsx("p",{className:u().winnerUserLabel,children:"Ganador"}),n.jsx("p",{className:u().winnerUserName,children:g.user.name}),f&&n.jsx("p",{className:u().winnerUserEmail,children:g.user.email})]}),s.raffleExecutedAt&&(0,n.jsxs)("div",{className:u().executionInfo,children:[n.jsx("p",{className:u().executionLabel,children:"Fecha de ejecuci\xf3n"}),n.jsx("p",{className:u().executionDate,children:new Date(s.raffleExecutedAt).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),f&&(0,n.jsxs)("div",{className:u().winnerMessage,children:[(0,n.jsxs)("p",{className:u().winnerMessageText,children:[n.jsx("strong",{children:"\xa1Felicidades!"})," Has sido seleccionado como ganador de este sorteo. La tienda se pondr\xe1 en contacto contigo para coordinar la entrega del premio."]}),s.shop?.publicEmail&&(0,n.jsxs)("p",{className:u().winnerMessageText,children:["Si tienes alguna pregunta, puedes contactar a la tienda en:"," ",n.jsx("a",{href:`mailto:${s.shop.publicEmail}`,className:u().contactLink,children:s.shop.publicEmail})]})]})]}),(0,n.jsxs)("div",{className:u().statsCard,children:[n.jsx("h3",{className:u().statsTitle,children:"Estad\xedsticas del sorteo"}),(0,n.jsxs)("div",{className:u().statsGrid,children:[(0,n.jsxs)("div",{className:u().statItem,children:[n.jsx("span",{className:u().statLabel,children:"Total de tickets"}),n.jsx("span",{className:u().statValue,children:s.totalTickets})]}),(0,n.jsxs)("div",{className:u().statItem,children:[n.jsx("span",{className:u().statLabel,children:"Tickets vendidos"}),n.jsx("span",{className:u().statValue,children:s.soldTickets})]}),(0,n.jsxs)("div",{className:u().statItem,children:[n.jsx("span",{className:u().statLabel,children:"Valor total"}),(0,n.jsxs)("span",{className:u().statValue,children:["S/ ",(Number(s.productValue)*s.soldTickets).toFixed(2)]})]})]})]}),r&&N.length>0&&(0,n.jsxs)("div",{className:u().participationCard,children:[n.jsx("h3",{className:u().participationTitle,children:"Tus participaciones"}),(0,n.jsxs)("p",{className:u().participationText,children:["Participaste con ",n.jsx("strong",{children:N.length})," ticket",N.length>1?"s":"",":"]}),n.jsx("div",{className:u().ticketNumbers,children:N.map(e=>(0,n.jsxs)("span",{className:`${u().ticketNumberBadge} ${e.id===s.winnerTicketId?u().ticketNumberWinner:""}`,children:["#",e.number,e.id===s.winnerTicketId&&n.jsx(c.HR2,{className:u().winnerBadgeIcon})]},e.id))})]})]})]}),(0,n.jsxs)("div",{className:u().ctaSection,children:[n.jsx("h2",{className:u().ctaTitle,children:"\xbfQuieres participar en m\xe1s sorteos?"}),n.jsx("p",{className:u().ctaText,children:"Descubre otros sorteos disponibles y gana incre\xedbles premios"}),n.jsx(a.default,{href:"/sorteos",children:n.jsx("button",{className:u().ctaButton,children:"Ver todos los sorteos"})})]})]}):n.jsx("main",{className:u().container,children:(0,n.jsxs)("div",{className:u().errorContainer,children:[n.jsx(c.bax,{className:u().errorIcon}),n.jsx("h1",{className:u().errorTitle,children:"Ganador no disponible"}),n.jsx("p",{className:u().errorDescription,children:"El ganador de este sorteo a\xfan no ha sido determinado."}),n.jsx(a.default,{href:`/sorteos/${e}`,children:n.jsx("button",{className:u().backButton,children:"Volver al sorteo"})})]})})}},80760:(e,r,s)=>{"use strict";s.d(r,{a:()=>a});var n=s(5507),t=s(38442);function a(){let[e,r]=(0,n.useState)(!1);return{...(0,t.t)(),isHydrated:e}}},10752:(e,r,s)=>{"use strict";s.d(r,{x:()=>a});var n=s(20751);class t{client;constructor(){this.client=n.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let r=localStorage.getItem("token");console.log("API Request - Token from localStorage:",r),r?(e.headers.Authorization=`Bearer ${r}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,r){return this.client.get(e,r)}async post(e,r,s){return this.client.post(e,r,s)}async put(e,r){return this.client.put(e,r)}async delete(e){return this.client.delete(e)}}let a=new t},83730:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});var n=s(10752);let t={async getActiveRaffles(e){try{let r=new URLSearchParams;return e?.search&&r.append("search",e.search),e?.category&&r.append("category",e.category),e?.shopId&&r.append("shopId",e.shopId),e?.status&&r.append("status",e.status),e?.minValue!==void 0&&r.append("minValue",e.minValue.toString()),e?.maxValue!==void 0&&r.append("maxValue",e.maxValue.toString()),e?.sortBy&&r.append("sortBy",e.sortBy),e?.page&&r.append("page",e.page.toString()),e?.limit&&r.append("limit",e.limit.toString()),(await n.x.get(`/raffles/public/active?${r.toString()}`)).data}catch(e){throw console.error("Error fetching active raffles:",e),e}},async getRaffleById(e){try{return(await n.x.get(`/raffles/public/${e}`)).data}catch(e){throw console.error("Error fetching raffle:",e),e}},async getRafflesByShop(e,r){try{let s=new URLSearchParams;return r?.search&&s.append("search",r.search),r?.sortBy&&s.append("sortBy",r.sortBy),r?.page&&s.append("page",r.page.toString()),r?.limit&&s.append("limit",r.limit.toString()),(await n.x.get(`/raffles/public/shop/${e}?${s.toString()}`)).data}catch(e){throw console.error("Error fetching shop raffles:",e),e}},async getCategories(){try{return(await n.x.get("/raffles/public/categories")).data}catch(e){return console.error("Error fetching categories:",e),[]}},async getShopsWithActiveRaffles(){try{return(await n.x.get("/raffles/public/shops")).data}catch(e){return console.error("Error fetching shops:",e),[]}}}},38442:(e,r,s)=>{"use strict";s.d(r,{t:()=>a});var n=s(24978),t=s(31460);let a=(0,n.Ue)()((0,t.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:r=>e({user:r,isAuthenticated:!!r}),setToken:r=>{r?localStorage.setItem("token",r):localStorage.removeItem("token"),e({token:r})},setIsLoading:r=>e({isLoading:r}),setError:r=>e({error:r}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},65373:(e,r,s)=>{"use strict";var n;s.d(r,{r:()=>n}),function(e){e.DRAFT="draft",e.PENDING_APPROVAL="pending_approval",e.ACTIVE="active",e.PAUSED="paused",e.SOLD_OUT="sold_out",e.FINISHED="finished",e.CANCELLED="cancelled",e.REJECTED="rejected"}(n||(n={}))},14066:e=>{e.exports={container:"winner_container__aQaVY",backLink:"winner_backLink__abg5X",loadingContainer:"winner_loadingContainer__b1L4W",errorContainer:"winner_errorContainer__yE4D3",spinner:"winner_spinner__2nbjO",spin:"winner_spin__LVIIZ",errorIcon:"winner_errorIcon__H2oaO",errorTitle:"winner_errorTitle__8WQf3",errorDescription:"winner_errorDescription__M9IOQ",backButton:"winner_backButton__Dfln5",heroSection:"winner_heroSection__4ehVV",heroContent:"winner_heroContent___H2BO",winnerIcon:"winner_winnerIcon__s2jfR",bounce:"winner_bounce__n0vzE",heroTitle:"winner_heroTitle__G56Lx",heroSubtitle:"winner_heroSubtitle__YiXL9",content:"winner_content__X6RJL",leftColumn:"winner_leftColumn__PQPwv",productCard:"winner_productCard__B2C6C",imageContainer:"winner_imageContainer__iC6Z5",image:"winner_image__0iDAY",imagePlaceholder:"winner_imagePlaceholder__jmGzj",productInfo:"winner_productInfo__vsaLv",productName:"winner_productName__a5blh",productDescription:"winner_productDescription__hK48i",valueBox:"winner_valueBox__8BI_0",valueLabel:"winner_valueLabel__m5HLc",valueAmount:"winner_valueAmount__s_fgz",shopCard:"winner_shopCard__4Nv_o",shopTitle:"winner_shopTitle__kDQ_z",shopInfo:"winner_shopInfo__w9UHk",shopLogo:"winner_shopLogo__ckRNe",shopDetails:"winner_shopDetails__88NQQ",shopName:"winner_shopName__ptfgG",verifiedBadge:"winner_verifiedBadge__iZIME",verifiedIcon:"winner_verifiedIcon__db8uz",shopContact:"winner_shopContact___o4_6",rightColumn:"winner_rightColumn__aIQgT",winnerCard:"winner_winnerCard__Fy0II",winnerCardHighlight:"winner_winnerCardHighlight__kY1UK",winnerHeader:"winner_winnerHeader__n4gtl",winnerTitle:"winner_winnerTitle__wOVIN",titleIcon:"winner_titleIcon__nf_4X",winnerTicketDisplay:"winner_winnerTicketDisplay__xuT8_",ticketNumberContainer:"winner_ticketNumberContainer__T8Vki",ticketLabel:"winner_ticketLabel__PgDQh",ticketNumber:"winner_ticketNumber__ek8_v",winnerUserInfo:"winner_winnerUserInfo__8m7G5",winnerUserLabel:"winner_winnerUserLabel__U09CU",winnerUserName:"winner_winnerUserName__f5QnO",winnerUserEmail:"winner_winnerUserEmail__OgTqs",executionInfo:"winner_executionInfo__OFerq",executionLabel:"winner_executionLabel__dSmox",executionDate:"winner_executionDate__W27bz",winnerMessage:"winner_winnerMessage__fevgo",winnerMessageText:"winner_winnerMessageText__HYtGB",contactLink:"winner_contactLink__1ZlGS",statsCard:"winner_statsCard__ME8gc",statsTitle:"winner_statsTitle__GuEpH",statsGrid:"winner_statsGrid__1GSJd",statItem:"winner_statItem__dVTVe",statLabel:"winner_statLabel__p3fpc",statValue:"winner_statValue__Dj4I2",participationCard:"winner_participationCard__MW5Ay",participationTitle:"winner_participationTitle__2sU5p",participationText:"winner_participationText__bpMQb",ticketNumbers:"winner_ticketNumbers__m8jFH",ticketNumberBadge:"winner_ticketNumberBadge__f6RQd",ticketNumberWinner:"winner_ticketNumberWinner__meRTa",winnerBadgeIcon:"winner_winnerBadgeIcon__N9sJY",ctaSection:"winner_ctaSection__qKXlm",ctaTitle:"winner_ctaTitle__EYs36",ctaText:"winner_ctaText__xcPHk",ctaButton:"winner_ctaButton__YbsLw"}},22399:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a,metadata:()=>t});var n=s(35023);s(91641);let t={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function a({children:e}){return n.jsx("html",{lang:"es",children:n.jsx("body",{children:e})})}},57254:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});let n=(0,s(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/sorteos/[id]/winner/page.tsx#default`)},91641:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),n=r.X(0,[276,751,1925,4175,5562,8154],()=>s(6617));module.exports=n})();