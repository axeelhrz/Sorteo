(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},94939:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(12516),a(22399),a(12874);var t=a(27105),r=a(15265),i=a(90157),o=a.n(i),n=a(44665),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(s,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,12516)),"/Users/axelhernandez/Sorteos/frontend/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,22399)),"/Users/axelhernandez/Sorteos/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/axelhernandez/Sorteos/frontend/src/app/dashboard/page.tsx"],h="/dashboard/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3041:(e,s,a)=>{Promise.resolve().then(a.bind(a,61240))},7236:()=>{},4104:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,33817,23)),Promise.resolve().then(a.t.bind(a,19323,23)),Promise.resolve().then(a.t.bind(a,52204,23)),Promise.resolve().then(a.t.bind(a,60820,23)),Promise.resolve().then(a.t.bind(a,55915,23)),Promise.resolve().then(a.t.bind(a,81611,23))},61240:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(19899),r=a(5507),i=a(76153),o=a(55562),n=a(80760),l=a(10752),d=a(57355),c=a(33745),h=a(24544),p=a(42466),u=a(43993),m=a(60594),x=a.n(m);function g(){let e=(0,i.useRouter)(),{user:s,token:a,setUser:m,logout:g,isHydrated:j}=(0,n.a)(),[b,f]=(0,r.useState)(!0),[v,y]=(0,r.useState)([]),[N,_]=(0,r.useState)(null),[C,k]=(0,r.useState)([]),[S,I]=(0,r.useState)([]),[w,T]=(0,r.useState)([]),[F,P]=(0,r.useState)([]),[A,E]=(0,r.useState)("overview"),[D,B]=(0,r.useState)([]),[z,R]=(0,r.useState)(null),[q,L]=(0,r.useState)(!1),[$,G]=(0,r.useState)(!1),[M,V]=(0,r.useState)(""),[O,W]=(0,r.useState)(null),[H,U]=(0,r.useState)(null),[J,X]=(0,r.useState)([]),[K,Z]=(0,r.useState)([]),[Q,Y]=(0,r.useState)(null),[ee,es]=(0,r.useState)({}),[ea,et]=(0,r.useState)(null),[er,ei]=(0,r.useState)(!1),[eo,en]=(0,r.useState)(!1),[el,ed]=(0,r.useState)(!1),[ec,eh]=(0,r.useState)(!1),[ep,eu]=(0,r.useState)({shopId:"",productId:"",totalTickets:"",specialConditions:""}),[em,ex]=(0,r.useState)({shopId:"",name:"",description:"",value:0,height:0,width:0,depth:0,category:"",mainImage:""}),[eg,ej]=(0,r.useState)([]),[,eb]=(0,r.useState)(null),[ef,ev]=(0,r.useState)(!1),[ey,eN]=(0,r.useState)(null),[e_,eC]=(0,r.useState)(null),[ek,eS]=(0,r.useState)(null),eI=async()=>{try{await l.x.logout()}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}finally{g(),e.push("/")}},ew=()=>{ei(!1),eu({shopId:"",productId:"",totalTickets:"",specialConditions:""})},eT=async e=>{if(e.preventDefault(),!ep.shopId||!ep.productId){et("Por favor completa todos los campos requeridos");return}if(ep.totalTickets&&(isNaN(Number(ep.totalTickets))||1>Number(ep.totalTickets))){et("La cantidad de tickets debe ser un n\xfamero mayor a 0");return}ed(!0);try{let e={shopId:ep.shopId,productId:ep.productId,specialConditions:ep.specialConditions||void 0};ep.totalTickets&&(e.totalTickets=parseInt(ep.totalTickets,10));let s=await l.x.post("/raffles",e);I([...S,s.data]),ew(),et(null)}catch(e){et(e.response?.data?.message||"Error al crear el sorteo")}finally{ed(!1)}},eF=(e,s,a)=>{let t=[];return e<=0&&t.push("La altura debe ser mayor a 0"),s<=0&&t.push("El ancho debe ser mayor a 0"),a<=0&&t.push("La profundidad debe ser mayor a 0"),e>15&&t.push("La altura no puede exceder 15cm"),s>15&&t.push("El ancho no puede exceder 15cm"),a>15&&t.push("La profundidad no puede exceder 15cm"),t},eP=(e,s)=>{let a=parseFloat(s)||0;ex(s=>({...s,[e]:a})),ej(eF("height"===e?a:em.height,"width"===e?a:em.width,"depth"===e?a:em.depth))},eA=async()=>{if(s?.role!=="shop"||N)N?ex(e=>({...e,shopId:N.id})):v.length>0&&ex(e=>({...e,shopId:v[0].id}));else try{let e=await d.m.getMyShop();_(e),y([e]),ex(s=>({...s,shopId:e.id}))}catch(e){console.error("Error obteniendo tienda al abrir modal:",e),et(null),setTimeout(async()=>{try{let e=await d.m.getMyShop();_(e),y([e]),ex(s=>({...s,shopId:e.id})),en(!0)}catch(e){console.error("Error al reintentar obtener la tienda:",e),et("No se pudo obtener la informaci\xf3n de tu tienda. Por favor, recarga la p\xe1gina.")}},500);return}en(!0)},eE=()=>{en(!1),ex({shopId:v.length>0?v[0].id:"",name:"",description:"",value:0,height:0,width:0,depth:0,category:"",mainImage:""}),ej([]),eb(null)},eD=async e=>{eN(e),et(null);try{let a=await l.x.put(`/raffles/${e}/pause`,{});I(S.map(s=>s.id===e?a.data:s)),s?.role==="user"&&X(J.map(s=>s.id===e?a.data:s))}catch(e){et(e.response?.data?.message||"Error al pausar el sorteo")}finally{eN(null)}},eB=async e=>{eC(e),et(null);try{let a=await l.x.put(`/raffles/${e}/resume`,{});I(S.map(s=>s.id===e?a.data:s)),s?.role==="user"&&X(J.map(s=>s.id===e?a.data:s))}catch(e){et(e.response?.data?.message||"Error al reanudar el sorteo")}finally{eC(null)}},ez=async e=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas enviar este sorteo a aprobaci\xf3n? Una vez enviado, no podr\xe1s editarlo hasta que sea aprobado o rechazado.")){eS(e),et(null);try{let a=await l.x.put(`/raffles/${e}/submit-approval`,{});if(I(S.map(s=>s.id===e?a.data:s)),s?.role==="admin"){let e=await p.d.getPendingRaffles(50,0);B(e.data||[])}}catch(e){et(e.response?.data?.message||"Error al enviar el sorteo a aprobaci\xf3n")}finally{eS(null)}}},eR=async e=>{try{let s=await p.d.getRaffleDetail(e);R(s),L(!0)}catch(e){et(e.response?.data?.message||"Error al cargar detalles del sorteo")}},eq=async e=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas aprobar este sorteo?")){W(e),et(null);try{await p.d.approveRaffle(e),B(D.filter(s=>s.id!==e)),L(!1),R(null);let s=await p.d.getPendingRaffles(50,0);B(s.data||[]);let a=await l.x.get("/raffles");I(a.data||[])}catch(e){et(e.response?.data?.message||"Error al aprobar el sorteo")}finally{W(null)}}},eL=async e=>{if(!M.trim()){et("Por favor ingresa un motivo de rechazo");return}U(e),et(null);try{await p.d.rejectRaffle(e,M),B(D.filter(s=>s.id!==e)),G(!1),L(!1),V(""),R(null);let s=await p.d.getPendingRaffles(50,0);B(s.data||[]);let a=await l.x.get("/raffles");I(a.data||[])}catch(e){et(e.response?.data?.message||"Error al rechazar el sorteo")}finally{U(null)}},e$=async s=>{let a=ee[s]||1,t=J.find(e=>e.id===s);if(!t){et("Sorteo no encontrado");return}let r=t.totalTickets-t.soldTickets;if(a>r){et(`Solo hay ${r} tickets disponibles`);return}if(a<1){et("Debes comprar al menos 1 ticket");return}Y(s),et(null);try{let s=t.productValue||t.product?.value||0,r=await c.Z.createPayment({raffleId:t.id,amount:a*s,ticketQuantity:a});e.push(`/checkout?paymentId=${r.id}`)}catch(e){et(e.response?.data?.message||"Error al procesar la compra. Intenta de nuevo."),Y(null)}},eG=async e=>{let s=e.target.files?.[0];if(s){if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(s.type)){et("Tipo de archivo no permitido. Solo se permiten im\xe1genes (JPEG, PNG, WEBP, GIF)");return}if(s.size>5242880){et("El archivo es demasiado grande. M\xe1ximo permitido: 5MB");return}eb(s),et(null),ev(!0);try{let e=await h.T.uploadProductImage(s);ex(s=>({...s,mainImage:e}));let a=e.startsWith("http")?e:`${"http://localhost:3001/api".replace("/api","")||0}${e}`;ex(e=>({...e,mainImage:a}))}catch(e){et(e.response?.data?.message||"Error al subir la imagen"),eb(null)}finally{ev(!1)}}},eM=async e=>{if(e.preventDefault(),et(null),!em.shopId&&s?.role==="shop")try{let e=await d.m.getMyShop();_(e),y([e]),ex(s=>({...s,shopId:e.id}))}catch(e){console.error("Error obteniendo/creando tienda:",e),et("No se pudo obtener la informaci\xf3n de tu tienda. Por favor, recarga la p\xe1gina e intenta nuevamente.");return}if(!em.shopId){s?.role==="shop"?et("No se pudo asociar tu tienda. Por favor, recarga la p\xe1gina e intenta nuevamente."):et("Por favor selecciona una tienda para crear el producto.");return}let a=eF(em.height,em.width,em.depth);if(a.length>0){ej(a),et("Por favor corrige los errores en las dimensiones");return}if(!em.name||!em.description||em.value<=0){et("Por favor completa todos los campos requeridos");return}eh(!0);try{let e=await l.x.post("/products",em);k([...C,e.data]),eE(),et(null),eb(null)}catch(e){et(e.response?.data?.message||"Error al crear el producto")}finally{eh(!1)}},eV=e=>({pending:"#FFA500",verified:"#4CAF50",blocked:"#F44336",active:"#2196F3",paused:"#FF9800",inactive:"#9E9E9E",archived:"#757575",draft:"#FF9800",pending_approval:"#FFC107",sold_out:"#9C27B0",finished:"#4CAF50",cancelled:"#F44336",rejected:"#F44336",sold:"#2196F3",winner:"#FFD700",refunded:"#9E9E9E",held:"#FF9800",released:"#4CAF50",executed:"#F44336"})[e]||"#757575";return!j||b?t.jsx("div",{className:x().dashboard,children:t.jsx("div",{className:x().loadingContainer,children:t.jsx("p",{children:"Cargando..."})})}):s?(0,t.jsxs)("div",{className:x().dashboard,children:[t.jsx("div",{className:x().header,children:(0,t.jsxs)("div",{className:x().headerContent,children:[(0,t.jsxs)("div",{className:x().headerTitle,children:[t.jsx(u.Z,{size:"small",showText:!1}),t.jsx("h1",{children:"Dashboard"})]}),(0,t.jsxs)("div",{className:x().userSection,children:[(0,t.jsxs)("div",{className:x().userInfo,children:[t.jsx("div",{className:x().userAvatar,children:t.jsx(o.fzv,{})}),(0,t.jsxs)("div",{className:x().userDetails,children:[t.jsx("p",{className:x().userName,children:s.name}),t.jsx("p",{className:x().email,children:s.email}),t.jsx("span",{className:x().role,children:s.role})]})]}),(0,t.jsxs)("button",{onClick:eI,className:x().logoutBtn,children:[t.jsx(o.xqh,{className:x().logoutIcon}),"Cerrar Sesi\xf3n"]})]})]})}),ea&&t.jsx("div",{className:x().errorBanner,children:ea}),t.jsx("div",{className:x().tabsContainer,children:"user"===s.role?(0,t.jsxs)(t.Fragment,{children:[t.jsx("button",{className:`${x().tab} ${"overview"===A?x().activeTab:""}`,onClick:()=>E("overview"),children:"Resumen"}),(0,t.jsxs)("button",{className:`${x().tab} ${"raffles"===A?x().activeTab:""}`,onClick:()=>E("raffles"),children:["Sorteos Disponibles (",J.length,")"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"tickets"===A?x().activeTab:""}`,onClick:()=>E("tickets"),children:["Mis Tickets (",K.length,")"]})]}):"admin"===s.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:`${x().tab} ${"pending"===A?x().activeTab:""}`,onClick:()=>E("pending"),children:[t.jsx(o.TCC,{className:x().tabIcon}),"Sorteos Pendientes (",D.length,")"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"overview"===A?x().activeTab:""}`,onClick:()=>E("overview"),children:[t.jsx(o.orK,{className:x().tabIcon}),"Resumen"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"raffles"===A?x().activeTab:""}`,onClick:()=>E("raffles"),children:[t.jsx(o.KCr,{className:x().tabIcon}),"Todos los Sorteos (",S.length,")"]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("button",{className:`${x().tab} ${"overview"===A?x().activeTab:""}`,onClick:()=>E("overview"),children:"Resumen"}),(0,t.jsxs)("button",{className:`${x().tab} ${"products"===A?x().activeTab:""}`,onClick:()=>E("products"),children:["Productos (",C.length,")"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"raffles"===A?x().activeTab:""}`,onClick:()=>E("raffles"),children:["Sorteos (",S.length,")"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"tickets"===A?x().activeTab:""}`,onClick:()=>E("tickets"),children:["Tickets (",w.length,")"]}),(0,t.jsxs)("button",{className:`${x().tab} ${"deposits"===A?x().activeTab:""}`,onClick:()=>E("deposits"),children:["Dep\xf3sitos (",F.length,")"]})]})}),(0,t.jsxs)("div",{className:x().content,children:["pending"===A&&"admin"===s.role&&(0,t.jsxs)("div",{className:x().tableContainer,children:[t.jsx("div",{className:x().tableHeader,children:t.jsx("h2",{children:"Sorteos Pendientes de Aprobaci\xf3n"})}),0===D.length?t.jsx("p",{className:x().emptyMessage,children:"No hay sorteos pendientes de aprobaci\xf3n"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Tienda"}),t.jsx("th",{children:"Producto"}),t.jsx("th",{children:"Valor"}),t.jsx("th",{children:"Total Tickets"}),t.jsx("th",{children:"Requiere Dep\xf3sito"}),t.jsx("th",{children:"Fecha Creaci\xf3n"}),t.jsx("th",{children:"Acciones"})]})}),t.jsx("tbody",{children:D.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:e.shop?.name||"N/A"}),t.jsx("td",{children:t.jsx("strong",{children:e.product?.name||"Producto desconocido"})}),(0,t.jsxs)("td",{children:["S/. ",(e.productValue||e.product?.value||0).toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("td",{children:e.totalTickets.toLocaleString()}),t.jsx("td",{children:e.requiresDeposit?t.jsx("span",{className:x().badge,style:{backgroundColor:"#FF9800"},children:"S\xed"}):t.jsx("span",{className:x().badge,style:{backgroundColor:"#4CAF50"},children:"No"})}),t.jsx("td",{children:new Date(e.createdAt).toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{children:t.jsx("div",{style:{display:"flex",gap:"8px"},children:t.jsx("button",{className:x().createBtn,onClick:()=>eR(e.id),style:{padding:"6px 12px",fontSize:"12px"},children:"Ver Detalles"})})})]},e.id))})]})]}),"products"===A&&"shop"===s.role&&(0,t.jsxs)("div",{className:x().tableContainer,children:[(0,t.jsxs)("div",{className:x().tableHeader,children:[t.jsx("h2",{children:"Productos"}),t.jsx("button",{className:x().createBtn,onClick:eA,children:"Crear Producto"})]}),0===C.length?t.jsx("p",{className:x().emptyMessage,children:"No hay productos creados"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Nombre"}),t.jsx("th",{children:"Valor"}),t.jsx("th",{children:"Dimensiones"}),t.jsx("th",{children:"Requiere Dep\xf3sito"}),t.jsx("th",{children:"Estado"})]})}),t.jsx("tbody",{children:C.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:t.jsx("strong",{children:e.name})}),(0,t.jsxs)("td",{children:["S/. ",e.value.toLocaleString()]}),(0,t.jsxs)("td",{children:[e.height,"\xd7",e.width,"\xd7",e.depth," cm"]}),t.jsx("td",{children:e.requiresDeposit?t.jsx("span",{className:x().badge,style:{backgroundColor:"#FF9800"},children:"S\xed"}):t.jsx("span",{className:x().badge,style:{backgroundColor:"#4CAF50"},children:"No"})}),t.jsx("td",{children:t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status)},children:e.status})})]},e.id))})]})]}),"overview"===A&&t.jsx("div",{className:x().overviewGrid,children:"user"===s.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.KCr,{})}),t.jsx("h3",{children:"Sorteos Disponibles"}),t.jsx("p",{className:x().bigNumber,children:J.length}),t.jsx("p",{className:x().subtitle,children:"Sorteos activos para participar"})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.E25,{})}),t.jsx("h3",{children:"Mis Tickets"}),t.jsx("p",{className:x().bigNumber,children:K.length}),t.jsx("p",{className:x().subtitle,children:"Tickets comprados"}),t.jsx("div",{className:x().statusBreakdown,children:K.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Vendidos: ",K.filter(e=>"sold"===e.status).length]}),(0,t.jsxs)("span",{children:["Ganadores: ",K.filter(e=>"winner"===e.status).length]})]})})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.HR2,{})}),t.jsx("h3",{children:"Sorteos Participados"}),t.jsx("p",{className:x().bigNumber,children:new Set(K.map(e=>e.raffleId)).size}),t.jsx("p",{className:x().subtitle,children:"Diferentes sorteos"})]})]}):"admin"===s.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.TCC,{})}),t.jsx("h3",{children:"Sorteos Pendientes"}),t.jsx("p",{className:x().bigNumber,children:D.length}),t.jsx("p",{className:x().subtitle,children:"Esperando aprobaci\xf3n"})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.KCr,{})}),t.jsx("h3",{children:"Sorteos Activos"}),t.jsx("p",{className:x().bigNumber,children:S.filter(e=>"active"===e.status).length}),t.jsx("p",{className:x().subtitle,children:"Sorteos en curso"})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o._rq,{})}),t.jsx("h3",{children:"Sorteos Finalizados"}),t.jsx("p",{className:x().bigNumber,children:S.filter(e=>"finished"===e.status).length}),t.jsx("p",{className:x().subtitle,children:"Sorteos completados"})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.x8h,{})}),t.jsx("h3",{children:"Total Sorteos"}),t.jsx("p",{className:x().bigNumber,children:S.length}),t.jsx("p",{className:x().subtitle,children:"Todos los sorteos"}),(0,t.jsxs)("div",{className:x().statusBreakdown,children:[(0,t.jsxs)("span",{children:["Pendientes: ",D.length]}),(0,t.jsxs)("span",{children:["Activos: ",S.filter(e=>"active"===e.status).length]}),(0,t.jsxs)("span",{children:["Finalizados: ",S.filter(e=>"finished"===e.status).length]})]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.zFh,{})}),t.jsx("h3",{children:"Productos"}),t.jsx("p",{className:x().bigNumber,children:C.length}),t.jsx("p",{className:x().subtitle,children:"Total de productos"}),t.jsx("div",{className:x().statusBreakdown,children:C.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Activos: ",C.filter(e=>"active"===e.status).length]}),(0,t.jsxs)("span",{children:["Inactivos: ",C.filter(e=>"inactive"===e.status).length]}),(0,t.jsxs)("span",{children:["Con dep\xf3sito: ",C.filter(e=>e.requiresDeposit).length]})]})})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.KCr,{})}),t.jsx("h3",{children:"Sorteos"}),t.jsx("p",{className:x().bigNumber,children:S.length}),t.jsx("p",{className:x().subtitle,children:"Total de sorteos"}),t.jsx("div",{className:x().statusBreakdown,children:S.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Activos: ",S.filter(e=>"active"===e.status).length]}),(0,t.jsxs)("span",{children:["Pausados: ",S.filter(e=>"paused"===e.status).length]}),(0,t.jsxs)("span",{children:["Finalizados: ",S.filter(e=>"finished"===e.status).length]}),(0,t.jsxs)("span",{children:["Tickets vendidos: ",S.reduce((e,s)=>e+s.soldTickets,0).toLocaleString()]})]})})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.E25,{})}),t.jsx("h3",{children:"Tickets"}),t.jsx("p",{className:x().bigNumber,children:w.length}),t.jsx("p",{className:x().subtitle,children:"Total de tickets"}),t.jsx("div",{className:x().statusBreakdown,children:w.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Vendidos: ",w.filter(e=>"sold"===e.status).length]}),(0,t.jsxs)("span",{children:["Ganadores: ",w.filter(e=>"winner"===e.status).length]}),(0,t.jsxs)("span",{children:["Reembolsados: ",w.filter(e=>"refunded"===e.status).length]})]})})]}),(0,t.jsxs)("div",{className:x().card,children:[t.jsx("div",{className:x().cardIcon,children:t.jsx(o.oQC,{})}),t.jsx("h3",{children:"Dep\xf3sitos"}),t.jsx("p",{className:x().bigNumber,children:F.length}),t.jsx("p",{className:x().subtitle,children:"Total de dep\xf3sitos"}),t.jsx("div",{className:x().statusBreakdown,children:F.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Retenidos: ",F.filter(e=>"held"===e.status).length]}),(0,t.jsxs)("span",{children:["Liberados: ",F.filter(e=>"released"===e.status).length]}),(0,t.jsxs)("span",{children:["Monto total: $",F.reduce((e,s)=>e+s.amount,0).toLocaleString()]})]})})]})]})}),"raffles"===A&&(0,t.jsxs)("div",{className:x().tableContainer,children:[(0,t.jsxs)("div",{className:x().tableHeader,children:[t.jsx("h2",{children:"user"===s.role?"Sorteos Disponibles":"Sorteos"}),"user"!==s.role&&t.jsx("button",{className:x().createBtn,onClick:()=>{N?eu(e=>({...e,shopId:N.id})):v.length>0&&eu(e=>({...e,shopId:v[0].id})),ei(!0)},children:"Crear Sorteo"})]}),"user"===s.role?0===J.length?t.jsx("p",{className:x().emptyMessage,children:"No hay sorteos disponibles en este momento"}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px",marginTop:"20px"},children:J.map(e=>{let s=e.totalTickets-e.soldTickets,a=e.totalTickets>0?e.soldTickets/e.totalTickets*100:0,r=e.product?.name||C.find(s=>s.id===e.productId)?.name||"Producto desconocido",i=e.productValue||e.product?.value||C.find(s=>s.id===e.productId)?.value||0,o=ee[e.id]||1,n=o*i,l="active"===e.status&&s>0;return(0,t.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"20px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",opacity:"cancelled"===e.status||"finished"===e.status?.8:1},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[t.jsx("h3",{style:{marginTop:0,marginBottom:"10px",color:"#333",flex:1},children:r}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px",alignItems:"flex-end"},children:[t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status),fontSize:"12px",padding:"4px 8px",borderRadius:"4px",color:"#fff",fontWeight:"bold"},children:{active:"Activo",paused:"Pausado",sold_out:"Agotado",finished:"Finalizado",cancelled:"Cancelado",pending_approval:"Pendiente de Aprobaci\xf3n"}[e.status]||e.status}),"finished"===e.status&&e.winnerTicketId&&t.jsx("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:K.some(s=>s.raffleId===e.id&&s.id===e.winnerTicketId)?t.jsx("span",{style:{padding:"2px 6px",backgroundColor:"#4CAF50",color:"#fff",borderRadius:"4px",fontWeight:"bold"},children:"\uD83C\uDFC6 Ganaste!"}):t.jsx("span",{style:{color:"#999"},children:"Finalizado"})})]})]}),(0,t.jsxs)("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#1976d2",margin:"10px 0"},children:["S/. ",i.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsxs)("div",{style:{margin:"15px 0"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px"},children:[t.jsx("span",{children:"Tickets disponibles:"}),(0,t.jsxs)("strong",{style:{color:s>0?"#4CAF50":"#F44336"},children:[s.toLocaleString()," / ",e.totalTickets.toLocaleString()]})]}),t.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden",marginTop:"5px"},children:t.jsx("div",{style:{width:`${a}%`,height:"100%",backgroundColor:a>=100?"#4CAF50":"#2196F3",transition:"width 0.3s ease"}})}),(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:[Math.round(a),"% vendido"]})]}),l&&(0,t.jsxs)("div",{style:{marginTop:"20px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Cantidad de tickets:"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[t.jsx("button",{onClick:()=>es({...ee,[e.id]:Math.max(1,o-1)}),disabled:o<=1,className:x().quantityBtn,children:"-"}),t.jsx("input",{type:"number",min:"1",max:s,value:o,onChange:a=>{let t=parseInt(a.target.value)||1;es({...ee,[e.id]:Math.max(1,Math.min(t,s))})},style:{width:"70px",padding:"8px",border:"2px solid #e0e0e0",borderRadius:"6px",textAlign:"center",fontSize:"14px",fontWeight:"600"}}),t.jsx("button",{onClick:()=>es({...ee,[e.id]:Math.min(s,o+1)}),disabled:o>=s,className:x().quantityBtn,children:"+"})]}),(0,t.jsxs)("p",{style:{fontSize:"14px",marginTop:"10px",fontWeight:"bold"},children:["Total: S/. ",n.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("button",{onClick:()=>e$(e.id),disabled:Q===e.id||0===s,className:x().buyTicketsBtn,children:Q===e.id?"Procesando...":"Comprar Tickets"})]}),!l&&(0,t.jsxs)("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#f5f5f5",borderRadius:"4px",textAlign:"center",color:"#666",fontSize:"14px"},children:["sold_out"===e.status&&"Este sorteo est\xe1 agotado","finished"===e.status&&"Este sorteo ha finalizado","cancelled"===e.status&&"Este sorteo ha sido cancelado","paused"===e.status&&"Este sorteo est\xe1 pausado","pending_approval"===e.status&&"Este sorteo est\xe1 pendiente de aprobaci\xf3n","active"!==e.status&&"sold_out"!==e.status&&"finished"!==e.status&&"cancelled"!==e.status&&"pending_approval"!==e.status&&"paused"!==e.status&&"No disponible para compra"]})]},e.id)})}):0===S.length?t.jsx("p",{className:x().emptyMessage,children:"No hay sorteos creados"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Producto"}),t.jsx("th",{children:"Valor"}),t.jsx("th",{children:"Total Tickets"}),t.jsx("th",{children:"Vendidos"}),t.jsx("th",{children:"Disponibles"}),t.jsx("th",{children:"Progreso"}),t.jsx("th",{children:"Estado"}),t.jsx("th",{children:"Acciones"}),t.jsx("th",{children:"Fecha Creaci\xf3n"})]})}),t.jsx("tbody",{children:S.map(e=>{let a=e.totalTickets>0?e.soldTickets/e.totalTickets*100:0,r=e.totalTickets-e.soldTickets,i=e.product?.name||C.find(s=>s.id===e.productId)?.name||"Producto desconocido",n=e.productValue||e.product?.value||C.find(s=>s.id===e.productId)?.value||0;return(0,t.jsxs)("tr",{children:[t.jsx("td",{children:t.jsx("strong",{children:i})}),(0,t.jsxs)("td",{children:["S/. ",n.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("td",{children:e.totalTickets.toLocaleString()}),t.jsx("td",{children:e.soldTickets.toLocaleString()}),t.jsx("td",{children:t.jsx("span",{style:{color:r>0?"#4CAF50":"#F44336",fontWeight:"bold"},children:r.toLocaleString()})}),t.jsx("td",{children:(0,t.jsxs)("div",{className:x().progressBar,children:[t.jsx("div",{className:x().progressFill,style:{width:`${a}%`}}),(0,t.jsxs)("span",{className:x().progressText,children:[Math.round(a),"%"]})]})}),t.jsx("td",{children:t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status)},children:{draft:"Borrador",pending_approval:"Pendiente de Aprobaci\xf3n",active:"Activo",paused:"Pausado",sold_out:"Agotado",finished:"Finalizado",cancelled:"Cancelado",rejected:"Rechazado"}[e.status]||e.status})}),t.jsx("td",{children:(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:["draft"===e.status&&"shop"===s.role&&t.jsx("button",{className:x().createBtn,onClick:()=>ez(e.id),disabled:ek===e.id,style:{padding:"6px 12px",fontSize:"12px",background:"linear-gradient(135deg, #4CAF50 0%, #388E3C 100%)",whiteSpace:"nowrap"},title:"Enviar este sorteo a aprobaci\xf3n para que los usuarios puedan comprar tickets",children:ek===e.id?"Enviando...":(0,t.jsxs)(t.Fragment,{children:[t.jsx(o._rq,{style:{marginRight:"4px"}}),"Enviar a Aprobaci\xf3n"]})}),"active"===e.status&&"shop"===s.role&&t.jsx("button",{className:x().cancelBtn,onClick:()=>eD(e.id),disabled:ey===e.id,style:{padding:"6px 12px",fontSize:"12px",backgroundColor:"#FF9800",color:"white",borderColor:"#FF9800",whiteSpace:"nowrap"},children:ey===e.id?"Pausando...":(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.R4s,{style:{marginRight:"4px"}}),"Pausar"]})}),"paused"===e.status&&"shop"===s.role&&t.jsx("button",{className:x().submitBtn,onClick:()=>eB(e.id),disabled:e_===e.id,style:{padding:"6px 12px",fontSize:"12px",whiteSpace:"nowrap"},children:e_===e.id?"Reanudando...":(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.BVE,{style:{marginRight:"4px"}}),"Reanudar"]})}),"pending_approval"===e.status&&"shop"===s.role&&t.jsx("span",{style:{fontSize:"12px",color:"#FF9800",fontStyle:"italic",whiteSpace:"nowrap"},children:"⏳ Esperando aprobaci\xf3n"})]})}),t.jsx("td",{children:new Date(e.createdAt).toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"})})]},e.id)})})]})]}),"tickets"===A&&(0,t.jsxs)("div",{className:x().tableContainer,children:[t.jsx("h2",{children:"user"===s.role?"Mis Tickets":"Tickets"}),"user"===s.role?0===K.length?t.jsx("p",{className:x().emptyMessage,children:"No has comprado tickets a\xfan. \xa1Participa en los sorteos disponibles!"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"N\xfamero de Ticket"}),t.jsx("th",{children:"Producto del Sorteo"}),t.jsx("th",{children:"Valor del Producto"}),t.jsx("th",{children:"Estado"}),t.jsx("th",{children:"Fecha de Compra"})]})}),t.jsx("tbody",{children:K.map(e=>{let s=S.find(s=>s.id===e.raffleId),a=s?.product?.name||C.find(e=>e.id===s?.productId)?.name||"Producto desconocido",r=s?.productValue||s?.product?.value||C.find(e=>e.id===s?.productId)?.value||0,i=s?.status==="finished"&&s?.winnerTicketId===e.id,o=s?.status==="finished";return(0,t.jsxs)("tr",{style:{backgroundColor:i?"#e8f5e9":"transparent"},children:[(0,t.jsxs)("td",{children:[(0,t.jsxs)("strong",{children:["#",e.number]}),i&&t.jsx("span",{style:{marginLeft:"8px",padding:"2px 8px",backgroundColor:"#4CAF50",color:"#fff",borderRadius:"4px",fontSize:"11px",fontWeight:"bold"},children:"\uD83C\uDFC6 GANADOR"})]}),t.jsx("td",{children:a}),(0,t.jsxs)("td",{children:["S/. ",r.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("td",{children:i?t.jsx("span",{className:x().badge,style:{backgroundColor:"#4CAF50",color:"#fff",fontWeight:"bold"},children:"\uD83C\uDFC6 Ganador"}):o?t.jsx("span",{className:x().badge,style:{backgroundColor:"#9E9E9E",color:"#fff"},children:"Finalizado"}):t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status)},children:"sold"===e.status?"Comprado":"winner"===e.status?"Ganador":e.status})}),t.jsx("td",{children:e.purchasedAt?new Date(e.purchasedAt).toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"}):"-"})]},e.id)})})]}):0===w.length?t.jsx("p",{className:x().emptyMessage,children:"No hay tickets creados"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"N\xfamero"}),t.jsx("th",{children:"Sorteo ID"}),t.jsx("th",{children:"Estado"})]})}),t.jsx("tbody",{children:w.slice(0,50).map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:(0,t.jsxs)("strong",{children:["#",e.number]})}),(0,t.jsxs)("td",{children:[e.raffleId.substring(0,8),"..."]}),t.jsx("td",{children:t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status)},children:e.status})})]},e.id))})]}),"user"!==s.role&&w.length>50&&(0,t.jsxs)("p",{className:x().moreItems,children:["... y ",w.length-50," m\xe1s"]})]}),"deposits"===A&&"user"!==s.role&&(0,t.jsxs)("div",{className:x().tableContainer,children:[t.jsx("h2",{children:"Dep\xf3sitos"}),0===F.length?t.jsx("p",{className:x().emptyMessage,children:"No hay dep\xf3sitos creados"}):(0,t.jsxs)("table",{className:x().table,children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Monto"}),t.jsx("th",{children:"Sorteo ID"}),t.jsx("th",{children:"Estado"})]})}),t.jsx("tbody",{children:F.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:(0,t.jsxs)("strong",{children:["$",e.amount.toLocaleString()]})}),(0,t.jsxs)("td",{children:[e.raffleId.substring(0,8),"..."]}),t.jsx("td",{children:t.jsx("span",{className:x().badge,style:{backgroundColor:eV(e.status)},children:e.status})})]},e.id))})]})]}),er&&t.jsx("div",{className:x().modalOverlay,onClick:ew,children:(0,t.jsxs)("div",{className:x().modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:x().modalHeader,children:[t.jsx("h2",{children:"Crear Nuevo Sorteo"}),t.jsx("button",{className:x().closeBtn,onClick:ew,children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:eT,className:x().form,children:[N?(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Tienda"}),t.jsx("div",{style:{padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",color:"#666"},children:t.jsx("strong",{children:N.name})})]}):(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"shopId",children:"Tienda *"}),(0,t.jsxs)("select",{id:"shopId",value:ep.shopId,onChange:e=>eu({...ep,shopId:e.target.value}),required:!0,className:x().input,children:[t.jsx("option",{value:"",children:"Selecciona una tienda"}),v.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productId",children:"Producto *"}),(0,t.jsxs)("select",{id:"productId",value:ep.productId,onChange:e=>{eu({...ep,productId:e.target.value})},required:!0,className:x().input,children:[t.jsx("option",{value:"",children:"Selecciona un producto"}),C.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - S/. ",e.value.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]},e.id))]})]}),ep.productId&&(()=>{let e=C.find(e=>e.id===ep.productId),s=e?Math.floor(2*e.value):0;return(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"totalTickets",children:"Cantidad de Tickets (opcional)"}),t.jsx("input",{type:"number",id:"totalTickets",min:"1",step:"1",value:ep.totalTickets,onChange:e=>eu({...ep,totalTickets:e.target.value}),className:x().input,placeholder:`Dejar vac\xedo para usar: ${s.toLocaleString()} tickets (autom\xe1tico)`}),t.jsx("small",{style:{display:"block",marginTop:"5px",color:"#666",fontSize:"12px"},children:ep.totalTickets?`Se crear\xe1n ${parseInt(ep.totalTickets)||0} tickets personalizados.`:`Si no especificas una cantidad, se crear\xe1n autom\xe1ticamente ${s.toLocaleString()} tickets (valor del producto \xd7 2).`}),e&&(0,t.jsxs)("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#e3f2fd",borderRadius:"4px",fontSize:"12px",color:"#1976d2"},children:[t.jsx("strong",{children:"Producto seleccionado:"})," ",e.name,t.jsx("br",{}),t.jsx("strong",{children:"Valor:"})," S/. ",e.value.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2}),t.jsx("br",{}),t.jsx("strong",{children:"C\xe1lculo autom\xe1tico:"})," ",e.value.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})," \xd7 2 = ",s.toLocaleString()," tickets"]})]})})(),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"specialConditions",children:"Condiciones Especiales"}),t.jsx("textarea",{id:"specialConditions",value:ep.specialConditions,onChange:e=>eu({...ep,specialConditions:e.target.value}),placeholder:"Ingresa condiciones especiales del sorteo (opcional)",className:x().textarea,rows:4})]}),(0,t.jsxs)("div",{className:x().formActions,children:[t.jsx("button",{type:"button",onClick:ew,className:x().cancelBtn,children:"Cancelar"}),t.jsx("button",{type:"submit",disabled:el,className:x().submitBtn,children:el?"Creando...":"Crear Sorteo"})]})]})]})}),eo&&t.jsx("div",{className:x().modalOverlay,onClick:eE,children:(0,t.jsxs)("div",{className:x().modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:x().modalHeader,children:[t.jsx("h2",{children:"Crear Nuevo Producto"}),t.jsx("button",{className:x().closeBtn,onClick:eE,children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:eM,className:x().form,children:[N&&(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Tienda"}),t.jsx("div",{style:{padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px",color:"#666"},children:t.jsx("strong",{children:N.name})})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productName",children:"Nombre del Producto *"}),t.jsx("input",{type:"text",id:"productName",value:em.name,onChange:e=>ex({...em,name:e.target.value}),required:!0,className:x().input,placeholder:"Ej: iPhone 15 Pro Max"})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productDescription",children:"Descripci\xf3n *"}),t.jsx("textarea",{id:"productDescription",value:em.description,onChange:e=>ex({...em,description:e.target.value}),required:!0,className:x().textarea,rows:4,placeholder:"Describe el producto en detalle..."})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productValue",children:"Valor del Producto (S/.) *"}),t.jsx("input",{type:"number",id:"productValue",step:"0.01",min:"0.01",value:em.value||"",onChange:e=>ex({...em,value:parseFloat(e.target.value)||0}),required:!0,className:x().input,placeholder:"0.00"})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productCategory",children:"Categor\xeda (opcional)"}),t.jsx("input",{type:"text",id:"productCategory",value:em.category,onChange:e=>ex({...em,category:e.target.value}),className:x().input,placeholder:"Ej: Electr\xf3nica, Ropa, Hogar..."})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productMainImage",children:"Imagen Principal (opcional)"}),(0,t.jsxs)("div",{style:{marginBottom:"10px"},children:[t.jsx("input",{type:"file",id:"productImageFile",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:eG,className:x().input,style:{marginBottom:"10px"},disabled:ef}),ef&&t.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:"Subiendo imagen..."}),em.mainImage&&!ef&&t.jsx("div",{style:{marginTop:"10px"},children:t.jsx("img",{src:em.mainImage,alt:"Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"4px",border:"1px solid #ddd"}})})]}),t.jsx("small",{style:{display:"block",marginTop:"5px",color:"#666",fontSize:"12px"},children:"O ingresa una URL de imagen:"}),t.jsx("input",{type:"url",id:"productMainImage",value:em.mainImage,onChange:e=>ex({...em,mainImage:e.target.value}),className:x().input,placeholder:"https://ejemplo.com/imagen.jpg",style:{marginTop:"5px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{marginBottom:"10px",fontSize:"16px"},children:"Dimensiones (en cent\xedmetros) *"}),t.jsx("p",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"},children:"M\xe1ximo permitido: 15cm por cada dimensi\xf3n. Si alguna dimensi\xf3n excede este l\xedmite, se requerir\xe1 un dep\xf3sito de garant\xeda."}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px"},children:[(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productHeight",children:"Altura (cm)"}),t.jsx("input",{type:"number",id:"productHeight",step:"0.1",min:"0.1",max:"15",value:em.height||"",onChange:e=>eP("height",e.target.value),required:!0,className:x().input})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productWidth",children:"Ancho (cm)"}),t.jsx("input",{type:"number",id:"productWidth",step:"0.1",min:"0.1",max:"15",value:em.width||"",onChange:e=>eP("width",e.target.value),required:!0,className:x().input})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{htmlFor:"productDepth",children:"Profundidad (cm)"}),t.jsx("input",{type:"number",id:"productDepth",step:"0.1",min:"0.1",max:"15",value:em.depth||"",onChange:e=>eP("depth",e.target.value),required:!0,className:x().input})]})]}),eg.length>0&&(0,t.jsxs)("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#ffebee",borderRadius:"4px",color:"#c62828"},children:[t.jsx("strong",{children:"Errores en las dimensiones:"}),t.jsx("ul",{style:{margin:"10px 0 0 20px"},children:eg.map((e,s)=>t.jsx("li",{children:e},s))})]}),(em.height>15||em.width>15||em.depth>15)&&0===eg.length&&(0,t.jsxs)("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#fff3cd",borderRadius:"4px",color:"#856404"},children:["⚠️ Este producto requiere un dep\xf3sito de garant\xeda porque excede las dimensiones m\xe1ximas permitidas (15\xd715\xd715 cm).",t.jsx("br",{}),t.jsx("strong",{children:"Dep\xf3sito requerido:"})," S/. ",em.value.toFixed(2)]}),em.height>0&&em.width>0&&em.depth>0&&em.height<=15&&em.width<=15&&em.depth<=15&&t.jsx("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#d4edda",borderRadius:"4px",color:"#155724"},children:"✓ Este producto no requiere dep\xf3sito de garant\xeda."})]}),(0,t.jsxs)("div",{className:x().formActions,children:[t.jsx("button",{type:"button",onClick:eE,className:x().cancelBtn,children:"Cancelar"}),t.jsx("button",{type:"submit",disabled:ec,className:x().submitBtn,children:ec?"Creando...":"Crear Producto"})]})]})]})}),q&&z&&"admin"===s.role&&t.jsx("div",{className:x().modalOverlay,onClick:()=>{L(!1),R(null)},children:(0,t.jsxs)("div",{className:x().modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:x().modalHeader,children:[t.jsx("h2",{children:"Detalles del Sorteo"}),t.jsx("button",{className:x().closeBtn,onClick:()=>{L(!1),R(null)},children:"\xd7"})]}),(0,t.jsxs)("div",{className:x().form,style:{padding:"24px"},children:[(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Tienda"}),t.jsx("p",{style:{margin:"8px 0",color:"#333",fontSize:"16px",fontWeight:"600"},children:z.shop?.name||"N/A"})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Producto"}),t.jsx("p",{style:{margin:"8px 0",color:"#333",fontSize:"16px",fontWeight:"600"},children:z.product?.name||"Producto desconocido"})]}),z.product?.description&&(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Descripci\xf3n"}),t.jsx("p",{style:{margin:"8px 0",color:"#666",fontSize:"14px"},children:z.product.description})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Valor del Producto"}),(0,t.jsxs)("p",{style:{margin:"8px 0",color:"#333",fontSize:"18px",fontWeight:"600"},children:["S/. ",(z.productValue||z.product?.value||0).toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Total de Tickets"}),t.jsx("p",{style:{margin:"8px 0",color:"#333",fontSize:"16px"},children:z.totalTickets.toLocaleString()})]}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Requiere Dep\xf3sito"}),t.jsx("p",{style:{margin:"8px 0"},children:z.requiresDeposit?t.jsx("span",{className:x().badge,style:{backgroundColor:"#FF9800"},children:"S\xed"}):t.jsx("span",{className:x().badge,style:{backgroundColor:"#4CAF50"},children:"No"})})]}),z.specialConditions&&(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Condiciones Especiales"}),t.jsx("p",{style:{margin:"8px 0",color:"#666",fontSize:"14px"},children:z.specialConditions})]}),(0,t.jsxs)("div",{className:x().formActions,children:[t.jsx("button",{className:x().cancelBtn,onClick:()=>{L(!1),R(null)},disabled:O===z.id||H===z.id,children:"Cerrar"}),(0,t.jsxs)("button",{className:x().cancelBtn,onClick:()=>G(!0),disabled:O===z.id||H===z.id,style:{backgroundColor:"#F44336",color:"white",borderColor:"#F44336"},children:[t.jsx(o.$Rx,{style:{marginRight:"6px"}}),"Rechazar"]}),t.jsx("button",{className:x().submitBtn,onClick:()=>eq(z.id),disabled:O===z.id||H===z.id,children:O===z.id?"Procesando...":(0,t.jsxs)(t.Fragment,{children:[t.jsx(o._rq,{style:{marginRight:"6px"}}),"Aprobar"]})})]})]})]})}),$&&z&&"admin"===s.role&&t.jsx("div",{className:x().modalOverlay,onClick:()=>{G(!1),V("")},children:(0,t.jsxs)("div",{className:x().modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:x().modalHeader,children:[t.jsx("h2",{children:"Rechazar Sorteo"}),t.jsx("button",{className:x().closeBtn,onClick:()=>{G(!1),V("")},children:"\xd7"})]}),(0,t.jsxs)("div",{className:x().form,style:{padding:"24px"},children:[t.jsx("p",{style:{color:"#666",marginBottom:"20px",fontSize:"14px"},children:"Por favor, proporciona un motivo para rechazar este sorteo. La tienda podr\xe1 ver este motivo."}),(0,t.jsxs)("div",{className:x().formGroup,children:[t.jsx("label",{children:"Motivo del Rechazo *"}),t.jsx("textarea",{className:x().textarea,value:M,onChange:e=>V(e.target.value),placeholder:"Ingresa el motivo del rechazo...",disabled:H===z.id,rows:4})]}),(0,t.jsxs)("div",{className:x().formActions,children:[t.jsx("button",{className:x().cancelBtn,onClick:()=>{G(!1),V("")},disabled:H===z.id,children:"Cancelar"}),t.jsx("button",{className:x().submitBtn,onClick:()=>eL(z.id),disabled:H===z.id||!M.trim(),style:{backgroundColor:"#F44336",borderColor:"#F44336"},children:H===z.id?"Procesando...":(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.$Rx,{style:{marginRight:"6px"}}),"Confirmar Rechazo"]})})]})]})]})})]})]}):t.jsx("div",{className:x().dashboard,children:t.jsx("div",{className:x().errorContainer,children:t.jsx("p",{children:"No autenticado"})})})}},43993:(e,s,a)=>{"use strict";a.d(s,{Z:()=>d});var t=a(19899),r=a(18154),i=a(54175);let o={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var n=a(11648),l=a.n(n);function d({size:e="medium",showText:s=!0,className:a="",href:n="/"}){let d=(0,t.jsxs)("div",{className:`${l().logo} ${l()[e]} ${a}`,children:[t.jsx(r.default,{src:o,alt:"TIKETEA ONLINE",width:"small"===e?40:"medium"===e?60:80,height:"small"===e?40:"medium"===e?60:80,className:l().logoImage,priority:!0}),s&&t.jsx("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return n?t.jsx(i.default,{href:n,className:l().logoLink,children:d}):d}},80760:(e,s,a)=>{"use strict";a.d(s,{a:()=>i});var t=a(5507),r=a(38442);function i(){let[e,s]=(0,t.useState)(!1);return{...(0,r.t)(),isHydrated:e}}},10752:(e,s,a)=>{"use strict";a.d(s,{x:()=>i});var t=a(20751);class r{client;constructor(){this.client=t.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let s=localStorage.getItem("token");console.log("API Request - Token from localStorage:",s),s?(e.headers.Authorization=`Bearer ${s}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,s){return this.client.get(e,s)}async post(e,s,a){return this.client.post(e,s,a)}async put(e,s){return this.client.put(e,s)}async delete(e){return this.client.delete(e)}}let i=new r},42466:(e,s,a)=>{"use strict";a.d(s,{d:()=>r});var t=a(10752);let r={getDashboardStats:async()=>(await t.x.get("/admin/dashboard/stats")).data,getPendingRaffles:async(e=50,s=0)=>(await t.x.get("/admin/raffles/pending",{params:{limit:e,offset:s}})).data,getActiveRaffles:async(e=50,s=0,a)=>(await t.x.get("/admin/raffles/active",{params:{limit:e,offset:s,...a&&{shopId:a}}})).data,getFinishedRaffles:async(e=50,s=0,a)=>(await t.x.get("/admin/raffles/finished",{params:{limit:e,offset:s,...a&&{shopId:a}}})).data,getRaffleDetail:async e=>(await t.x.get(`/admin/raffles/${e}`)).data,approveRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/approve`,{})).data,rejectRaffle:async(e,s)=>(await t.x.put(`/admin/raffles/${e}/reject`,{reason:s})).data,cancelRaffle:async(e,s)=>(await t.x.put(`/admin/raffles/${e}/cancel`,{reason:s})).data,executeRaffle:async e=>(await t.x.put(`/admin/raffles/${e}/execute`,{})).data,getAllShops:async(e=50,s=0,a)=>(await t.x.get("/admin/shops",{params:{limit:e,offset:s,...a&&{status:a}}})).data,getShopDetail:async e=>(await t.x.get(`/admin/shops/${e}`)).data,changeShopStatus:async(e,s,a)=>(await t.x.put(`/admin/shops/${e}/status`,{status:s,...a&&{reason:a}})).data,getAllUsers:async(e=50,s=0,a)=>(await t.x.get("/admin/users",{params:{limit:e,offset:s,...a&&{role:a}}})).data,getUserDetail:async e=>(await t.x.get(`/admin/users/${e}`)).data,getAuditLogs:async(e=50,s=0,a)=>(await t.x.get("/admin/audit/logs",{params:{limit:e,offset:s,...a}})).data,getEntityAuditLogs:async(e,s)=>(await t.x.get(`/admin/audit/entity/${e}/${s}`)).data,getAllPayments:async(e=50,s=0,a)=>(await t.x.get("/admin/payments",{params:{limit:e,offset:s,...a?.status&&{status:a.status},...a?.userId&&{userId:a.userId},...a?.raffleId&&{raffleId:a.raffleId}}})).data,getPaymentDetail:async e=>(await t.x.get(`/admin/payments/${e}`)).data}},33745:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});var t=a(10752);let r={async createPayment(e){try{return(await t.x.post("/payments",e)).data}catch(e){throw console.error("Error creating payment:",e),e}},async confirmPayment(e){try{return(await t.x.post("/payments/confirm",e)).data}catch(e){throw console.error("Error confirming payment:",e),e}},async failPayment(e,s){try{return(await t.x.post(`/payments/${e}/fail`,{failureReason:s})).data}catch(e){throw console.error("Error failing payment:",e),e}},async getPaymentById(e){try{return(await t.x.get(`/payments/${e}`)).data}catch(e){throw console.error("Error fetching payment:",e),e}},async getMyPayments(){try{return(await t.x.get("/payments/user/me")).data}catch(e){throw console.error("Error fetching user payments:",e),e}},async getCompletedPaymentsByRaffleId(e){try{return(await t.x.get(`/payments/raffle/${e}`)).data}catch(e){throw console.error("Error fetching raffle payments:",e),e}},async refundPayment(e){try{return(await t.x.post(`/payments/${e}/refund`,{})).data}catch(e){throw console.error("Error refunding payment:",e),e}}}},57355:(e,s,a)=>{"use strict";a.d(s,{m:()=>r});var t=a(10752);let r={getMyShop:async()=>(await t.x.get("/shops/my-shop/current")).data,getShopById:async e=>(await t.x.get(`/shops/${e}`)).data,updateShop:async(e,s)=>(await t.x.put(`/shops/${e}`,s)).data,getAllShops:async()=>(await t.x.get("/shops")).data,getVerifiedShops:async()=>(await t.x.get("/shops/verified")).data,getShopStatistics:async e=>(await t.x.get(`/shops/${e}/statistics`)).data}},24544:(e,s,a)=>{"use strict";a.d(s,{T:()=>r});var t=a(10752);let r={async uploadProductImage(e){let s=new FormData;return s.append("image",e),(await t.x.post("/uploads/products/image",s,{headers:{"Content-Type":"multipart/form-data"}})).data.fileUrl},async deleteImage(e){await t.x.delete(`/uploads/products/image/${e}`)}}},38442:(e,s,a)=>{"use strict";a.d(s,{t:()=>i});var t=a(24978),r=a(31460);let i=(0,t.Ue)()((0,r.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:s=>e({user:s,isAuthenticated:!!s}),setToken:s=>{s?localStorage.setItem("token",s):localStorage.removeItem("token"),e({token:s})},setIsLoading:s=>e({isLoading:s}),setError:s=>e({error:s}),logout:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},60594:e=>{e.exports={dashboard:"dashboard_dashboard__gQFzy",loadingContainer:"dashboard_loadingContainer__DQmdc",errorContainer:"dashboard_errorContainer__2k3e0",header:"dashboard_header__0IQ3E",headerTitle:"dashboard_headerTitle__HIxZh",headerIcon:"dashboard_headerIcon__5FI23",headerContent:"dashboard_headerContent__3oqbj",userSection:"dashboard_userSection__BSeKt",userInfo:"dashboard_userInfo__J_gfr",userAvatar:"dashboard_userAvatar__AphB1",userDetails:"dashboard_userDetails__hitT1",userName:"dashboard_userName__CtC1T",email:"dashboard_email__98kzB",role:"dashboard_role__560J9",logoutBtn:"dashboard_logoutBtn__UgAUz",logoutIcon:"dashboard_logoutIcon__DdWYL",errorBanner:"dashboard_errorBanner__FsIo1",tabsContainer:"dashboard_tabsContainer__IbrIv",tab:"dashboard_tab__nvtkC",activeTab:"dashboard_activeTab__YbTNq",tabIcon:"dashboard_tabIcon__8vIXb",content:"dashboard_content__lgdH3",overviewGrid:"dashboard_overviewGrid__tJR4P",card:"dashboard_card__uY0FF",cardIcon:"dashboard_cardIcon__mzkui",bigNumber:"dashboard_bigNumber__u5eTh",subtitle:"dashboard_subtitle__xP_XA",statusBreakdown:"dashboard_statusBreakdown__vsufj",tableContainer:"dashboard_tableContainer__XIu3f",table:"dashboard_table__qUgyM",badge:"dashboard_badge__3z1pJ",progressBar:"dashboard_progressBar__PzDkJ",progressFill:"dashboard_progressFill__eBY_A",progressText:"dashboard_progressText__zzeEz",emptyMessage:"dashboard_emptyMessage__Iagxl",moreItems:"dashboard_moreItems__rmW6c",tableHeader:"dashboard_tableHeader__n9Xxd",createBtn:"dashboard_createBtn__6OW9J",modalOverlay:"dashboard_modalOverlay__b2eFY",modal:"dashboard_modal__qgAga",modalHeader:"dashboard_modalHeader__E15Ib",closeBtn:"dashboard_closeBtn__FCbJn",form:"dashboard_form__2eBG3",formGroup:"dashboard_formGroup__xr6t0",input:"dashboard_input__5d_PV",textarea:"dashboard_textarea__gVSwe",formActions:"dashboard_formActions__l_SfE",cancelBtn:"dashboard_cancelBtn__sU02m",submitBtn:"dashboard_submitBtn__SO014",buyTicketsBtn:"dashboard_buyTicketsBtn__jp_hU",quantityBtn:"dashboard_quantityBtn__cJA_m"}},11648:e=>{e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},12516:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/dashboard/page.tsx#default`)},22399:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i,metadata:()=>r});var t=a(35023);a(91641);let r={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return t.jsx("html",{lang:"es",children:t.jsx("body",{children:e})})}},91641:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,751,1925,4175,5562,8154],()=>a(94939));module.exports=t})();