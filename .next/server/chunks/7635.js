exports.id=7635,exports.ids=[7635],exports.modules={57800:(e,r,t)=>{Promise.resolve().then(t.bind(t,81364))},4104:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},81364:(e,r,t)=>{"use strict";function a(){return null}t.d(r,{default:()=>a}),t(5507),t(82986),t(26379)},97837:(e,r,t)=>{"use strict";t.d(r,{Z:()=>w});var a=t(19899),s=t(5507),o=t(76153),n=t(38442),i=t(1260),l=t(54175),c=t(55562),d=t(54756),u=t.n(d);function h({}){let e=(0,o.usePathname)(),r=r=>e.includes(r),t=[{label:"Inicio",icon:c.m6D,href:"/user-panel",id:"dashboard"},{label:"Mis Participaciones",icon:c.E25,href:"/user-panel/participations",id:"participations"},{label:"Sorteos Ganados",icon:c.HR2,href:"/user-panel/won-raffles",id:"won-raffles"},{label:"Historial de Compras",icon:c.NOg,href:"/user-panel/purchase-history",id:"purchase-history"},{label:"Notificaciones",icon:c.vWP,href:"/user-panel/notifications",id:"notifications"},{label:"Centro de Soporte",icon:c.EQ9,href:"/user-panel/support",id:"support"},{label:"Mi Perfil",icon:c.fzv,href:"/user-panel/profile",id:"profile"}];return(0,a.jsxs)("aside",{className:u().sidebar,children:[a.jsx("div",{className:u().sidebarHeader,children:a.jsx("h2",{className:u().title,children:"Mi Panel"})}),a.jsx("nav",{className:u().menu,children:t.map(e=>{let t=e.icon;return(0,a.jsxs)(l.default,{href:e.href,className:`${u().menuItem} ${r(e.id)?u().active:""}`,children:[a.jsx(t,{className:u().icon}),a.jsx("span",{className:u().label,children:e.label})]},e.id)})}),a.jsx("div",{className:u().sidebarFooter,children:a.jsx("p",{className:u().footerText,children:"\xbfNecesitas ayuda? Contacta con nuestro equipo de soporte."})})]})}var p=t(26386),m=t.n(p);function g(){let e=(0,o.useRouter)(),{user:r,logout:t}=(0,n.t)(),[i]=(0,s.useState)(0),[l,d]=(0,s.useState)(!1),u=async()=>{try{await t(),e.push("/")}catch(r){console.error("Error al cerrar sesi\xf3n:",r),e.push("/")}};return a.jsx("header",{className:m().header,children:(0,a.jsxs)("div",{className:m().headerContent,children:[a.jsx("div",{className:m().leftSection,children:a.jsx("h1",{className:m().title,children:"Mi Panel"})}),(0,a.jsxs)("div",{className:m().rightSection,children:[(0,a.jsxs)("button",{className:m().notificationBtn,children:[a.jsx(c.vWP,{}),i>0&&a.jsx("span",{className:m().badge,children:i})]}),(0,a.jsxs)("div",{className:m().userMenu,children:[(0,a.jsxs)("button",{className:m().userButton,onClick:()=>d(!l),children:[a.jsx("div",{className:m().userAvatar,children:r?.name?.charAt(0).toUpperCase()||"U"}),a.jsx("span",{className:m().userName,children:r?.name}),a.jsx(c.bTu,{className:m().chevron})]}),l&&(0,a.jsxs)("div",{className:m().dropdown,children:[(0,a.jsxs)("a",{href:"/user-panel/profile",className:m().dropdownItem,children:[a.jsx(c.fzv,{className:m().dropdownIcon}),"Mi Perfil"]}),(0,a.jsxs)("a",{href:"/user-panel/profile?tab=preferences",className:m().dropdownItem,children:[a.jsx(c.nbt,{className:m().dropdownIcon}),"Preferencias"]}),(0,a.jsxs)("a",{href:"/user-panel/profile?tab=security",className:m().dropdownItem,children:[a.jsx(c.UIZ,{className:m().dropdownIcon}),"Seguridad"]}),a.jsx("hr",{className:m().divider}),(0,a.jsxs)("button",{onClick:u,className:`${m().dropdownItem} ${m().logoutBtn}`,children:[a.jsx(c.xqh,{className:m().dropdownIcon}),"Cerrar Sesi\xf3n"]})]})]})]})]})})}var f=t(10016),y=t.n(f);function w({children:e,activeSection:r}){(0,o.useRouter)();let{user:t,isAuthenticated:s}=(0,n.t)();return s&&t&&t.role===i.i.USER?(0,a.jsxs)("div",{className:y().container,children:[a.jsx(h,{activeSection:r}),(0,a.jsxs)("div",{className:y().mainContent,children:[a.jsx(g,{}),a.jsx("div",{className:y().content,children:e})]})]}):a.jsx("div",{className:y().loading,children:"Redirigiendo..."})}},10752:(e,r,t)=>{"use strict";t.d(r,{x:()=>n});var a=t(20751);let s=(()=>{let e="http://localhost:3001/api";if(!e.startsWith("http://")&&!e.startsWith("https://"))return console.warn("⚠️ NEXT_PUBLIC_API_URL no tiene protocolo, usando https://"),`https://${e}`;if(!e.endsWith("/api")){let r=e.endsWith("/")?e.slice(0,-1):e;return`${r}/api`}return e})();class o{client;constructor(){this.client=a.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let r=localStorage.getItem("token");console.log("API Request - Token from localStorage:",r),r?(e.headers.Authorization=`Bearer ${r}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,r){return this.client.get(e,r)}async post(e,r,t){return this.client.post(e,r,t)}async put(e,r){return this.client.put(e,r)}async delete(e){return this.client.delete(e)}}let n=new o},26379:(e,r,t)=>{"use strict";let a;t.d(r,{I8:()=>c,db:()=>l});var s=t(3827),o=t(82986),n=t(31027),i=t(80549);a=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyCROuDbFChzWrRSXQ42lih56oLEA1hjne4",authDomain:"sorteo-b8fb0.firebaseapp.com",projectId:"sorteo-b8fb0",storageBucket:"sorteo-b8fb0.firebasestorage.app",messagingSenderId:"58395659334",appId:"1:58395659334:web:58c8f46dab380710eb4e47"}):(0,s.C6)()[0];let l=(0,o.ad)(a);(0,n.cF)(a);let c=(0,i.v0)(a)},16012:(e,r,t)=>{"use strict";t.d(r,{Y:()=>l});var a=t(80549),s=t(82986),o=t(26379),n=t(1260);let i=async e=>{try{let r=await (0,s.getDoc)((0,s.doc)(o.db,"users",e.uid));if(!r.exists())return{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:n.i.USER};let t=r.data();return{id:e.uid,name:t.name||e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:t.role||n.i.USER}}catch(r){return console.error("Error converting Firebase user:",r),{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:n.i.USER}}},l={async register(e){try{let r=(await (0,a.Xb)(o.I8,e.email,e.password)).user;e.name&&await (0,a.ck)(r,{displayName:e.name});let t=await r.getIdToken(),l={name:e.name,email:e.email,role:e.role,createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()};if(e.role===n.i.SHOP&&e.shopName){let t={userId:r.uid,name:e.shopName,description:"",status:"pending",createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()},a=await (0,s.ET)((0,s.collection)(o.db,"shops"),t);l.shopId=a.id,await (0,s.pl)((0,s.doc)(o.db,"users",r.uid),l)}else await (0,s.pl)((0,s.doc)(o.db,"users",r.uid),l);return{user:await i(r),token:t}}catch(r){console.error("Error registering user:",r);let e="Error al registrar usuario";throw"auth/email-already-in-use"===r.code?e="Este email ya est\xe1 registrado":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/weak-password"===r.code?e="La contrase\xf1a debe tener al menos 6 caracteres":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async login(e){try{let r=(await (0,a.e5)(o.I8,e.email,e.password)).user,t=await r.getIdToken();return{user:await i(r),token:t}}catch(r){console.error("Error logging in:",r);let e="Error al iniciar sesi\xf3n";throw"auth/user-not-found"===r.code?e="Usuario no encontrado":"auth/wrong-password"===r.code?e="Contrase\xf1a incorrecta":"auth/invalid-email"===r.code?e="Email inv\xe1lido":"auth/user-disabled"===r.code?e="Usuario deshabilitado":"auth/too-many-requests"===r.code?e="Demasiados intentos. Intenta m\xe1s tarde":"auth/operation-not-allowed"===r.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===r.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":r.message&&(e=r.message),Error(e)}},async logout(){try{await (0,a.w7)(o.I8)}catch(e){throw console.error("Error logging out:",e),e}},async getCurrentUser(){try{let e=o.I8.currentUser;if(!e)return null;return await i(e)}catch(e){return console.error("Error getting current user:",e),null}},async getCurrentUserToken(){try{let e=o.I8.currentUser;if(!e)return null;return await e.getIdToken()}catch(e){return console.error("Error getting token:",e),null}},onAuthStateChanged:e=>(0,a.Aj)(o.I8,async r=>{r?e(await i(r)):e(null)})}},53176:(e,r,t)=>{"use strict";t.d(r,{m:()=>s});var a=t(10752);let s={async getDashboard(){try{return(await a.x.get("/user-panel/dashboard")).data}catch(e){throw console.error("Error fetching dashboard:",e),e}},async getParticipations(){try{return(await a.x.get("/user-panel/participations")).data}catch(e){throw console.error("Error fetching participations:",e),e}},async getParticipationDetail(e){try{return(await a.x.get(`/user-panel/participations/${e}`)).data}catch(e){throw console.error("Error fetching participation detail:",e),e}},async getWonRaffles(){try{return(await a.x.get("/user-panel/won-raffles")).data}catch(e){throw console.error("Error fetching won raffles:",e),e}},async getWonRaffleDetail(e){try{return(await a.x.get(`/user-panel/won-raffles/${e}`)).data}catch(e){throw console.error("Error fetching won raffle detail:",e),e}},async markWonRaffleAsReceived(e){try{return(await a.x.put(`/user-panel/won-raffles/${e}/mark-received`,{})).data}catch(e){throw console.error("Error marking raffle as received:",e),e}},async getPurchaseHistory(){try{return(await a.x.get("/user-panel/purchase-history")).data}catch(e){throw console.error("Error fetching purchase history:",e),e}},async getPurchaseDetail(e){try{return(await a.x.get(`/user-panel/purchase-history/${e}`)).data}catch(e){throw console.error("Error fetching purchase detail:",e),e}},async downloadPurchaseReceipt(e){try{return(await a.x.get(`/user-panel/purchase-history/${e}/receipt`,{responseType:"blob"})).data}catch(e){throw console.error("Error downloading receipt:",e),e}},async exportPurchaseHistoryCSV(){try{return(await a.x.get("/user-panel/purchase-history/export/csv",{responseType:"blob"})).data}catch(e){throw console.error("Error exporting purchase history:",e),e}},async getNotifications(e){try{let r=e?`?limit=${e}`:"";return(await a.x.get(`/user-panel/notifications${r}`)).data}catch(e){throw console.error("Error fetching notifications:",e),e}},async markNotificationAsRead(e){try{return(await a.x.put(`/user-panel/notifications/${e}/read`,{})).data}catch(e){throw console.error("Error marking notification as read:",e),e}},async markAllNotificationsAsRead(){try{await a.x.put("/user-panel/notifications/mark-all-read",{})}catch(e){throw console.error("Error marking all notifications as read:",e),e}},async getProfile(){try{return(await a.x.get("/user-panel/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},async updateProfile(e){try{return(await a.x.put("/user-panel/profile",e)).data}catch(e){throw console.error("Error updating profile:",e),e}},async changePassword(e,r){try{await a.x.post("/user-panel/security/change-password",{currentPassword:e,newPassword:r})}catch(e){throw console.error("Error changing password:",e),e}},async getPreferences(){try{return(await a.x.get("/user-panel/preferences")).data}catch(e){throw console.error("Error fetching preferences:",e),e}},async updatePreferences(e){try{return(await a.x.put("/user-panel/preferences",e)).data}catch(e){throw console.error("Error updating preferences:",e),e}},async getSecuritySettings(){try{return(await a.x.get("/user-panel/security")).data}catch(e){throw console.error("Error fetching security settings:",e),e}},async closeAllSessions(){try{await a.x.post("/user-panel/security/close-all-sessions",{})}catch(e){throw console.error("Error closing all sessions:",e),e}},async getComplaints(){try{return(await a.x.get("/user-panel/complaints")).data}catch(e){throw console.error("Error fetching complaints:",e),e}}}},38442:(e,r,t)=>{"use strict";t.d(r,{t:()=>n});var a=t(24978),s=t(31460),o=t(16012);let n=(0,a.Ue)()((0,s.tJ)((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:r=>e({user:r,isAuthenticated:!!r}),setToken:r=>{r?localStorage.setItem("token",r):localStorage.removeItem("token"),e({token:r})},setIsLoading:r=>e({isLoading:r}),setError:r=>e({error:r}),logout:async()=>{try{await o.Y.logout()}catch(e){console.error("Error logging out:",e)}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}},refreshToken:async()=>{try{let e=await o.Y.getCurrentUserToken();e&&r().setToken(e)}catch(e){console.error("Error refreshing token:",e)}}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},1260:(e,r,t)=>{"use strict";var a;t.d(r,{i:()=>a}),function(e){e.ADMIN="admin",e.SHOP="shop",e.USER="user"}(a||(a={}))},26386:e=>{e.exports={header:"user-panel-header_header__YvbYt",headerContent:"user-panel-header_headerContent__Wt_R3",leftSection:"user-panel-header_leftSection__qi6d9",title:"user-panel-header_title__zvJDX",rightSection:"user-panel-header_rightSection__O5ycN",notificationBtn:"user-panel-header_notificationBtn__1mzqo",badge:"user-panel-header_badge__9b4vT",userMenu:"user-panel-header_userMenu__RvZZg",userButton:"user-panel-header_userButton__HZjuO",userAvatar:"user-panel-header_userAvatar__qcskj",userName:"user-panel-header_userName__3sU8a",chevron:"user-panel-header_chevron__tEq6H",dropdown:"user-panel-header_dropdown__PUF_1",dropdownItem:"user-panel-header_dropdownItem__y3HfC",divider:"user-panel-header_divider__CZXSh",logoutBtn:"user-panel-header_logoutBtn__rP_BX"}},10016:e=>{e.exports={container:"user-panel-layout_container__UNfmn",mainContent:"user-panel-layout_mainContent__XokmT",content:"user-panel-layout_content__Faw9P",loading:"user-panel-layout_loading__ve4Fo"}},54756:e=>{e.exports={sidebar:"user-panel-sidebar_sidebar__ZXmxx",sidebarHeader:"user-panel-sidebar_sidebarHeader__z0nLM",title:"user-panel-sidebar_title__8xInR",menu:"user-panel-sidebar_menu__PEmWn",menuItem:"user-panel-sidebar_menuItem__A1IhO",active:"user-panel-sidebar_active__DIftH",icon:"user-panel-sidebar_icon__2h__E",label:"user-panel-sidebar_label__vK2wW",sidebarFooter:"user-panel-sidebar_sidebarFooter__OXSDq",footerText:"user-panel-sidebar_footerText__crP40"}},24198:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>o});var a=t(35023);t(91641);let s=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/MakeAdminScript.tsx#default`),o={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function n({children:e}){return a.jsx("html",{lang:"es",children:(0,a.jsxs)("body",{children:[e,a.jsx(s,{})]})})}},91641:()=>{}};