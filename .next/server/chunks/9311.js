exports.id=9311,exports.ids=[9311],exports.modules={57800:(e,t,o)=>{Promise.resolve().then(o.bind(o,81364))},4104:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,33817,23)),Promise.resolve().then(o.t.bind(o,19323,23)),Promise.resolve().then(o.t.bind(o,52204,23)),Promise.resolve().then(o.t.bind(o,60820,23)),Promise.resolve().then(o.t.bind(o,55915,23)),Promise.resolve().then(o.t.bind(o,81611,23))},81364:(e,t,o)=>{"use strict";function s(){return null}o.d(t,{default:()=>s}),o(5507),o(82986),o(26379)},17484:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o(19899),r=o(55562),a=o(79499),i=o.n(a);function c(){let e=[{number:1,title:"Eleg\xeds el sorteo",description:"Explora nuestro cat\xe1logo y elige el sorteo que te interesa.",icon:r.xUG},{number:2,title:"Compr\xe1s tickets",description:"Adquiere la cantidad de tickets que desees. Cada ticket es una participaci\xf3n.",icon:r.E25},{number:3,title:"Se realiza el sorteo",description:"Cuando se venden todos los tickets, se ejecuta el sorteo autom\xe1ticamente.",icon:r.KCr},{number:4,title:"Se publica el ganador",description:"El ticket ganador se elige de forma aleatoria y se publica en la plataforma.",icon:r.HR2}];return(0,s.jsxs)("section",{className:i().container,children:[(0,s.jsxs)("div",{className:i().header,children:[s.jsx("h2",{className:i().title,children:"\xbfC\xf3mo funciona este sorteo?"}),s.jsx("p",{className:i().subtitle,children:"Entend\xe9 el mecanismo en 4 pasos simples"})]}),s.jsx("div",{className:i().stepsContainer,children:e.map((t,o)=>{let r=t.icon;return(0,s.jsxs)("div",{className:i().step,children:[s.jsx("div",{className:i().stepIcon,children:s.jsx(r,{})}),(0,s.jsxs)("div",{className:i().stepContent,children:[(0,s.jsxs)("h3",{className:i().stepTitle,children:["Paso ",t.number,": ",t.title]}),s.jsx("p",{className:i().stepDescription,children:t.description})]}),o<e.length-1&&s.jsx("div",{className:i().connector})]},t.number)})}),(0,s.jsxs)("div",{className:i().infoBox,children:[s.jsx("h3",{className:i().infoTitle,children:"Informaci\xf3n importante"}),(0,s.jsxs)("ul",{className:i().infoList,children:[s.jsx("li",{children:"Cada ticket representa una participaci\xf3n en el sorteo."}),s.jsx("li",{children:"El ganador se elige de forma completamente aleatoria."}),s.jsx("li",{children:"El resultado es transparente y verificable."}),s.jsx("li",{children:"El ganador ser\xe1 notificado por email inmediatamente."}),s.jsx("li",{children:"Todos los sorteos cumplen con la normativa vigente."})]})]})]})}},26379:(e,t,o)=>{"use strict";let s;o.d(t,{I8:()=>d,db:()=>n});var r=o(3827),a=o(82986),i=o(31027),c=o(80549);s=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCROuDbFChzWrRSXQ42lih56oLEA1hjne4",authDomain:"sorteo-b8fb0.firebaseapp.com",projectId:"sorteo-b8fb0",storageBucket:"sorteo-b8fb0.firebasestorage.app",messagingSenderId:"58395659334",appId:"1:58395659334:web:58c8f46dab380710eb4e47"}):(0,r.C6)()[0];let n=(0,a.ad)(s);(0,i.cF)(s);let d=(0,c.v0)(s)},45144:(e,t,o)=>{"use strict";o.d(t,{U:()=>n});var s=o(82986),r=o(26379),a=o(65373);let i=e=>e?.toDate?e.toDate():e instanceof Date?e:"string"==typeof e?new Date(e):new Date,c=async e=>{let t=e.data(),o={id:e.id,shopId:t.shopId||"",productId:t.productId||"",productValue:t.productValue||0,totalTickets:t.totalTickets||0,soldTickets:t.soldTickets||0,status:t.status||a.r.DRAFT,requiresDeposit:t.requiresDeposit||!1,winnerTicketId:t.winnerTicketId,specialConditions:t.specialConditions,createdAt:i(t.createdAt),updatedAt:i(t.updatedAt),activatedAt:t.activatedAt?i(t.activatedAt):void 0,raffleExecutedAt:t.raffleExecutedAt?i(t.raffleExecutedAt):void 0};if(t.shopId)try{let e=await (0,s.getDoc)((0,s.doc)(r.db,"shops",t.shopId));if(e.exists()){let t=e.data();o.shop={id:e.id,userId:t.userId||"",name:t.name||"",description:t.description,logo:t.logo,publicEmail:t.publicEmail,phone:t.phone,socialMedia:t.socialMedia,status:t.status||"pending",createdAt:i(t.createdAt),updatedAt:i(t.updatedAt)}}}catch(e){console.error("Error loading shop:",e)}if(t.productId)try{let e=await (0,s.getDoc)((0,s.doc)(r.db,"products",t.productId));if(e.exists()){let t=e.data();o.product={id:e.id,shopId:t.shopId||"",name:t.name||"",description:t.description||"",value:t.value||0,height:t.height||0,width:t.width||0,depth:t.depth||0,requiresDeposit:t.requiresDeposit||!1,category:t.category,mainImage:t.mainImage,status:t.status||"inactive",createdAt:i(t.createdAt),updatedAt:i(t.updatedAt)}}}catch(e){console.error("Error loading product:",e)}return o},n={async getActiveRaffles(e){try{let t;let o=(0,s.collection)(r.db,"raffles");try{let r=(0,s.query)(o,(0,s.where)("status","==",a.r.ACTIVE));if(e?.shopId&&(r=(0,s.query)(r,(0,s.where)("shopId","==",e.shopId))),e?.shopId)t=await (0,s.getDocs)(r);else try{r=e?.sortBy==="newest"?(0,s.query)(r,(0,s.Xo)("createdAt","desc")):e?.sortBy==="closest"?(0,s.query)(r,(0,s.Xo)("soldTickets","desc")):e?.sortBy==="price-asc"?(0,s.query)(r,(0,s.Xo)("productValue","asc")):e?.sortBy==="price-desc"?(0,s.query)(r,(0,s.Xo)("productValue","desc")):(0,s.query)(r,(0,s.Xo)("createdAt","desc")),t=await (0,s.getDocs)(r)}catch(i){console.warn("Error con orderBy, obteniendo sin ordenar:",i),r=e?.shopId?(0,s.query)(o,(0,s.where)("status","==",a.r.ACTIVE),(0,s.where)("shopId","==",e.shopId)):(0,s.query)(o,(0,s.where)("status","==",a.r.ACTIVE)),t=await (0,s.getDocs)(r)}}catch(i){console.warn("Error en consulta con where, obteniendo todos los sorteos:",i);let e=(0,s.query)(o),r=await (0,s.getDocs)(e);t={docs:r.docs.filter(e=>{let t=e.data().status;return t===a.r.ACTIVE||"active"===t})},console.log(`ðŸ“Š Sorteos activos encontrados despu\xe9s de filtrar: ${t.docs.length} de ${r.docs.length} totales`)}let i=[];for(let e of t.docs)try{let t=await c(e);i.push(t)}catch(e){console.error("Error converting raffle doc:",e)}if(console.log(`âœ… Sorteos activos cargados: ${i.length}`),e?.category&&(i=i.filter(t=>t.product?.category===e.category)),e?.minValue!==void 0&&(i=i.filter(t=>t.productValue>=e.minValue)),e?.maxValue!==void 0&&(i=i.filter(t=>t.productValue<=e.maxValue)),e?.search){let t=e.search.toLowerCase();i=i.filter(e=>e.product?.name.toLowerCase().includes(t)||e.product?.description.toLowerCase().includes(t)||e.shop?.name.toLowerCase().includes(t))}(e?.shopId||e?.sortBy)&&(e?.sortBy==="newest"?i.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):e?.sortBy==="closest"?i.sort((e,t)=>t.soldTickets-e.soldTickets):e?.sortBy==="price-asc"?i.sort((e,t)=>e.productValue-t.productValue):e?.sortBy==="price-desc"&&i.sort((e,t)=>t.productValue-e.productValue));let n=e?.limit||12,d=e?.page||1,l=(d-1)*n,p=i.length;return{data:i.slice(l,l+n),total:p,page:d,limit:n,totalPages:Math.ceil(p/n)}}catch(e){throw console.error("Error fetching active raffles:",e),e}},async getRaffleById(e){try{let t=await (0,s.getDoc)((0,s.doc)(r.db,"raffles",e));if(!t.exists())throw Error("Raffle not found");return await c(t)}catch(e){throw console.error("Error fetching raffle:",e),e}},async getRafflesByShop(e,t){try{let o=(0,s.collection)(r.db,"raffles"),i=(0,s.query)(o,(0,s.where)("shopId","==",e),(0,s.where)("status","==",a.r.ACTIVE)),n=await (0,s.getDocs)(i),d=[];for(let e of n.docs){let t=await c(e);d.push(t)}if(t?.search){let e=t.search.toLowerCase();d=d.filter(t=>t.product?.name.toLowerCase().includes(e)||t.product?.description.toLowerCase().includes(e))}t?.sortBy==="newest"?d.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):t?.sortBy==="closest"?d.sort((e,t)=>t.soldTickets-e.soldTickets):d.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime());let l=t?.limit||12,p=t?.page||1,u=(p-1)*l,h=d.length;return{data:d.slice(u,u+l),total:h,page:p,limit:l,totalPages:Math.ceil(h/l)}}catch(e){throw console.error("Error fetching shop raffles:",e),e}},async getCategories(){try{let e=(0,s.collection)(r.db,"products"),t=(0,s.query)(e,(0,s.where)("status","==","active")),o=await (0,s.getDocs)(t),a=new Set;return o.docs.forEach(e=>{let t=e.data();t.category&&a.add(t.category)}),Array.from(a).sort()}catch(e){return console.error("Error fetching categories:",e),[]}},async getShopsWithActiveRaffles(){try{let e=(0,s.collection)(r.db,"raffles"),t=(0,s.query)(e,(0,s.where)("status","==",a.r.ACTIVE)),o=await (0,s.getDocs)(t),i=new Set;o.docs.forEach(e=>{let t=e.data();t.shopId&&i.add(t.shopId)});let c=[];for(let e of i)try{let t=await (0,s.getDoc)((0,s.doc)(r.db,"shops",e));if(t.exists()){let e=t.data();c.push({id:t.id,name:e.name||"Tienda sin nombre"})}}catch(t){console.error(`Error loading shop ${e}:`,t)}return c.sort((e,t)=>e.name.localeCompare(t.name))}catch(e){return console.error("Error fetching shops:",e),[]}}}},83730:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});let s=o(45144).U},65373:(e,t,o)=>{"use strict";var s;o.d(t,{r:()=>s}),function(e){e.DRAFT="draft",e.PENDING_APPROVAL="pending_approval",e.ACTIVE="active",e.PAUSED="paused",e.SOLD_OUT="sold_out",e.FINISHED="finished",e.CANCELLED="cancelled",e.REJECTED="rejected"}(s||(s={}))},79499:e=>{e.exports={container:"HowItWorks_container__mnq7x",header:"HowItWorks_header__TUNtf",title:"HowItWorks_title__R9mRH",subtitle:"HowItWorks_subtitle__p1VGO",stepsContainer:"HowItWorks_stepsContainer__z4SVF",step:"HowItWorks_step__xqJEj",stepIcon:"HowItWorks_stepIcon__daqZC",float:"HowItWorks_float__bIpD0",stepContent:"HowItWorks_stepContent__1KjE5",stepTitle:"HowItWorks_stepTitle__wWntG",stepDescription:"HowItWorks_stepDescription__Gjb4i",connector:"HowItWorks_connector__0xEXv",infoBox:"HowItWorks_infoBox__vaEP0",infoTitle:"HowItWorks_infoTitle__5IZQi",infoList:"HowItWorks_infoList__05_Ra"}},24198:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i,metadata:()=>a});var s=o(35023);o(91641);let r=(0,o(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/MakeAdminScript.tsx#default`),a={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return s.jsx("html",{lang:"es",children:(0,s.jsxs)("body",{children:[e,s.jsx(r,{})]})})}},91641:()=>{}};