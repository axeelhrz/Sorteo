exports.id=6415,exports.ids=[6415],exports.modules={76090:(e,a,t)=>{Promise.resolve().then(t.bind(t,36445))},57800:(e,a,t)=>{Promise.resolve().then(t.bind(t,81364))},4104:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,33817,23)),Promise.resolve().then(t.t.bind(t,19323,23)),Promise.resolve().then(t.t.bind(t,52204,23)),Promise.resolve().then(t.t.bind(t,60820,23)),Promise.resolve().then(t.t.bind(t,55915,23)),Promise.resolve().then(t.t.bind(t,81611,23))},36445:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var n=t(19899),r=t(5507),s=t(54175),i=t(76153),o=t(55562),l=t(38442),d=t(43993),c=t(51881),m=t.n(c);function u({children:e}){let a=(0,i.useRouter)(),{user:t,logout:c}=(0,l.t)(),[u,_]=(0,r.useState)(!0);if(t?.role!=="admin")return n.jsx("div",{className:m().unauthorized,children:(0,n.jsxs)("div",{className:m().unauthorizedContent,children:[n.jsx("h1",{children:"No autorizado"}),n.jsx("p",{children:"No tienes permiso para acceder a esta secci\xf3n."}),n.jsx("button",{onClick:()=>a.push("/"),children:"Volver al inicio"})]})});let h=async()=>{try{await c(),a.push("/login")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),a.push("/login")}};return(0,n.jsxs)("div",{className:m().adminContainer,children:[(0,n.jsxs)("aside",{className:`${m().sidebar} ${u?m().open:m().closed}`,children:[(0,n.jsxs)("div",{className:m().sidebarHeader,children:[n.jsx(d.Z,{size:"small",showText:!1}),n.jsx("h2",{children:"Panel Admin"}),n.jsx("button",{className:m().toggleBtn,onClick:()=>_(!u),children:n.jsx(o.cur,{})})]}),(0,n.jsxs)("nav",{className:m().sidebarNav,children:[(0,n.jsxs)(s.default,{href:"/admin",className:m().navItem,children:[n.jsx(o.orK,{className:m().navIcon}),n.jsx("span",{children:"Dashboard"})]}),(0,n.jsxs)(s.default,{href:"/admin/raffles/pending",className:m().navItem,children:[n.jsx(o.TCC,{className:m().navIcon}),n.jsx("span",{children:"Sorteos Pendientes"})]}),(0,n.jsxs)(s.default,{href:"/admin/raffles/active",className:m().navItem,children:[n.jsx(o.KCr,{className:m().navIcon}),n.jsx("span",{children:"Sorteos Activos"})]}),(0,n.jsxs)(s.default,{href:"/admin/raffles/finished",className:m().navItem,children:[n.jsx(o._rq,{className:m().navIcon}),n.jsx("span",{children:"Sorteos Finalizados"})]}),(0,n.jsxs)(s.default,{href:"/admin/shops",className:m().navItem,children:[n.jsx(o.x8h,{className:m().navIcon}),n.jsx("span",{children:"Tiendas"})]}),(0,n.jsxs)(s.default,{href:"/admin/users",className:m().navItem,children:[n.jsx(o.WY8,{className:m().navIcon}),n.jsx("span",{children:"Usuarios"})]}),(0,n.jsxs)(s.default,{href:"/admin/audit",className:m().navItem,children:[n.jsx(o.NOg,{className:m().navIcon}),n.jsx("span",{children:"Auditor\xeda"})]}),(0,n.jsxs)(s.default,{href:"/admin/payments",className:m().navItem,children:[n.jsx(o.XiQ,{className:m().navIcon}),n.jsx("span",{children:"Transacciones"})]})]}),(0,n.jsxs)("div",{className:m().sidebarFooter,children:[(0,n.jsxs)("div",{className:m().userInfo,children:[n.jsx("p",{children:t?.name}),n.jsx("small",{children:t?.email})]}),n.jsx("button",{className:m().logoutBtn,onClick:h,children:"Cerrar sesi\xf3n"})]})]}),(0,n.jsxs)("main",{className:m().mainContent,children:[n.jsx("div",{className:m().topBar,children:n.jsx("h1",{children:"Panel de Administraci\xf3n"})}),n.jsx("div",{className:m().content,children:e})]})]})}},43993:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var n=t(19899),r=t(18154),s=t(54175);let i={src:"/_next/static/media/logo.4501bff6.png",height:1080,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAz0lEQVR42mNgaFnGzAAFZnO3GZkDMYyPkDNtkpWbteVEyqr9/0FYdObmEwxc1bJwhXMOXTgx++D5/5P2nvk7Zd/Zv0uOXf4P5J+AyAb3Gi08eun/z99//i48cunf0uOX//3////vsuNX/jOE9QGti+g3Akr8BwlefPj839XHL8EKFhy5+J8hdiLEPTMOnDsBtOY/yHgg+++qk1f/zzt84QQDHGRMk7Wfv/2Ezuwt/5Vmbv6vNXvrCYbIfqgjp2+Ce7Nx23Gjms1HEd6csoEZAALjd67o7P0OAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var o=t(11648),l=t.n(o);function d({size:e="medium",showText:a=!0,className:t="",href:o="/"}){let d=(0,n.jsxs)("div",{className:`${l().logo} ${l()[e]} ${t}`,children:[n.jsx(r.default,{src:i,alt:"TIKETEA ONLINE",width:"small"===e?40:"medium"===e?60:80,height:"small"===e?40:"medium"===e?60:80,className:l().logoImage,priority:!0}),a&&n.jsx("span",{className:l().logoText,children:"TIKETEA ONLINE"})]});return o?n.jsx(s.default,{href:o,className:l().logoLink,children:d}):d}},81364:(e,a,t)=>{"use strict";function n(){return null}t.d(a,{default:()=>n}),t(5507),t(82986),t(26379)},10752:(e,a,t)=>{"use strict";t.d(a,{x:()=>i});var n=t(20751);let r=(()=>{let e="http://localhost:3001/api";if(!e.startsWith("http://")&&!e.startsWith("https://"))return console.warn("⚠️ NEXT_PUBLIC_API_URL no tiene protocolo, usando https://"),`https://${e}`;if(!e.endsWith("/api")){let a=e.endsWith("/")?e.slice(0,-1):e;return`${a}/api`}return e})();class s{client;constructor(){this.client=n.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{try{let a=localStorage.getItem("token");console.log("API Request - Token from localStorage:",a),a?(e.headers.Authorization=`Bearer ${a}`,console.log("API Request - Authorization header set:",e.headers.Authorization)):console.log("API Request - No token found"),e.data instanceof FormData&&delete e.headers["Content-Type"]}catch(e){console.error("Error reading token from localStorage:",e)}return e}),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&localStorage.removeItem("token"),Promise.reject(e)))}async register(e){return this.client.post("/auth/register",e)}async login(e){return this.client.post("/auth/login",e)}async getProfile(){return this.client.get("/auth/profile")}async logout(){return this.client.post("/auth/logout")}async get(e,a){return this.client.get(e,a)}async post(e,a,t){return this.client.post(e,a,t)}async put(e,a){return this.client.put(e,a)}async delete(e){return this.client.delete(e)}}let i=new s},26379:(e,a,t)=>{"use strict";let n;t.d(a,{I8:()=>d,db:()=>l});var r=t(3827),s=t(82986),i=t(31027),o=t(80549);n=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCROuDbFChzWrRSXQ42lih56oLEA1hjne4",authDomain:"sorteo-b8fb0.firebaseapp.com",projectId:"sorteo-b8fb0",storageBucket:"sorteo-b8fb0.firebasestorage.app",messagingSenderId:"58395659334",appId:"1:58395659334:web:58c8f46dab380710eb4e47"}):(0,r.C6)()[0];let l=(0,s.ad)(n);(0,i.cF)(n);let d=(0,o.v0)(n)},16012:(e,a,t)=>{"use strict";t.d(a,{Y:()=>l});var n=t(80549),r=t(82986),s=t(26379),i=t(1260);let o=async e=>{try{let a=await (0,r.getDoc)((0,r.doc)(s.db,"users",e.uid));if(!a.exists())return{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER};let t=a.data();return{id:e.uid,name:t.name||e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:t.role||i.i.USER}}catch(a){return console.error("Error converting Firebase user:",a),{id:e.uid,name:e.displayName||e.email?.split("@")[0]||"Usuario",email:e.email||"",role:i.i.USER}}},l={async register(e){try{let a=(await (0,n.Xb)(s.I8,e.email,e.password)).user;e.name&&await (0,n.ck)(a,{displayName:e.name});let t=await a.getIdToken(),l={name:e.name,email:e.email,role:e.role,createdAt:(0,r.serverTimestamp)(),updatedAt:(0,r.serverTimestamp)()};if(e.role===i.i.SHOP&&e.shopName){let t={userId:a.uid,name:e.shopName,description:"",status:"pending",createdAt:(0,r.serverTimestamp)(),updatedAt:(0,r.serverTimestamp)()},n=await (0,r.ET)((0,r.collection)(s.db,"shops"),t);l.shopId=n.id,await (0,r.pl)((0,r.doc)(s.db,"users",a.uid),l)}else await (0,r.pl)((0,r.doc)(s.db,"users",a.uid),l);return{user:await o(a),token:t}}catch(a){console.error("Error registering user:",a);let e="Error al registrar usuario";throw"auth/email-already-in-use"===a.code?e="Este email ya est\xe1 registrado":"auth/invalid-email"===a.code?e="Email inv\xe1lido":"auth/weak-password"===a.code?e="La contrase\xf1a debe tener al menos 6 caracteres":"auth/operation-not-allowed"===a.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===a.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":a.message&&(e=a.message),Error(e)}},async login(e){try{let a=(await (0,n.e5)(s.I8,e.email,e.password)).user,t=await a.getIdToken();return{user:await o(a),token:t}}catch(a){console.error("Error logging in:",a);let e="Error al iniciar sesi\xf3n";throw"auth/user-not-found"===a.code?e="Usuario no encontrado":"auth/wrong-password"===a.code?e="Contrase\xf1a incorrecta":"auth/invalid-email"===a.code?e="Email inv\xe1lido":"auth/user-disabled"===a.code?e="Usuario deshabilitado":"auth/too-many-requests"===a.code?e="Demasiados intentos. Intenta m\xe1s tarde":"auth/operation-not-allowed"===a.code?e="El m\xe9todo de autenticaci\xf3n por email/password no est\xe1 habilitado. Por favor, contacta al administrador.":"auth/network-request-failed"===a.code?e="Error de conexi\xf3n. Verifica tu conexi\xf3n a internet.":a.message&&(e=a.message),Error(e)}},async logout(){try{await (0,n.w7)(s.I8)}catch(e){throw console.error("Error logging out:",e),e}},async getCurrentUser(){try{let e=s.I8.currentUser;if(!e)return null;return await o(e)}catch(e){return console.error("Error getting current user:",e),null}},async getCurrentUserToken(){try{let e=s.I8.currentUser;if(!e)return null;return await e.getIdToken()}catch(e){return console.error("Error getting token:",e),null}},onAuthStateChanged:e=>(0,n.Aj)(s.I8,async a=>{a?e(await o(a)):e(null)})}},38442:(e,a,t)=>{"use strict";t.d(a,{t:()=>i});var n=t(24978),r=t(31460),s=t(16012);let i=(0,n.Ue)()((0,r.tJ)((e,a)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,setUser:a=>e({user:a,isAuthenticated:!!a}),setToken:a=>{a?localStorage.setItem("token",a):localStorage.removeItem("token"),e({token:a})},setIsLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),logout:async()=>{try{await s.Y.logout()}catch(e){console.error("Error logging out:",e)}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})}},refreshToken:async()=>{try{let e=await s.Y.getCurrentUserToken();e&&a().setToken(e)}catch(e){console.error("Error refreshing token:",e)}}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},1260:(e,a,t)=>{"use strict";var n;t.d(a,{i:()=>n}),function(e){e.ADMIN="admin",e.SHOP="shop",e.USER="user"}(n||(n={}))},51881:e=>{e.exports={adminContainer:"admin_adminContainer__Eh90a",sidebar:"admin_sidebar__mXGAh",closed:"admin_closed__0toWD",sidebarHeader:"admin_sidebarHeader__R_jJT",toggleBtn:"admin_toggleBtn__xfw93",sidebarNav:"admin_sidebarNav__WZtZQ",navItem:"admin_navItem__DShOG",navIcon:"admin_navIcon__3O_Ni",sidebarFooter:"admin_sidebarFooter__3hkih",userInfo:"admin_userInfo__LVYmW",logoutBtn:"admin_logoutBtn__XlQ6d",mainContent:"admin_mainContent__LKiLk",topBar:"admin_topBar__NC1F1",content:"admin_content__q9bCm",unauthorized:"admin_unauthorized__IQ2li",unauthorizedContent:"admin_unauthorizedContent__WVcyS",dashboardGrid:"admin_dashboardGrid__eoxej",statCard:"admin_statCard__x3Xg1",warning:"admin_warning__AVQfv",danger:"admin_danger__sptcS",success:"admin_success__1eje9",info:"admin_info__tS_KQ",statHeader:"admin_statHeader__eYJkD",statIcon:"admin_statIcon__S4aUI",value:"admin_value__TMFsT",tableContainer:"admin_tableContainer__GVxxO",tableHeader:"admin_tableHeader___8L4K",filterContainer:"admin_filterContainer__6WkIk",filterSelect:"admin_filterSelect__OG5aD",filterInput:"admin_filterInput__qeIwH",table:"admin_table__Wi_BD",tableHead:"admin_tableHead__HUGym",tableHeadCell:"admin_tableHeadCell__aGufP",tableCell:"admin_tableCell__sFHBM",tableBodyRow:"admin_tableBodyRow__arYS1",statusBadge:"admin_statusBadge__6Bfmv",pending:"admin_pending__ESWta",active:"admin_active__3D2D6",finished:"admin_finished__w5SWW",rejected:"admin_rejected__lb5oK",cancelled:"admin_cancelled__Qaxdn",verified:"admin_verified__eRcoj",blocked:"admin_blocked__bylJi",actionButtons:"admin_actionButtons__n1G3j",btn:"admin_btn__lDLne",btnPrimary:"admin_btnPrimary__uvegQ",btnSuccess:"admin_btnSuccess__IODau",btnDanger:"admin_btnDanger__76sY_",btnWarning:"admin_btnWarning__5Fqhx",btnSecondary:"admin_btnSecondary__assgO",modal:"admin_modal__DNvY3",open:"admin_open__bBxNv",modalContent:"admin_modalContent__tBgZX",modalHeader:"admin_modalHeader__frRax",modalBody:"admin_modalBody__6pNmP",modalFooter:"admin_modalFooter__jGFWx",formGroup:"admin_formGroup__W0nf_",pagination:"admin_pagination__0kMUt",paginationBtn:"admin_paginationBtn__oojru"}},11648:e=>{e.exports={logo:"Logo_logo__hia7S",logoLink:"Logo_logoLink__gM3sV",logoImage:"Logo_logoImage__daWgp",logoText:"Logo_logoText___NRG4",small:"Logo_small__digRM",medium:"Logo_medium__HI_Ok",large:"Logo_large__OX_7R",dark:"Logo_dark__vov1N"}},83517:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});let n=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/app/admin/layout.tsx#default`)},24198:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i,metadata:()=>s});var n=t(35023);t(91641);let r=(0,t(2772).createProxy)(String.raw`/Users/axelhernandez/Sorteos/frontend/src/components/MakeAdminScript.tsx#default`),s={title:"TIKETEA ONLINE",description:"Plataforma de sorteos online - TIKETEA ONLINE"};function i({children:e}){return n.jsx("html",{lang:"es",children:(0,n.jsxs)("body",{children:[e,n.jsx(r,{})]})})}},91641:()=>{}};